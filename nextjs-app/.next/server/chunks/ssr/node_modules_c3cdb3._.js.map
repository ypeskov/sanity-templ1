{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"server-actions.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/src/visual-editing/server-actions/index.ts"],"sourcesContent":["'use server'\nimport {revalidatePath} from 'next/cache.js'\nimport {draftMode} from 'next/headers.js'\n\nexport async function revalidateRootLayout(): Promise<void> {\n  if (!(await draftMode()).isEnabled) {\n    // eslint-disable-next-line no-console\n    console.warn('Skipped revalidatePath request because draft mode is not enabled')\n    return\n  }\n  await revalidatePath('/', 'layout')\n}\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"file":"VisualEditing.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/src/visual-editing/client-component/utils.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/src/visual-editing/client-component/VisualEditing.tsx"],"sourcesContent":["/**\n * From: https://github.com/vercel/next.js/blob/5469e6427b54ab7e9876d4c85b47f9c3afdc5c1f/packages/next/src/shared/lib/router/utils/path-has-prefix.ts#L10-L17\n * Checks if a given path starts with a given prefix. It ensures it matches\n * exactly without containing extra chars. e.g. prefix /docs should replace\n * for /docs, /docs/, /docs/a but not /docsss\n * @param path The path to check.\n * @param prefix The prefix to check against.\n */\nfunction pathHasPrefix(path: string, prefix: string): boolean {\n  if (typeof path !== 'string') {\n    return false\n  }\n\n  const {pathname} = parsePath(path)\n  return pathname === prefix || pathname.startsWith(`${prefix}/`)\n}\n\n/**\n * From: https://github.com/vercel/next.js/blob/5469e6427b54ab7e9876d4c85b47f9c3afdc5c1f/packages/next/src/shared/lib/router/utils/parse-path.ts#L6-L22\n * Given a path this function will find the pathname, query and hash and return\n * them. This is useful to parse full paths on the client side.\n * @param path A path to parse e.g. /foo/bar?id=1#hash\n */\nfunction parsePath(path: string): {\n  pathname: string\n  query: string\n  hash: string\n} {\n  const hashIndex = path.indexOf('#')\n  const queryIndex = path.indexOf('?')\n  const hasQuery = queryIndex > -1 && (hashIndex < 0 || queryIndex < hashIndex)\n\n  if (hasQuery || hashIndex > -1) {\n    return {\n      pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),\n      query: hasQuery ? path.substring(queryIndex, hashIndex > -1 ? hashIndex : undefined) : '',\n      hash: hashIndex > -1 ? path.slice(hashIndex) : '',\n    }\n  }\n\n  return {pathname: path, query: '', hash: ''}\n}\n\n/**\n * From: https://github.com/vercel/next.js/blob/5469e6427b54ab7e9876d4c85b47f9c3afdc5c1f/packages/next/src/shared/lib/router/utils/add-path-prefix.ts#L3C1-L14C2\n * Adds the provided prefix to the given path. It first ensures that the path\n * is indeed starting with a slash.\n */\nexport function addPathPrefix(path: string, prefix?: string): string {\n  if (!path.startsWith('/') || !prefix) {\n    return path\n  }\n  // If the path is exactly '/' then return just the prefix\n  if (path === '/' && prefix) {\n    return prefix\n  }\n\n  const {pathname, query, hash} = parsePath(path)\n  return `${prefix}${pathname}${query}${hash}`\n}\n\n/**\n * From: https://github.com/vercel/next.js/blob/5469e6427b54ab7e9876d4c85b47f9c3afdc5c1f/packages/next/src/shared/lib/router/utils/remove-path-prefix.ts#L3-L39\n * Given a path and a prefix it will remove the prefix when it exists in the\n * given path. It ensures it matches exactly without containing extra chars\n * and if the prefix is not there it will be noop.\n *\n * @param path The path to remove the prefix from.\n * @param prefix The prefix to be removed.\n */\nexport function removePathPrefix(path: string, prefix: string): string {\n  // If the path doesn't start with the prefix we can return it as is. This\n  // protects us from situations where the prefix is a substring of the path\n  // prefix such as:\n  //\n  // For prefix: /blog\n  //\n  //   /blog -> true\n  //   /blog/ -> true\n  //   /blog/1 -> true\n  //   /blogging -> false\n  //   /blogging/ -> false\n  //   /blogging/1 -> false\n  if (!pathHasPrefix(path, prefix)) {\n    return path\n  }\n\n  // Remove the prefix from the path via slicing.\n  const withoutPrefix = path.slice(prefix.length)\n\n  // If the path without the prefix starts with a `/` we can return it as is.\n  if (withoutPrefix.startsWith('/')) {\n    return withoutPrefix\n  }\n\n  // If the path without the prefix doesn't start with a `/` we need to add it\n  // back to the path to make sure it's a valid path.\n  return `/${withoutPrefix}`\n}\n\n/**\n * From: https://github.com/vercel/next.js/blob/dfe7fc03e2268e7cb765dce6a89e02c831c922d5/packages/next/src/client/normalize-trailing-slash.ts#L16\n * Normalizes the trailing slash of a path according to the `trailingSlash` option\n * in `next.config.js`.\n */\nexport const normalizePathTrailingSlash = (path: string, trailingSlash: boolean): string => {\n  const {pathname, query, hash} = parsePath(path)\n  if (trailingSlash) {\n    if (pathname.endsWith('/')) {\n      return `${pathname}${query}${hash}`\n    }\n    return `${pathname}/${query}${hash}`\n  }\n\n  return `${removeTrailingSlash(pathname)}${query}${hash}`\n}\n\n/**\n * From: https://github.com/vercel/next.js/blob/dfe7fc03e2268e7cb765dce6a89e02c831c922d5/packages/next/src/shared/lib/router/utils/remove-trailing-slash.ts#L8\n * Removes the trailing slash for a given route or page path. Preserves the\n * root page. Examples:\n *   - `/foo/bar/` -> `/foo/bar`\n *   - `/foo/bar` -> `/foo/bar`\n *   - `/` -> `/`\n */\nfunction removeTrailingSlash(route: string) {\n  return route.replace(/\\/$/, '') || '/'\n}\n","import {\n  type HistoryAdapter,\n  type HistoryAdapterNavigate,\n  type HistoryRefresh,\n  VisualEditing as VisualEditingComponent,\n  type VisualEditingOptions,\n} from '@sanity/visual-editing/react'\nimport {usePathname, useRouter, useSearchParams} from 'next/navigation.js'\nimport {revalidateRootLayout} from 'next-sanity/visual-editing/server-actions'\nimport {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {createPortal} from 'react-dom'\n\nimport {addPathPrefix, normalizePathTrailingSlash, removePathPrefix} from './utils'\n\n/**\n * @public\n */\nexport interface VisualEditingProps extends Omit<VisualEditingOptions, 'history'> {\n  /**\n   * @deprecated The histoy adapter is already implemented\n   */\n  history?: never\n  /**\n   * If next.config.ts is configured with a basePath we try to configure it automatically,\n   * you can disable this by setting basePath to ''.\n   * @example basePath=\"/my-custom-base-path\"\n   * @alpha experimental and may change without notice\n   * @defaultValue process.env.__NEXT_ROUTER_BASEPATH || ''\n   */\n  basePath?: string\n  /**\n   * If next.config.ts is configured with a `trailingSlash` we try to detect it automatically,\n   * it can be controlled manually by passing a boolean.\n   * @example trailingSlash={true}\n   * @alpha experimental and may change without notice\n   * @defaultValue Boolean(process.env.__NEXT_TRAILING_SLASH)\n   */\n  trailingSlash?: boolean\n}\n\nexport default function VisualEditing(props: VisualEditingProps): React.JSX.Element | null {\n  const {basePath = '', components, refresh, trailingSlash = false, zIndex} = props\n\n  const router = useRouter()\n  const routerRef = useRef(router)\n  const [navigate, setNavigate] = useState<HistoryAdapterNavigate | undefined>()\n\n  useEffect(() => {\n    routerRef.current = router\n  }, [router])\n\n  const history = useMemo<HistoryAdapter>(\n    () => ({\n      subscribe: (_navigate) => {\n        setNavigate(() => _navigate)\n        return () => setNavigate(undefined)\n      },\n      update: (update) => {\n        switch (update.type) {\n          case 'push':\n            return routerRef.current.push(removePathPrefix(update.url, basePath))\n          case 'pop':\n            return routerRef.current.back()\n          case 'replace':\n            return routerRef.current.replace(removePathPrefix(update.url, basePath))\n          default:\n            throw new Error(`Unknown update type: ${update.type}`)\n        }\n      },\n    }),\n    [basePath],\n  )\n\n  const pathname = usePathname()\n  const searchParams = useSearchParams()\n  useEffect(() => {\n    if (navigate) {\n      navigate({\n        type: 'push',\n        url: normalizePathTrailingSlash(\n          addPathPrefix(`${pathname}${searchParams?.size ? `?${searchParams}` : ''}`, basePath),\n          trailingSlash,\n        ),\n      })\n    }\n  }, [basePath, navigate, pathname, searchParams, trailingSlash])\n\n  const handleRefresh = useCallback(\n    (payload: HistoryRefresh) => {\n      if (refresh) return refresh(payload)\n\n      const manualFastRefresh = () => {\n        // eslint-disable-next-line no-console\n        console.debug(\n          'Live preview is setup, calling router.refresh() to refresh the server components without refetching cached data',\n        )\n        routerRef.current.refresh()\n        return Promise.resolve()\n      }\n      const manualFallbackRefresh = () => {\n        // eslint-disable-next-line no-console\n        console.debug(\n          'No loaders in live mode detected, or preview kit setup, revalidating root layout',\n        )\n        return revalidateRootLayout()\n      }\n      const mutationFastRefresh = (): false => {\n        // eslint-disable-next-line no-console\n        console.debug(\n          'Live preview is setup, mutation is skipped assuming its handled by the live preview',\n        )\n        return false\n      }\n      const mutationFallbackRefresh = () => {\n        // eslint-disable-next-line no-console\n        console.debug(\n          'No loaders in live mode detected, or preview kit setup, revalidating root layout',\n        )\n        return revalidateRootLayout()\n      }\n\n      switch (payload.source) {\n        case 'manual':\n          return payload.livePreviewEnabled ? manualFastRefresh() : manualFallbackRefresh()\n        case 'mutation':\n          return payload.livePreviewEnabled ? mutationFastRefresh() : mutationFallbackRefresh()\n        default:\n          throw new Error('Unknown refresh source', {cause: payload})\n      }\n    },\n    [refresh],\n  )\n\n  const [node, setNode] = useState<HTMLDivElement | null>(null)\n  useEffect(() => {\n    // eslint-disable-next-line no-warning-comments\n    // @TODO use 'sanity-visual-editing' instead of 'div'\n    // eslint-disable-next-line no-shadow\n    const node = document.createElement('div')\n    // eslint-disable-next-line no-warning-comments\n    // @TODO after the element is `sanity-visual-editing` instead of `div`, stop setting this ID\n    node.id = 'sanity-visual-editing'\n    document.documentElement.appendChild(node)\n    setNode(node)\n    return () => {\n      setNode(null)\n      if (document.documentElement.contains(node)) {\n        document.documentElement.removeChild(node)\n      }\n    }\n  }, [])\n\n  if (!node) return null\n\n  return createPortal(\n    <VisualEditingComponent\n      components={components}\n      history={history}\n      refresh={handleRefresh}\n      zIndex={zIndex}\n    />,\n    node,\n  )\n}\n"],"names":["node","VisualEditingComponent"],"mappings":"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","ignoreList":[0,1]}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"file":"resolveEditInfo.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/studioPath.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/getPublishedId.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/jsonPath.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/resolveMapping.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/isArray.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/isRecord.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/walkMap.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/createEditUrl.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/client/src/csm/resolveEditInfo.ts"],"sourcesContent":["/** @alpha */\nexport type KeyedSegment = {_key: string}\n\n/** @alpha */\nexport type IndexTuple = [number | '', number | '']\n\n/** @alpha */\nexport type PathSegment = string | number | KeyedSegment | IndexTuple\n\n/** @alpha */\nexport type Path = PathSegment[]\n\nconst rePropName =\n  /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g\n/** @internal */\nexport const reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/\nconst reIndexTuple = /^\\d*:\\d*$/\n\n/** @internal */\nexport function isIndexSegment(segment: PathSegment): segment is number {\n  return typeof segment === 'number' || (typeof segment === 'string' && /^\\[\\d+\\]$/.test(segment))\n}\n\n/** @internal */\nexport function isKeySegment(segment: PathSegment): segment is KeyedSegment {\n  if (typeof segment === 'string') {\n    return reKeySegment.test(segment.trim())\n  }\n\n  return typeof segment === 'object' && '_key' in segment\n}\n\n/** @internal */\nexport function isIndexTuple(segment: PathSegment): segment is IndexTuple {\n  if (typeof segment === 'string' && reIndexTuple.test(segment)) {\n    return true\n  }\n\n  if (!Array.isArray(segment) || segment.length !== 2) {\n    return false\n  }\n\n  const [from, to] = segment\n  return (typeof from === 'number' || from === '') && (typeof to === 'number' || to === '')\n}\n\n/** @internal */\nexport function get<Result = unknown, Fallback = unknown>(\n  obj: unknown,\n  path: Path | string,\n  defaultVal?: Fallback,\n): Result | typeof defaultVal {\n  const select = typeof path === 'string' ? fromString(path) : path\n  if (!Array.isArray(select)) {\n    throw new Error('Path must be an array or a string')\n  }\n\n  let acc: unknown | undefined = obj\n  for (let i = 0; i < select.length; i++) {\n    const segment = select[i]\n    if (isIndexSegment(segment)) {\n      if (!Array.isArray(acc)) {\n        return defaultVal\n      }\n\n      acc = acc[segment]\n    }\n\n    if (isKeySegment(segment)) {\n      if (!Array.isArray(acc)) {\n        return defaultVal\n      }\n\n      acc = acc.find((item) => item._key === segment._key)\n    }\n\n    if (typeof segment === 'string') {\n      acc =\n        typeof acc === 'object' && acc !== null\n          ? ((acc as Record<string, unknown>)[segment] as Result)\n          : undefined\n    }\n\n    if (typeof acc === 'undefined') {\n      return defaultVal\n    }\n  }\n\n  return acc as Result\n}\n\n/** @alpha */\nexport function toString(path: Path): string {\n  if (!Array.isArray(path)) {\n    throw new Error('Path is not an array')\n  }\n\n  return path.reduce<string>((target, segment, i) => {\n    const segmentType = typeof segment\n    if (segmentType === 'number') {\n      return `${target}[${segment}]`\n    }\n\n    if (segmentType === 'string') {\n      const separator = i === 0 ? '' : '.'\n      return `${target}${separator}${segment}`\n    }\n\n    if (isKeySegment(segment) && segment._key) {\n      return `${target}[_key==\"${segment._key}\"]`\n    }\n\n    if (Array.isArray(segment)) {\n      const [from, to] = segment\n      return `${target}[${from}:${to}]`\n    }\n\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``)\n  }, '')\n}\n\n/** @alpha */\nexport function fromString(path: string): Path {\n  if (typeof path !== 'string') {\n    throw new Error('Path is not a string')\n  }\n\n  const segments = path.match(rePropName)\n  if (!segments) {\n    throw new Error('Invalid path string')\n  }\n\n  return segments.map(parsePathSegment)\n}\n\nfunction parsePathSegment(segment: string): PathSegment {\n  if (isIndexSegment(segment)) {\n    return parseIndexSegment(segment)\n  }\n\n  if (isKeySegment(segment)) {\n    return parseKeySegment(segment)\n  }\n\n  if (isIndexTuple(segment)) {\n    return parseIndexTupleSegment(segment)\n  }\n\n  return segment\n}\n\nfunction parseIndexSegment(segment: string): PathSegment {\n  return Number(segment.replace(/[^\\d]/g, ''))\n}\n\nfunction parseKeySegment(segment: string): KeyedSegment {\n  const segments = segment.match(reKeySegment)\n  return {_key: segments![1]}\n}\n\nfunction parseIndexTupleSegment(segment: string): IndexTuple {\n  const [from, to] = segment.split(':').map((seg) => (seg === '' ? seg : Number(seg)))\n  return [from, to]\n}\n","export const DRAFTS_PREFIX = 'drafts.'\n\n/** @internal */\nexport function getPublishedId(id: string): string {\n  if (id.startsWith(DRAFTS_PREFIX)) {\n    return id.slice(DRAFTS_PREFIX.length)\n  }\n\n  return id\n}\n","import * as studioPath from './studioPath'\nimport type {\n  ContentSourceMapParsedPath,\n  ContentSourceMapParsedPathKeyedSegment,\n  ContentSourceMapPaths,\n  Path,\n} from './types'\n\nconst ESCAPE: Record<string, string> = {\n  '\\f': '\\\\f',\n  '\\n': '\\\\n',\n  '\\r': '\\\\r',\n  '\\t': '\\\\t',\n  \"'\": \"\\\\'\",\n  '\\\\': '\\\\\\\\',\n}\n\nconst UNESCAPE: Record<string, string> = {\n  '\\\\f': '\\f',\n  '\\\\n': '\\n',\n  '\\\\r': '\\r',\n  '\\\\t': '\\t',\n  \"\\\\'\": \"'\",\n  '\\\\\\\\': '\\\\',\n}\n\n/**\n * @internal\n */\nexport function jsonPath(path: ContentSourceMapParsedPath): ContentSourceMapPaths[number] {\n  return `$${path\n    .map((segment) => {\n      if (typeof segment === 'string') {\n        const escapedKey = segment.replace(/[\\f\\n\\r\\t'\\\\]/g, (match) => {\n          return ESCAPE[match]\n        })\n        return `['${escapedKey}']`\n      }\n\n      if (typeof segment === 'number') {\n        return `[${segment}]`\n      }\n\n      if (segment._key !== '') {\n        const escapedKey = segment._key.replace(/['\\\\]/g, (match) => {\n          return ESCAPE[match]\n        })\n        return `[?(@._key=='${escapedKey}')]`\n      }\n\n      return `[${segment._index}]`\n    })\n    .join('')}`\n}\n\n/**\n * @internal\n */\nexport function parseJsonPath(path: ContentSourceMapPaths[number]): ContentSourceMapParsedPath {\n  const parsed: ContentSourceMapParsedPath = []\n\n  const parseRe = /\\['(.*?)'\\]|\\[(\\d+)\\]|\\[\\?\\(@\\._key=='(.*?)'\\)\\]/g\n  let match: RegExpExecArray | null\n\n  while ((match = parseRe.exec(path)) !== null) {\n    if (match[1] !== undefined) {\n      const key = match[1].replace(/\\\\(\\\\|f|n|r|t|')/g, (m) => {\n        return UNESCAPE[m]\n      })\n\n      parsed.push(key)\n      continue\n    }\n\n    if (match[2] !== undefined) {\n      parsed.push(parseInt(match[2], 10))\n      continue\n    }\n\n    if (match[3] !== undefined) {\n      const _key = match[3].replace(/\\\\(\\\\')/g, (m) => {\n        return UNESCAPE[m]\n      })\n\n      parsed.push({\n        _key,\n        _index: -1,\n      })\n      continue\n    }\n  }\n\n  return parsed\n}\n\n/**\n * @internal\n */\nexport function jsonPathToStudioPath(path: ContentSourceMapParsedPath): Path {\n  return path.map((segment) => {\n    if (typeof segment === 'string') {\n      return segment\n    }\n\n    if (typeof segment === 'number') {\n      return segment\n    }\n\n    if (segment._key !== '') {\n      return {_key: segment._key}\n    }\n\n    if (segment._index !== -1) {\n      return segment._index\n    }\n\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`)\n  })\n}\n\n/**\n * @internal\n */\nexport function studioPathToJsonPath(path: Path | string): ContentSourceMapParsedPath {\n  const parsedPath = typeof path === 'string' ? studioPath.fromString(path) : path\n\n  return parsedPath.map((segment) => {\n    if (typeof segment === 'string') {\n      return segment\n    }\n\n    if (typeof segment === 'number') {\n      return segment\n    }\n\n    if (Array.isArray(segment)) {\n      throw new Error(`IndexTuple segments aren't supported:${JSON.stringify(segment)}`)\n    }\n\n    if (isContentSourceMapParsedPathKeyedSegment(segment)) {\n      return segment\n    }\n\n    if (segment._key) {\n      return {_key: segment._key, _index: -1}\n    }\n\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`)\n  })\n}\n\nfunction isContentSourceMapParsedPathKeyedSegment(\n  segment: studioPath.PathSegment | ContentSourceMapParsedPath[number],\n): segment is ContentSourceMapParsedPathKeyedSegment {\n  return typeof segment === 'object' && '_key' in segment && '_index' in segment\n}\n\n/**\n * @internal\n */\nexport function jsonPathToMappingPath(path: ContentSourceMapParsedPath): (string | number)[] {\n  return path.map((segment) => {\n    if (typeof segment === 'string') {\n      return segment\n    }\n\n    if (typeof segment === 'number') {\n      return segment\n    }\n\n    if (segment._index !== -1) {\n      return segment._index\n    }\n\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`)\n  })\n}\n","import {jsonPath, jsonPathToMappingPath} from './jsonPath'\nimport type {ContentSourceMap, ContentSourceMapMapping, ContentSourceMapParsedPath} from './types'\n\n/**\n * @internal\n */\nexport function resolveMapping(\n  resultPath: ContentSourceMapParsedPath,\n  csm?: ContentSourceMap,\n):\n  | {\n      mapping: ContentSourceMapMapping\n      matchedPath: string\n      pathSuffix: string\n    }\n  | undefined {\n  if (!csm?.mappings) {\n    return undefined\n  }\n  const resultMappingPath = jsonPath(jsonPathToMappingPath(resultPath))\n\n  if (csm.mappings[resultMappingPath] !== undefined) {\n    return {\n      mapping: csm.mappings[resultMappingPath],\n      matchedPath: resultMappingPath,\n      pathSuffix: '',\n    }\n  }\n\n  const mappings = Object.entries(csm.mappings)\n    .filter(([key]) => resultMappingPath.startsWith(key))\n    .sort(([key1], [key2]) => key2.length - key1.length)\n\n  if (mappings.length == 0) {\n    return undefined\n  }\n\n  const [matchedPath, mapping] = mappings[0]\n  const pathSuffix = resultMappingPath.substring(matchedPath.length)\n  return {mapping, matchedPath, pathSuffix}\n}\n","/** @internal */\nexport function isArray(value: unknown): value is Array<unknown> {\n  return value !== null && Array.isArray(value)\n}\n","/** @internal */\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return typeof value === 'object' && value !== null\n}\n","import {isArray} from './isArray'\nimport {isRecord} from './isRecord'\nimport type {ContentSourceMapParsedPath, WalkMapFn} from './types'\n\n/**\n * generic way to walk a nested object or array and apply a mapping function to each value\n * @internal\n */\nexport function walkMap(\n  value: unknown,\n  mappingFn: WalkMapFn,\n  path: ContentSourceMapParsedPath = [],\n): unknown {\n  if (isArray(value)) {\n    return value.map((v, idx) => {\n      if (isRecord(v)) {\n        const _key = v['_key']\n        if (typeof _key === 'string') {\n          return walkMap(v, mappingFn, path.concat({_key, _index: idx}))\n        }\n      }\n\n      return walkMap(v, mappingFn, path.concat(idx))\n    })\n  }\n\n  if (isRecord(value)) {\n    // Handle Portable Text in a faster way\n    if (value._type === 'block' || value._type === 'span') {\n      const result = {...value}\n      if (value._type === 'block') {\n        result.children = walkMap(value.children, mappingFn, path.concat('children'))\n      } else if (value._type === 'span') {\n        result.text = walkMap(value.text, mappingFn, path.concat('text'))\n      }\n      return result\n    }\n\n    return Object.fromEntries(\n      Object.entries(value).map(([k, v]) => [k, walkMap(v, mappingFn, path.concat(k))]),\n    )\n  }\n\n  return mappingFn(value, path)\n}\n","import {DRAFTS_PREFIX, getPublishedId} from './getPublishedId'\nimport {jsonPathToStudioPath} from './jsonPath'\nimport * as studioPath from './studioPath'\nimport type {CreateEditUrlOptions, EditIntentUrl, StudioBaseUrl} from './types'\n\n/** @internal */\nexport function createEditUrl(options: CreateEditUrlOptions): `${StudioBaseUrl}${EditIntentUrl}` {\n  const {\n    baseUrl,\n    workspace: _workspace = 'default',\n    tool: _tool = 'default',\n    id: _id,\n    type,\n    path,\n    projectId,\n    dataset,\n  } = options\n\n  if (!baseUrl) {\n    throw new Error('baseUrl is required')\n  }\n  if (!path) {\n    throw new Error('path is required')\n  }\n  if (!_id) {\n    throw new Error('id is required')\n  }\n  if (baseUrl !== '/' && baseUrl.endsWith('/')) {\n    throw new Error('baseUrl must not end with a slash')\n  }\n\n  const workspace = _workspace === 'default' ? undefined : _workspace\n  const tool = _tool === 'default' ? undefined : _tool\n  const id = getPublishedId(_id)\n  const stringifiedPath = Array.isArray(path)\n    ? studioPath.toString(jsonPathToStudioPath(path))\n    : path\n\n  // eslint-disable-next-line no-warning-comments\n  // @TODO Using searchParams as a temporary workaround until `@sanity/overlays` can decode state from the path reliably\n  const searchParams = new URLSearchParams({\n    baseUrl,\n    id,\n    type,\n    path: stringifiedPath,\n  })\n  if (workspace) {\n    searchParams.set('workspace', workspace)\n  }\n  if (tool) {\n    searchParams.set('tool', tool)\n  }\n  if (projectId) {\n    searchParams.set('projectId', projectId)\n  }\n  if (dataset) {\n    searchParams.set('dataset', dataset)\n  }\n  if (_id.startsWith(DRAFTS_PREFIX)) {\n    searchParams.set('isDraft', '')\n  }\n\n  const segments = [baseUrl === '/' ? '' : baseUrl]\n  if (workspace) {\n    segments.push(workspace)\n  }\n  const routerParams = [\n    'mode=presentation',\n    `id=${id}`,\n    `type=${type}`,\n    `path=${encodeURIComponent(stringifiedPath)}`,\n  ]\n  if (tool) {\n    routerParams.push(`tool=${tool}`)\n  }\n  segments.push('intent', 'edit', `${routerParams.join(';')}?${searchParams}`)\n  return segments.join('/') as unknown as `${StudioBaseUrl}${EditIntentUrl}`\n}\n","import {parseJsonPath} from './jsonPath'\nimport {resolveMapping} from './resolveMapping'\nimport type {\n  CreateEditUrlOptions,\n  ResolveEditInfoOptions,\n  StudioBaseRoute,\n  StudioBaseUrl,\n  StudioUrl,\n} from './types'\n\n/** @internal */\nexport function resolveEditInfo(options: ResolveEditInfoOptions): CreateEditUrlOptions | undefined {\n  const {resultSourceMap: csm, resultPath} = options\n  const {mapping, pathSuffix} = resolveMapping(resultPath, csm) || {}\n\n  if (!mapping) {\n    // console.warn('no mapping for path', { path: resultPath, sourceMap: csm })\n    return undefined\n  }\n\n  if (mapping.source.type === 'literal') {\n    return undefined\n  }\n\n  if (mapping.source.type === 'unknown') {\n    return undefined\n  }\n\n  const sourceDoc = csm.documents[mapping.source.document]\n  const sourcePath = csm.paths[mapping.source.path]\n\n  if (sourceDoc && sourcePath) {\n    const {baseUrl, workspace, tool} = resolveStudioBaseRoute(\n      typeof options.studioUrl === 'function' ? options.studioUrl(sourceDoc) : options.studioUrl,\n    )\n    if (!baseUrl) return undefined\n    const {_id, _type, _projectId, _dataset} = sourceDoc\n    return {\n      baseUrl,\n      workspace,\n      tool,\n      id: _id,\n      type: _type,\n      path: parseJsonPath(sourcePath + pathSuffix),\n      projectId: _projectId,\n      dataset: _dataset,\n    } satisfies CreateEditUrlOptions\n  }\n\n  return undefined\n}\n\n/** @internal */\nexport function resolveStudioBaseRoute(studioUrl: StudioUrl): StudioBaseRoute {\n  let baseUrl: StudioBaseUrl = typeof studioUrl === 'string' ? studioUrl : studioUrl.baseUrl\n  if (baseUrl !== '/') {\n    baseUrl = baseUrl.replace(/\\/$/, '')\n  }\n  if (typeof studioUrl === 'string') {\n    return {baseUrl}\n  }\n  return {...studioUrl, baseUrl}\n}\n"],"names":["studioPath.fromString","studioPath.toString"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8]}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_freeGlobal.js"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n"],"names":[],"mappings":"AAAA,gDAAgD,GAChD,IAAI,aAAa,OAAO,UAAU,YAAY,UAAU,OAAO,MAAM,KAAK,UAAU;AAEpF,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_root.js"],"sourcesContent":["var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,iCAAiC,GACjC,IAAI,WAAW,OAAO,QAAQ,YAAY,QAAQ,KAAK,MAAM,KAAK,UAAU;AAE5E,8CAA8C,GAC9C,IAAI,OAAO,cAAc,YAAY,SAAS;AAE9C,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Symbol.js"],"sourcesContent":["var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,+BAA+B,GAC/B,IAAI,SAAS,KAAK,MAAM;AAExB,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getRawTag.js"],"sourcesContent":["var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;CAIC,GACD,IAAI,uBAAuB,YAAY,QAAQ;AAE/C,+BAA+B,GAC/B,IAAI,iBAAiB,SAAS,OAAO,WAAW,GAAG;AAEnD;;;;;;CAMC,GACD,SAAS,UAAU,KAAK;IACtB,IAAI,QAAQ,eAAe,IAAI,CAAC,OAAO,iBACnC,MAAM,KAAK,CAAC,eAAe;IAE/B,IAAI;QACF,KAAK,CAAC,eAAe,GAAG;QACxB,IAAI,WAAW;IACjB,EAAE,OAAO,GAAG,CAAC;IAEb,IAAI,SAAS,qBAAqB,IAAI,CAAC;IACvC,wCAAc;QACZ,IAAI,OAAO;YACT,KAAK,CAAC,eAAe,GAAG;QAC1B,OAAO;YACL,OAAO,KAAK,CAAC,eAAe;QAC9B;IACF;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_objectToString.js"],"sourcesContent":["/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n"],"names":[],"mappings":"AAAA,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC;;;;CAIC,GACD,IAAI,uBAAuB,YAAY,QAAQ;AAE/C;;;;;;CAMC,GACD,SAAS,eAAe,KAAK;IAC3B,OAAO,qBAAqB,IAAI,CAAC;AACnC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseGetTag.js"],"sourcesContent":["var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n"],"names":[],"mappings":"AAAA,IAAI,mGACA,yGACA;AAEJ,yCAAyC,GACzC,IAAI,UAAU,iBACV,eAAe;AAEnB,+BAA+B,GAC/B,IAAI,iBAAiB,SAAS,OAAO,WAAW,GAAG;AAEnD;;;;;;CAMC,GACD,SAAS,WAAW,KAAK;IACvB,IAAI,SAAS,MAAM;QACjB,OAAO,UAAU,YAAY,eAAe;IAC9C;IACA,OAAO,AAAC,kBAAkB,kBAAkB,OAAO,SAC/C,UAAU,SACV,eAAe;AACrB;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 529, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isObject.js"],"sourcesContent":["/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;CAwBC,GACD,SAAS,SAAS,KAAK;IACrB,IAAI,OAAO,OAAO;IAClB,OAAO,SAAS,QAAQ,CAAC,QAAQ,YAAY,QAAQ,UAAU;AACjE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isFunction.js"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n"],"names":[],"mappings":"AAAA,IAAI,2GACA;AAEJ,yCAAyC,GACzC,IAAI,WAAW,0BACX,UAAU,qBACV,SAAS,8BACT,WAAW;AAEf;;;;;;;;;;;;;;;;CAgBC,GACD,SAAS,WAAW,KAAK;IACvB,IAAI,CAAC,SAAS,QAAQ;QACpB,OAAO;IACT;IACA,wEAAwE;IACxE,8EAA8E;IAC9E,IAAI,MAAM,WAAW;IACrB,OAAO,OAAO,WAAW,OAAO,UAAU,OAAO,YAAY,OAAO;AACtE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_coreJsData.js"],"sourcesContent":["var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,+CAA+C,GAC/C,IAAI,aAAa,IAAI,CAAC,qBAAqB;AAE3C,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_isMasked.js"],"sourcesContent":["var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,mDAAmD,GACnD,IAAI,aAAc;IAChB,IAAI,MAAM,SAAS,IAAI,CAAC,cAAc,WAAW,IAAI,IAAI,WAAW,IAAI,CAAC,QAAQ,IAAI;IACrF,OAAO,MAAO,mBAAmB,MAAO;AAC1C;AAEA;;;;;;CAMC,GACD,SAAS,SAAS,IAAI;IACpB,OAAO,CAAC,CAAC,cAAe,cAAc;AACxC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_toSource.js"],"sourcesContent":["/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n"],"names":[],"mappings":"AAAA,yCAAyC,GACzC,IAAI,YAAY,SAAS,SAAS;AAElC,wDAAwD,GACxD,IAAI,eAAe,UAAU,QAAQ;AAErC;;;;;;CAMC,GACD,SAAS,SAAS,IAAI;IACpB,IAAI,QAAQ,MAAM;QAChB,IAAI;YACF,OAAO,aAAa,IAAI,CAAC;QAC3B,EAAE,OAAO,GAAG,CAAC;QACb,IAAI;YACF,OAAQ,OAAO;QACjB,EAAE,OAAO,GAAG,CAAC;IACf;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 644, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 649, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIsNative.js"],"sourcesContent":["var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n"],"names":[],"mappings":"AAAA,IAAI,0GACA,uGACA,sGACA;AAEJ;;;CAGC,GACD,IAAI,eAAe;AAEnB,+CAA+C,GAC/C,IAAI,eAAe;AAEnB,yCAAyC,GACzC,IAAI,YAAY,SAAS,SAAS,EAC9B,cAAc,OAAO,SAAS;AAElC,wDAAwD,GACxD,IAAI,eAAe,UAAU,QAAQ;AAErC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C,0CAA0C,GAC1C,IAAI,aAAa,OAAO,MACtB,aAAa,IAAI,CAAC,gBAAgB,OAAO,CAAC,cAAc,QACvD,OAAO,CAAC,0DAA0D,WAAW;AAGhF;;;;;;;CAOC,GACD,SAAS,aAAa,KAAK;IACzB,IAAI,CAAC,SAAS,UAAU,SAAS,QAAQ;QACvC,OAAO;IACT;IACA,IAAI,UAAU,WAAW,SAAS,aAAa;IAC/C,OAAO,QAAQ,IAAI,CAAC,SAAS;AAC/B;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 679, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getValue.js"],"sourcesContent":["/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC,GACD,SAAS,SAAS,MAAM,EAAE,GAAG;IAC3B,OAAO,UAAU,OAAO,YAAY,MAAM,CAAC,IAAI;AACjD;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 690, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 695, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getNative.js"],"sourcesContent":["var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n"],"names":[],"mappings":"AAAA,IAAI,+GACA;AAEJ;;;;;;;CAOC,GACD,SAAS,UAAU,MAAM,EAAE,GAAG;IAC5B,IAAI,QAAQ,SAAS,QAAQ;IAC7B,OAAO,aAAa,SAAS,QAAQ;AACvC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 713, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_defineProperty.js"],"sourcesContent":["var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,IAAI,iBAAkB;IACpB,IAAI;QACF,IAAI,OAAO,UAAU,QAAQ;QAC7B,KAAK,CAAC,GAAG,IAAI,CAAC;QACd,OAAO;IACT,EAAE,OAAO,GAAG,CAAC;AACf;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 722, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 727, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseAssignValue.js"],"sourcesContent":["var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;CAQC,GACD,SAAS,gBAAgB,MAAM,EAAE,GAAG,EAAE,KAAK;IACzC,IAAI,OAAO,eAAe,gBAAgB;QACxC,eAAe,QAAQ,KAAK;YAC1B,gBAAgB;YAChB,cAAc;YACd,SAAS;YACT,YAAY;QACd;IACF,OAAO;QACL,MAAM,CAAC,IAAI,GAAG;IAChB;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 749, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_arrayAggregator.js"],"sourcesContent":["/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC,GACD,SAAS,gBAAgB,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW;IAC3D,IAAI,QAAQ,CAAC,GACT,SAAS,SAAS,OAAO,IAAI,MAAM,MAAM;IAE7C,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,QAAQ,KAAK,CAAC,MAAM;QACxB,OAAO,aAAa,OAAO,SAAS,QAAQ;IAC9C;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_createBaseFor.js"],"sourcesContent":["/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS,cAAc,SAAS;IAC9B,OAAO,SAAS,MAAM,EAAE,QAAQ,EAAE,QAAQ;QACxC,IAAI,QAAQ,CAAC,GACT,WAAW,OAAO,SAClB,QAAQ,SAAS,SACjB,SAAS,MAAM,MAAM;QAEzB,MAAO,SAAU;YACf,IAAI,MAAM,KAAK,CAAC,YAAY,SAAS,EAAE,MAAM;YAC7C,IAAI,SAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,cAAc,OAAO;gBACpD;YACF;QACF;QACA,OAAO;IACT;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 801, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseFor.js"],"sourcesContent":["var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;;;CAUC,GACD,IAAI,UAAU;AAEd,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 814, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseTimes.js"],"sourcesContent":["/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,UAAU,CAAC,EAAE,QAAQ;IAC5B,IAAI,QAAQ,CAAC,GACT,SAAS,MAAM;IAEnB,MAAO,EAAE,QAAQ,EAAG;QAClB,MAAM,CAAC,MAAM,GAAG,SAAS;IAC3B;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 835, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 840, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isObjectLike.js"],"sourcesContent":["/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;CAuBC,GACD,SAAS,aAAa,KAAK;IACzB,OAAO,SAAS,QAAQ,OAAO,SAAS;AAC1C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 867, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 872, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIsArguments.js"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n"],"names":[],"mappings":"AAAA,IAAI,2GACA;AAEJ,yCAAyC,GACzC,IAAI,UAAU;AAEd;;;;;;CAMC,GACD,SAAS,gBAAgB,KAAK;IAC5B,OAAO,aAAa,UAAU,WAAW,UAAU;AACrD;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 889, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isArguments.js"],"sourcesContent":["var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n"],"names":[],"mappings":"AAAA,IAAI,qHACA;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C,+BAA+B,GAC/B,IAAI,uBAAuB,YAAY,oBAAoB;AAE3D;;;;;;;;;;;;;;;;;CAiBC,GACD,IAAI,cAAc,gBAAgB;IAAa,OAAO;AAAW,OAAO,kBAAkB,SAAS,KAAK;IACtG,OAAO,aAAa,UAAU,eAAe,IAAI,CAAC,OAAO,aACvD,CAAC,qBAAqB,IAAI,CAAC,OAAO;AACtC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 916, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 921, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isArray.js"],"sourcesContent":["/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;CAsBC,GACD,IAAI,UAAU,MAAM,OAAO;AAE3B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 945, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 950, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/stubFalse.js"],"sourcesContent":["/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;CAYC,GACD,SAAS;IACP,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 966, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 971, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isBuffer.js"],"sourcesContent":["var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n"],"names":[],"mappings":"AAAA,IAAI,+FACA;AAEJ,oCAAoC,GACpC,IAAI,cAAc,8CAAkB,YAAY,WAAW,CAAC,QAAQ,QAAQ,IAAI;AAEhF,mCAAmC,GACnC,IAAI,aAAa,eAAe,8CAAiB,YAAY,UAAU,CAAC,OAAO,QAAQ,IAAI;AAE3F,4DAA4D,GAC5D,IAAI,gBAAgB,cAAc,WAAW,OAAO,KAAK;AAEzD,+BAA+B,GAC/B,IAAI,SAAS,gBAAgB,KAAK,MAAM,GAAG;AAE3C,sFAAsF,GACtF,IAAI,iBAAiB,SAAS,OAAO,QAAQ,GAAG;AAEhD;;;;;;;;;;;;;;;;CAgBC,GACD,IAAI,WAAW,kBAAkB;AAEjC,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1000, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_isIndex.js"],"sourcesContent":["/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n"],"names":[],"mappings":"AAAA,uDAAuD,GACvD,IAAI,mBAAmB;AAEvB,4CAA4C,GAC5C,IAAI,WAAW;AAEf;;;;;;;CAOC,GACD,SAAS,QAAQ,KAAK,EAAE,MAAM;IAC5B,IAAI,OAAO,OAAO;IAClB,SAAS,UAAU,OAAO,mBAAmB;IAE7C,OAAO,CAAC,CAAC,UACP,CAAC,QAAQ,YACN,QAAQ,YAAY,SAAS,IAAI,CAAC,MAAO,KACvC,QAAQ,CAAC,KAAK,QAAQ,KAAK,KAAK,QAAQ;AACjD;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1015, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1020, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isLength.js"],"sourcesContent":["/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n"],"names":[],"mappings":"AAAA,uDAAuD,GACvD,IAAI,mBAAmB;AAEvB;;;;;;;;;;;;;;;;;;;;;;;;;CAyBC,GACD,SAAS,SAAS,KAAK;IACrB,OAAO,OAAO,SAAS,YACrB,QAAQ,CAAC,KAAK,QAAQ,KAAK,KAAK,SAAS;AAC7C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1050, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIsTypedArray.js"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n"],"names":[],"mappings":"AAAA,IAAI,2GACA,sGACA;AAEJ,yCAAyC,GACzC,IAAI,UAAU,sBACV,WAAW,kBACX,UAAU,oBACV,UAAU,iBACV,WAAW,kBACX,UAAU,qBACV,SAAS,gBACT,YAAY,mBACZ,YAAY,mBACZ,YAAY,mBACZ,SAAS,gBACT,YAAY,mBACZ,aAAa;AAEjB,IAAI,iBAAiB,wBACjB,cAAc,qBACd,aAAa,yBACb,aAAa,yBACb,UAAU,sBACV,WAAW,uBACX,WAAW,uBACX,WAAW,uBACX,kBAAkB,8BAClB,YAAY,wBACZ,YAAY;AAEhB,2DAA2D,GAC3D,IAAI,iBAAiB,CAAC;AACtB,cAAc,CAAC,WAAW,GAAG,cAAc,CAAC,WAAW,GACvD,cAAc,CAAC,QAAQ,GAAG,cAAc,CAAC,SAAS,GAClD,cAAc,CAAC,SAAS,GAAG,cAAc,CAAC,SAAS,GACnD,cAAc,CAAC,gBAAgB,GAAG,cAAc,CAAC,UAAU,GAC3D,cAAc,CAAC,UAAU,GAAG;AAC5B,cAAc,CAAC,QAAQ,GAAG,cAAc,CAAC,SAAS,GAClD,cAAc,CAAC,eAAe,GAAG,cAAc,CAAC,QAAQ,GACxD,cAAc,CAAC,YAAY,GAAG,cAAc,CAAC,QAAQ,GACrD,cAAc,CAAC,SAAS,GAAG,cAAc,CAAC,QAAQ,GAClD,cAAc,CAAC,OAAO,GAAG,cAAc,CAAC,UAAU,GAClD,cAAc,CAAC,UAAU,GAAG,cAAc,CAAC,UAAU,GACrD,cAAc,CAAC,OAAO,GAAG,cAAc,CAAC,UAAU,GAClD,cAAc,CAAC,WAAW,GAAG;AAE7B;;;;;;CAMC,GACD,SAAS,iBAAiB,KAAK;IAC7B,OAAO,aAAa,UAClB,SAAS,MAAM,MAAM,KAAK,CAAC,CAAC,cAAc,CAAC,WAAW,OAAO;AACjE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1071, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseUnary.js"],"sourcesContent":["/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS,UAAU,IAAI;IACrB,OAAO,SAAS,KAAK;QACnB,OAAO,KAAK;IACd;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1088, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1093, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_nodeUtil.js"],"sourcesContent":["var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,oCAAoC,GACpC,IAAI,cAAc,8CAAkB,YAAY,WAAW,CAAC,QAAQ,QAAQ,IAAI;AAEhF,mCAAmC,GACnC,IAAI,aAAa,eAAe,8CAAiB,YAAY,UAAU,CAAC,OAAO,QAAQ,IAAI;AAE3F,4DAA4D,GAC5D,IAAI,gBAAgB,cAAc,WAAW,OAAO,KAAK;AAEzD,iDAAiD,GACjD,IAAI,cAAc,iBAAiB,WAAW,OAAO;AAErD,2CAA2C,GAC3C,IAAI,WAAY;IACd,IAAI;QACF,oCAAoC;QACpC,IAAI,QAAQ,cAAc,WAAW,OAAO,IAAI,WAAW,OAAO,CAAC,QAAQ,KAAK;QAEhF,IAAI,OAAO;YACT,OAAO;QACT;QAEA,qDAAqD;QACrD,OAAO,eAAe,YAAY,OAAO,IAAI,YAAY,OAAO,CAAC;IACnE,EAAE,OAAO,GAAG,CAAC;AACf;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1115, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isTypedArray.js"],"sourcesContent":["var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n"],"names":[],"mappings":"AAAA,IAAI,uHACA,yGACA;AAEJ,8BAA8B,GAC9B,IAAI,mBAAmB,YAAY,SAAS,YAAY;AAExD;;;;;;;;;;;;;;;;CAgBC,GACD,IAAI,eAAe,mBAAmB,UAAU,oBAAoB;AAEpE,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1135, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1140, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_arrayLikeKeys.js"],"sourcesContent":["var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA,4GACA,oGACA,sGACA,qGACA;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;;CAOC,GACD,SAAS,cAAc,KAAK,EAAE,SAAS;IACrC,IAAI,QAAQ,QAAQ,QAChB,QAAQ,CAAC,SAAS,YAAY,QAC9B,SAAS,CAAC,SAAS,CAAC,SAAS,SAAS,QACtC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,aAAa,QACrD,cAAc,SAAS,SAAS,UAAU,QAC1C,SAAS,cAAc,UAAU,MAAM,MAAM,EAAE,UAAU,EAAE,EAC3D,SAAS,OAAO,MAAM;IAE1B,IAAK,IAAI,OAAO,MAAO;QACrB,IAAI,CAAC,aAAa,eAAe,IAAI,CAAC,OAAO,IAAI,KAC7C,CAAC,CAAC,eAAe,CACd,6DAA6D;QAC7D,OAAO,YAEN,UAAU,CAAC,OAAO,YAAY,OAAO,QAAQ,KAE7C,UAAU,CAAC,OAAO,YAAY,OAAO,gBAAgB,OAAO,YAAY,KACzE,yBAAyB;QACzB,QAAQ,KAAK,OAChB,CAAC,GAAG;YACN,OAAO,IAAI,CAAC;QACd;IACF;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1162, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1167, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_isPrototype.js"],"sourcesContent":["/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n"],"names":[],"mappings":"AAAA,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC;;;;;;CAMC,GACD,SAAS,YAAY,KAAK;IACxB,IAAI,OAAO,SAAS,MAAM,WAAW,EACjC,QAAQ,AAAC,OAAO,QAAQ,cAAc,KAAK,SAAS,IAAK;IAE7D,OAAO,UAAU;AACnB;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1179, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1184, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_overArg.js"],"sourcesContent":["/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC,GACD,SAAS,QAAQ,IAAI,EAAE,SAAS;IAC9B,OAAO,SAAS,GAAG;QACjB,OAAO,KAAK,UAAU;IACxB;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1202, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_nativeKeys.js"],"sourcesContent":["var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,sFAAsF,GACtF,IAAI,aAAa,QAAQ,OAAO,IAAI,EAAE;AAEtC,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1205, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1210, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseKeys.js"],"sourcesContent":["var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n"],"names":[],"mappings":"AAAA,IAAI,6GACA;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;CAMC,GACD,SAAS,SAAS,MAAM;IACtB,IAAI,CAAC,YAAY,SAAS;QACxB,OAAO,WAAW;IACpB;IACA,IAAI,SAAS,EAAE;IACf,IAAK,IAAI,OAAO,OAAO,QAAS;QAC9B,IAAI,eAAe,IAAI,CAAC,QAAQ,QAAQ,OAAO,eAAe;YAC5D,OAAO,IAAI,CAAC;QACd;IACF;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1232, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1237, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isArrayLike.js"],"sourcesContent":["var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n"],"names":[],"mappings":"AAAA,IAAI,0GACA;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;CAwBC,GACD,SAAS,YAAY,KAAK;IACxB,OAAO,SAAS,QAAQ,SAAS,MAAM,MAAM,KAAK,CAAC,WAAW;AAChE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1266, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1271, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/keys.js"],"sourcesContent":["var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n"],"names":[],"mappings":"AAAA,IAAI,iHACA,uGACA;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2BC,GACD,SAAS,KAAK,MAAM;IAClB,OAAO,YAAY,UAAU,cAAc,UAAU,SAAS;AAChE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1303, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1308, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseForOwn.js"],"sourcesContent":["var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n"],"names":[],"mappings":"AAAA,IAAI,qGACA;AAEJ;;;;;;;CAOC,GACD,SAAS,WAAW,MAAM,EAAE,QAAQ;IAClC,OAAO,UAAU,QAAQ,QAAQ,UAAU;AAC7C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1320, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1325, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_createBaseEach.js"],"sourcesContent":["var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;CAOC,GACD,SAAS,eAAe,QAAQ,EAAE,SAAS;IACzC,OAAO,SAAS,UAAU,EAAE,QAAQ;QAClC,IAAI,cAAc,MAAM;YACtB,OAAO;QACT;QACA,IAAI,CAAC,YAAY,aAAa;YAC5B,OAAO,SAAS,YAAY;QAC9B;QACA,IAAI,SAAS,WAAW,MAAM,EAC1B,QAAQ,YAAY,SAAS,CAAC,GAC9B,WAAW,OAAO;QAEtB,MAAQ,YAAY,UAAU,EAAE,QAAQ,OAAS;YAC/C,IAAI,SAAS,QAAQ,CAAC,MAAM,EAAE,OAAO,cAAc,OAAO;gBACxD;YACF;QACF;QACA,OAAO;IACT;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1351, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1356, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseEach.js"],"sourcesContent":["var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n"],"names":[],"mappings":"AAAA,IAAI,2GACA;AAEJ;;;;;;;CAOC,GACD,IAAI,WAAW,eAAe;AAE9B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1371, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseAggregator.js"],"sourcesContent":["var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;;;CAUC,GACD,SAAS,eAAe,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW;IAC/D,SAAS,YAAY,SAAS,KAAK,EAAE,GAAG,EAAE,UAAU;QAClD,OAAO,aAAa,OAAO,SAAS,QAAQ;IAC9C;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1394, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_listCacheClear.js"],"sourcesContent":["/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS;IACP,IAAI,CAAC,QAAQ,GAAG,EAAE;IAClB,IAAI,CAAC,IAAI,GAAG;AACd;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1405, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1410, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/eq.js"],"sourcesContent":["/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA+BC,GACD,SAAS,GAAG,KAAK,EAAE,KAAK;IACtB,OAAO,UAAU,SAAU,UAAU,SAAS,UAAU;AAC1D;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1445, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1450, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_assocIndexOf.js"],"sourcesContent":["var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;CAOC,GACD,SAAS,aAAa,KAAK,EAAE,GAAG;IAC9B,IAAI,SAAS,MAAM,MAAM;IACzB,MAAO,SAAU;QACf,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,MAAM;YAC7B,OAAO;QACT;IACF;IACA,OAAO,CAAC;AACV;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1468, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1473, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_listCacheDelete.js"],"sourcesContent":["var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,yCAAyC,GACzC,IAAI,aAAa,MAAM,SAAS;AAEhC,+BAA+B,GAC/B,IAAI,SAAS,WAAW,MAAM;AAE9B;;;;;;;;CAQC,GACD,SAAS,gBAAgB,GAAG;IAC1B,IAAI,OAAO,IAAI,CAAC,QAAQ,EACpB,QAAQ,aAAa,MAAM;IAE/B,IAAI,QAAQ,GAAG;QACb,OAAO;IACT;IACA,IAAI,YAAY,KAAK,MAAM,GAAG;IAC9B,IAAI,SAAS,WAAW;QACtB,KAAK,GAAG;IACV,OAAO;QACL,OAAO,IAAI,CAAC,MAAM,OAAO;IAC3B;IACA,EAAE,IAAI,CAAC,IAAI;IACX,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1499, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1504, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_listCacheGet.js"],"sourcesContent":["var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;CAQC,GACD,SAAS,aAAa,GAAG;IACvB,IAAI,OAAO,IAAI,CAAC,QAAQ,EACpB,QAAQ,aAAa,MAAM;IAE/B,OAAO,QAAQ,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,EAAE;AAC/C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1518, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1523, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_listCacheHas.js"],"sourcesContent":["var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;CAQC,GACD,SAAS,aAAa,GAAG;IACvB,OAAO,aAAa,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC;AAC7C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1536, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1541, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_listCacheSet.js"],"sourcesContent":["var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;;CASC,GACD,SAAS,aAAa,GAAG,EAAE,KAAK;IAC9B,IAAI,OAAO,IAAI,CAAC,QAAQ,EACpB,QAAQ,aAAa,MAAM;IAE/B,IAAI,QAAQ,GAAG;QACb,EAAE,IAAI,CAAC,IAAI;QACX,KAAK,IAAI,CAAC;YAAC;YAAK;SAAM;IACxB,OAAO;QACL,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG;IACnB;IACA,OAAO,IAAI;AACb;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1565, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1570, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_ListCache.js"],"sourcesContent":["var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n"],"names":[],"mappings":"AAAA,IAAI,mHACA,qHACA,+GACA,+GACA;AAEJ;;;;;;CAMC,GACD,SAAS,UAAU,OAAO;IACxB,IAAI,QAAQ,CAAC,GACT,SAAS,WAAW,OAAO,IAAI,QAAQ,MAAM;IAEjD,IAAI,CAAC,KAAK;IACV,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,QAAQ,OAAO,CAAC,MAAM;QAC1B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE;IAC7B;AACF;AAEA,8BAA8B;AAC9B,UAAU,SAAS,CAAC,KAAK,GAAG;AAC5B,UAAU,SAAS,CAAC,SAAS,GAAG;AAChC,UAAU,SAAS,CAAC,GAAG,GAAG;AAC1B,UAAU,SAAS,CAAC,GAAG,GAAG;AAC1B,UAAU,SAAS,CAAC,GAAG,GAAG;AAE1B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1592, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1597, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_stackClear.js"],"sourcesContent":["var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;CAMC,GACD,SAAS;IACP,IAAI,CAAC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAAC,IAAI,GAAG;AACd;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1609, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1614, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_stackDelete.js"],"sourcesContent":["/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,YAAY,GAAG;IACtB,IAAI,OAAO,IAAI,CAAC,QAAQ,EACpB,SAAS,IAAI,CAAC,SAAS,CAAC;IAE5B,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;IACrB,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1628, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1633, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_stackGet.js"],"sourcesContent":["/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,SAAS,GAAG;IACnB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;AAC3B;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1645, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1650, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_stackHas.js"],"sourcesContent":["/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,SAAS,GAAG;IACnB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;AAC3B;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1662, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1667, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Map.js"],"sourcesContent":["var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ,8DAA8D,GAC9D,IAAI,MAAM,UAAU,MAAM;AAE1B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1670, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1675, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_nativeCreate.js"],"sourcesContent":["var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,8DAA8D,GAC9D,IAAI,eAAe,UAAU,QAAQ;AAErC,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1678, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1683, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_hashClear.js"],"sourcesContent":["var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;CAMC,GACD,SAAS;IACP,IAAI,CAAC,QAAQ,GAAG,eAAe,aAAa,QAAQ,CAAC;IACrD,IAAI,CAAC,IAAI,GAAG;AACd;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1695, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1700, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_hashDelete.js"],"sourcesContent":["/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC,GACD,SAAS,WAAW,GAAG;IACrB,IAAI,SAAS,IAAI,CAAC,GAAG,CAAC,QAAQ,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI;IACvD,IAAI,CAAC,IAAI,IAAI,SAAS,IAAI;IAC1B,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1715, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1720, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_hashGet.js"],"sourcesContent":["var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,kDAAkD,GAClD,IAAI,iBAAiB;AAErB,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;;;CAQC,GACD,SAAS,QAAQ,GAAG;IAClB,IAAI,OAAO,IAAI,CAAC,QAAQ;IACxB,IAAI,cAAc;QAChB,IAAI,SAAS,IAAI,CAAC,IAAI;QACtB,OAAO,WAAW,iBAAiB,YAAY;IACjD;IACA,OAAO,eAAe,IAAI,CAAC,MAAM,OAAO,IAAI,CAAC,IAAI,GAAG;AACtD;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1741, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1746, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_hashHas.js"],"sourcesContent":["var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;;;CAQC,GACD,SAAS,QAAQ,GAAG;IAClB,IAAI,OAAO,IAAI,CAAC,QAAQ;IACxB,OAAO,eAAgB,IAAI,CAAC,IAAI,KAAK,YAAa,eAAe,IAAI,CAAC,MAAM;AAC9E;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1762, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1767, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_hashSet.js"],"sourcesContent":["var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,kDAAkD,GAClD,IAAI,iBAAiB;AAErB;;;;;;;;;CASC,GACD,SAAS,QAAQ,GAAG,EAAE,KAAK;IACzB,IAAI,OAAO,IAAI,CAAC,QAAQ;IACxB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,IAAI;IACjC,IAAI,CAAC,IAAI,GAAG,AAAC,gBAAgB,UAAU,YAAa,iBAAiB;IACrE,OAAO,IAAI;AACb;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1785, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1790, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Hash.js"],"sourcesContent":["var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA,2GACA,qGACA,qGACA;AAEJ;;;;;;CAMC,GACD,SAAS,KAAK,OAAO;IACnB,IAAI,QAAQ,CAAC,GACT,SAAS,WAAW,OAAO,IAAI,QAAQ,MAAM;IAEjD,IAAI,CAAC,KAAK;IACV,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,QAAQ,OAAO,CAAC,MAAM;QAC1B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE;IAC7B;AACF;AAEA,yBAAyB;AACzB,KAAK,SAAS,CAAC,KAAK,GAAG;AACvB,KAAK,SAAS,CAAC,SAAS,GAAG;AAC3B,KAAK,SAAS,CAAC,GAAG,GAAG;AACrB,KAAK,SAAS,CAAC,GAAG,GAAG;AACrB,KAAK,SAAS,CAAC,GAAG,GAAG;AAErB,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1812, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1817, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_mapCacheClear.js"],"sourcesContent":["var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n"],"names":[],"mappings":"AAAA,IAAI,+FACA,yGACA;AAEJ;;;;;;CAMC,GACD,SAAS;IACP,IAAI,CAAC,IAAI,GAAG;IACZ,IAAI,CAAC,QAAQ,GAAG;QACd,QAAQ,IAAI;QACZ,OAAO,IAAI,CAAC,OAAO,SAAS;QAC5B,UAAU,IAAI;IAChB;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1833, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1838, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_isKeyable.js"],"sourcesContent":["/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS,UAAU,KAAK;IACtB,IAAI,OAAO,OAAO;IAClB,OAAO,AAAC,QAAQ,YAAY,QAAQ,YAAY,QAAQ,YAAY,QAAQ,YACvE,UAAU,cACV,UAAU;AACjB;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1849, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1854, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getMapData.js"],"sourcesContent":["var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;CAOC,GACD,SAAS,WAAW,GAAG,EAAE,GAAG;IAC1B,IAAI,OAAO,IAAI,QAAQ;IACvB,OAAO,UAAU,OACb,IAAI,CAAC,OAAO,OAAO,WAAW,WAAW,OAAO,GAChD,KAAK,GAAG;AACd;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1867, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1872, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_mapCacheDelete.js"],"sourcesContent":["var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;CAQC,GACD,SAAS,eAAe,GAAG;IACzB,IAAI,SAAS,WAAW,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;IAC7C,IAAI,CAAC,IAAI,IAAI,SAAS,IAAI;IAC1B,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1887, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1892, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_mapCacheGet.js"],"sourcesContent":["var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;CAQC,GACD,SAAS,YAAY,GAAG;IACtB,OAAO,WAAW,IAAI,EAAE,KAAK,GAAG,CAAC;AACnC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1905, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1910, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_mapCacheHas.js"],"sourcesContent":["var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;CAQC,GACD,SAAS,YAAY,GAAG;IACtB,OAAO,WAAW,IAAI,EAAE,KAAK,GAAG,CAAC;AACnC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1923, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1928, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_mapCacheSet.js"],"sourcesContent":["var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;;CASC,GACD,SAAS,YAAY,GAAG,EAAE,KAAK;IAC7B,IAAI,OAAO,WAAW,IAAI,EAAE,MACxB,OAAO,KAAK,IAAI;IAEpB,KAAK,GAAG,CAAC,KAAK;IACd,IAAI,CAAC,IAAI,IAAI,KAAK,IAAI,IAAI,OAAO,IAAI;IACrC,OAAO,IAAI;AACb;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1945, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1950, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_MapCache.js"],"sourcesContent":["var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n"],"names":[],"mappings":"AAAA,IAAI,iHACA,mHACA,6GACA,6GACA;AAEJ;;;;;;CAMC,GACD,SAAS,SAAS,OAAO;IACvB,IAAI,QAAQ,CAAC,GACT,SAAS,WAAW,OAAO,IAAI,QAAQ,MAAM;IAEjD,IAAI,CAAC,KAAK;IACV,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,QAAQ,OAAO,CAAC,MAAM;QAC1B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE;IAC7B;AACF;AAEA,6BAA6B;AAC7B,SAAS,SAAS,CAAC,KAAK,GAAG;AAC3B,SAAS,SAAS,CAAC,SAAS,GAAG;AAC/B,SAAS,SAAS,CAAC,GAAG,GAAG;AACzB,SAAS,SAAS,CAAC,GAAG,GAAG;AACzB,SAAS,SAAS,CAAC,GAAG,GAAG;AAEzB,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1972, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1977, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_stackSet.js"],"sourcesContent":["var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA,6FACA;AAEJ,0DAA0D,GAC1D,IAAI,mBAAmB;AAEvB;;;;;;;;;CASC,GACD,SAAS,SAAS,GAAG,EAAE,KAAK;IAC1B,IAAI,OAAO,IAAI,CAAC,QAAQ;IACxB,IAAI,gBAAgB,WAAW;QAC7B,IAAI,QAAQ,KAAK,QAAQ;QACzB,IAAI,CAAC,OAAQ,MAAM,MAAM,GAAG,mBAAmB,GAAI;YACjD,MAAM,IAAI,CAAC;gBAAC;gBAAK;aAAM;YACvB,IAAI,CAAC,IAAI,GAAG,EAAE,KAAK,IAAI;YACvB,OAAO,IAAI;QACb;QACA,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS;IACtC;IACA,KAAK,GAAG,CAAC,KAAK;IACd,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;IACrB,OAAO,IAAI;AACb;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2007, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2012, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Stack.js"],"sourcesContent":["var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA,2GACA,6GACA,uGACA,uGACA;AAEJ;;;;;;CAMC,GACD,SAAS,MAAM,OAAO;IACpB,IAAI,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;IACzC,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;AACvB;AAEA,0BAA0B;AAC1B,MAAM,SAAS,CAAC,KAAK,GAAG;AACxB,MAAM,SAAS,CAAC,SAAS,GAAG;AAC5B,MAAM,SAAS,CAAC,GAAG,GAAG;AACtB,MAAM,SAAS,CAAC,GAAG,GAAG;AACtB,MAAM,SAAS,CAAC,GAAG,GAAG;AAEtB,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2030, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2035, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_setCacheAdd.js"],"sourcesContent":["/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n"],"names":[],"mappings":"AAAA,kDAAkD,GAClD,IAAI,iBAAiB;AAErB;;;;;;;;;CASC,GACD,SAAS,YAAY,KAAK;IACxB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO;IACzB,OAAO,IAAI;AACb;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2050, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2055, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_setCacheHas.js"],"sourcesContent":["/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,YAAY,KAAK;IACxB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;AAC3B;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2067, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2072, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_SetCache.js"],"sourcesContent":["var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n"],"names":[],"mappings":"AAAA,IAAI,uGACA,6GACA;AAEJ;;;;;;;CAOC,GACD,SAAS,SAAS,MAAM;IACtB,IAAI,QAAQ,CAAC,GACT,SAAS,UAAU,OAAO,IAAI,OAAO,MAAM;IAE/C,IAAI,CAAC,QAAQ,GAAG,IAAI;IACpB,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;IACxB;AACF;AAEA,6BAA6B;AAC7B,SAAS,SAAS,CAAC,GAAG,GAAG,SAAS,SAAS,CAAC,IAAI,GAAG;AACnD,SAAS,SAAS,CAAC,GAAG,GAAG;AAEzB,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2091, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2096, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_arraySome.js"],"sourcesContent":["/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC,GACD,SAAS,UAAU,KAAK,EAAE,SAAS;IACjC,IAAI,QAAQ,CAAC,GACT,SAAS,SAAS,OAAO,IAAI,MAAM,MAAM;IAE7C,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,UAAU,KAAK,CAAC,MAAM,EAAE,OAAO,QAAQ;YACzC,OAAO;QACT;IACF;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2115, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2120, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_cacheHas.js"],"sourcesContent":["/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC,GACD,SAAS,SAAS,KAAK,EAAE,GAAG;IAC1B,OAAO,MAAM,GAAG,CAAC;AACnB;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2131, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2136, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_equalArrays.js"],"sourcesContent":["var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n"],"names":[],"mappings":"AAAA,IAAI,uGACA,yGACA;AAEJ,oDAAoD,GACpD,IAAI,uBAAuB,GACvB,yBAAyB;AAE7B;;;;;;;;;;;;CAYC,GACD,SAAS,YAAY,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK;IACtE,IAAI,YAAY,UAAU,sBACtB,YAAY,MAAM,MAAM,EACxB,YAAY,MAAM,MAAM;IAE5B,IAAI,aAAa,aAAa,CAAC,CAAC,aAAa,YAAY,SAAS,GAAG;QACnE,OAAO;IACT;IACA,sCAAsC;IACtC,IAAI,aAAa,MAAM,GAAG,CAAC;IAC3B,IAAI,aAAa,MAAM,GAAG,CAAC;IAC3B,IAAI,cAAc,YAAY;QAC5B,OAAO,cAAc,SAAS,cAAc;IAC9C;IACA,IAAI,QAAQ,CAAC,GACT,SAAS,MACT,OAAO,AAAC,UAAU,yBAA0B,IAAI,WAAW;IAE/D,MAAM,GAAG,CAAC,OAAO;IACjB,MAAM,GAAG,CAAC,OAAO;IAEjB,+BAA+B;IAC/B,MAAO,EAAE,QAAQ,UAAW;QAC1B,IAAI,WAAW,KAAK,CAAC,MAAM,EACvB,WAAW,KAAK,CAAC,MAAM;QAE3B,IAAI,YAAY;YACd,IAAI,WAAW,YACX,WAAW,UAAU,UAAU,OAAO,OAAO,OAAO,SACpD,WAAW,UAAU,UAAU,OAAO,OAAO,OAAO;QAC1D;QACA,IAAI,aAAa,WAAW;YAC1B,IAAI,UAAU;gBACZ;YACF;YACA,SAAS;YACT;QACF;QACA,iEAAiE;QACjE,IAAI,MAAM;YACR,IAAI,CAAC,UAAU,OAAO,SAAS,QAAQ,EAAE,QAAQ;gBAC3C,IAAI,CAAC,SAAS,MAAM,aAChB,CAAC,aAAa,YAAY,UAAU,UAAU,UAAU,SAAS,YAAY,MAAM,GAAG;oBACxF,OAAO,KAAK,IAAI,CAAC;gBACnB;YACF,IAAI;gBACN,SAAS;gBACT;YACF;QACF,OAAO,IAAI,CAAC,CACN,aAAa,YACX,UAAU,UAAU,UAAU,SAAS,YAAY,MACvD,GAAG;YACL,SAAS;YACT;QACF;IACF;IACA,KAAK,CAAC,SAAS,CAAC;IAChB,KAAK,CAAC,SAAS,CAAC;IAChB,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2202, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Uint8Array.js"],"sourcesContent":["var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,+BAA+B,GAC/B,IAAI,aAAa,KAAK,UAAU;AAEhC,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2205, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2210, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_mapToArray.js"],"sourcesContent":["/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS,WAAW,GAAG;IACrB,IAAI,QAAQ,CAAC,GACT,SAAS,MAAM,IAAI,IAAI;IAE3B,IAAI,OAAO,CAAC,SAAS,KAAK,EAAE,GAAG;QAC7B,MAAM,CAAC,EAAE,MAAM,GAAG;YAAC;YAAK;SAAM;IAChC;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2227, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2232, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_setToArray.js"],"sourcesContent":["/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS,WAAW,GAAG;IACrB,IAAI,QAAQ,CAAC,GACT,SAAS,MAAM,IAAI,IAAI;IAE3B,IAAI,OAAO,CAAC,SAAS,KAAK;QACxB,MAAM,CAAC,EAAE,MAAM,GAAG;IACpB;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2246, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2251, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_equalByTag.js"],"sourcesContent":["var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n"],"names":[],"mappings":"AAAA,IAAI,mGACA,2GACA,0FACA,6GACA,2GACA;AAEJ,oDAAoD,GACpD,IAAI,uBAAuB,GACvB,yBAAyB;AAE7B,yCAAyC,GACzC,IAAI,UAAU,oBACV,UAAU,iBACV,WAAW,kBACX,SAAS,gBACT,YAAY,mBACZ,YAAY,mBACZ,SAAS,gBACT,YAAY,mBACZ,YAAY;AAEhB,IAAI,iBAAiB,wBACjB,cAAc;AAElB,uDAAuD,GACvD,IAAI,cAAc,SAAS,OAAO,SAAS,GAAG,WAC1C,gBAAgB,cAAc,YAAY,OAAO,GAAG;AAExD;;;;;;;;;;;;;;;;CAgBC,GACD,SAAS,WAAW,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK;IAC3E,OAAQ;QACN,KAAK;YACH,IAAI,AAAC,OAAO,UAAU,IAAI,MAAM,UAAU,IACrC,OAAO,UAAU,IAAI,MAAM,UAAU,EAAG;gBAC3C,OAAO;YACT;YACA,SAAS,OAAO,MAAM;YACtB,QAAQ,MAAM,MAAM;QAEtB,KAAK;YACH,IAAI,AAAC,OAAO,UAAU,IAAI,MAAM,UAAU,IACtC,CAAC,UAAU,IAAI,WAAW,SAAS,IAAI,WAAW,SAAS;gBAC7D,OAAO;YACT;YACA,OAAO;QAET,KAAK;QACL,KAAK;QACL,KAAK;YACH,2DAA2D;YAC3D,sCAAsC;YACtC,OAAO,GAAG,CAAC,QAAQ,CAAC;QAEtB,KAAK;YACH,OAAO,OAAO,IAAI,IAAI,MAAM,IAAI,IAAI,OAAO,OAAO,IAAI,MAAM,OAAO;QAErE,KAAK;QACL,KAAK;YACH,uEAAuE;YACvE,8FAA8F;YAC9F,oBAAoB;YACpB,OAAO,UAAW,QAAQ;QAE5B,KAAK;YACH,IAAI,UAAU;QAEhB,KAAK;YACH,IAAI,YAAY,UAAU;YAC1B,WAAW,CAAC,UAAU,UAAU;YAEhC,IAAI,OAAO,IAAI,IAAI,MAAM,IAAI,IAAI,CAAC,WAAW;gBAC3C,OAAO;YACT;YACA,kCAAkC;YAClC,IAAI,UAAU,MAAM,GAAG,CAAC;YACxB,IAAI,SAAS;gBACX,OAAO,WAAW;YACpB;YACA,WAAW;YAEX,kEAAkE;YAClE,MAAM,GAAG,CAAC,QAAQ;YAClB,IAAI,SAAS,YAAY,QAAQ,SAAS,QAAQ,QAAQ,SAAS,YAAY,WAAW;YAC1F,KAAK,CAAC,SAAS,CAAC;YAChB,OAAO;QAET,KAAK;YACH,IAAI,eAAe;gBACjB,OAAO,cAAc,IAAI,CAAC,WAAW,cAAc,IAAI,CAAC;YAC1D;IACJ;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2326, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2331, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_arrayPush.js"],"sourcesContent":["/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC,GACD,SAAS,UAAU,KAAK,EAAE,MAAM;IAC9B,IAAI,QAAQ,CAAC,GACT,SAAS,OAAO,MAAM,EACtB,SAAS,MAAM,MAAM;IAEzB,MAAO,EAAE,QAAQ,OAAQ;QACvB,KAAK,CAAC,SAAS,MAAM,GAAG,MAAM,CAAC,MAAM;IACvC;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2346, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2351, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseGetAllKeys.js"],"sourcesContent":["var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ;;;;;;;;;;CAUC,GACD,SAAS,eAAe,MAAM,EAAE,QAAQ,EAAE,WAAW;IACnD,IAAI,SAAS,SAAS;IACtB,OAAO,QAAQ,UAAU,SAAS,UAAU,QAAQ,YAAY;AAClE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2367, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2372, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_arrayFilter.js"],"sourcesContent":["/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,YAAY,KAAK,EAAE,SAAS;IACnC,IAAI,QAAQ,CAAC,GACT,SAAS,SAAS,OAAO,IAAI,MAAM,MAAM,EACzC,WAAW,GACX,SAAS,EAAE;IAEf,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,QAAQ,KAAK,CAAC,MAAM;QACxB,IAAI,UAAU,OAAO,OAAO,QAAQ;YAClC,MAAM,CAAC,WAAW,GAAG;QACvB;IACF;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2391, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2396, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/stubArray.js"],"sourcesContent":["/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;CAiBC,GACD,SAAS;IACP,OAAO,EAAE;AACX;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2417, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2422, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getSymbols.js"],"sourcesContent":["var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n"],"names":[],"mappings":"AAAA,IAAI,6GACA;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,+BAA+B,GAC/B,IAAI,uBAAuB,YAAY,oBAAoB;AAE3D,sFAAsF,GACtF,IAAI,mBAAmB,OAAO,qBAAqB;AAEnD;;;;;;CAMC,GACD,IAAI,aAAa,CAAC,mBAAmB,YAAY,SAAS,MAAM;IAC9D,IAAI,UAAU,MAAM;QAClB,OAAO,EAAE;IACX;IACA,SAAS,OAAO;IAChB,OAAO,YAAY,iBAAiB,SAAS,SAAS,MAAM;QAC1D,OAAO,qBAAqB,IAAI,CAAC,QAAQ;IAC3C;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2442, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2447, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getAllKeys.js"],"sourcesContent":["var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n"],"names":[],"mappings":"AAAA,IAAI,mHACA,2GACA;AAEJ;;;;;;CAMC,GACD,SAAS,WAAW,MAAM;IACxB,OAAO,eAAe,QAAQ,MAAM;AACtC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2458, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2463, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_equalObjects.js"],"sourcesContent":["var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,oDAAoD,GACpD,IAAI,uBAAuB;AAE3B,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;;;;;;;CAYC,GACD,SAAS,aAAa,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK;IACxE,IAAI,YAAY,UAAU,sBACtB,WAAW,WAAW,SACtB,YAAY,SAAS,MAAM,EAC3B,WAAW,WAAW,QACtB,YAAY,SAAS,MAAM;IAE/B,IAAI,aAAa,aAAa,CAAC,WAAW;QACxC,OAAO;IACT;IACA,IAAI,QAAQ;IACZ,MAAO,QAAS;QACd,IAAI,MAAM,QAAQ,CAAC,MAAM;QACzB,IAAI,CAAC,CAAC,YAAY,OAAO,QAAQ,eAAe,IAAI,CAAC,OAAO,IAAI,GAAG;YACjE,OAAO;QACT;IACF;IACA,sCAAsC;IACtC,IAAI,aAAa,MAAM,GAAG,CAAC;IAC3B,IAAI,aAAa,MAAM,GAAG,CAAC;IAC3B,IAAI,cAAc,YAAY;QAC5B,OAAO,cAAc,SAAS,cAAc;IAC9C;IACA,IAAI,SAAS;IACb,MAAM,GAAG,CAAC,QAAQ;IAClB,MAAM,GAAG,CAAC,OAAO;IAEjB,IAAI,WAAW;IACf,MAAO,EAAE,QAAQ,UAAW;QAC1B,MAAM,QAAQ,CAAC,MAAM;QACrB,IAAI,WAAW,MAAM,CAAC,IAAI,EACtB,WAAW,KAAK,CAAC,IAAI;QAEzB,IAAI,YAAY;YACd,IAAI,WAAW,YACX,WAAW,UAAU,UAAU,KAAK,OAAO,QAAQ,SACnD,WAAW,UAAU,UAAU,KAAK,QAAQ,OAAO;QACzD;QACA,kEAAkE;QAClE,IAAI,CAAC,CAAC,aAAa,YACV,aAAa,YAAY,UAAU,UAAU,UAAU,SAAS,YAAY,SAC7E,QACJ,GAAG;YACL,SAAS;YACT;QACF;QACA,YAAY,CAAC,WAAW,OAAO,aAAa;IAC9C;IACA,IAAI,UAAU,CAAC,UAAU;QACvB,IAAI,UAAU,OAAO,WAAW,EAC5B,UAAU,MAAM,WAAW;QAE/B,2EAA2E;QAC3E,IAAI,WAAW,WACV,iBAAiB,UAAU,iBAAiB,SAC7C,CAAC,CAAC,OAAO,WAAW,cAAc,mBAAmB,WACnD,OAAO,WAAW,cAAc,mBAAmB,OAAO,GAAG;YACjE,SAAS;QACX;IACF;IACA,KAAK,CAAC,SAAS,CAAC;IAChB,KAAK,CAAC,SAAS,CAAC;IAChB,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2526, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2531, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_DataView.js"],"sourcesContent":["var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ,8DAA8D,GAC9D,IAAI,WAAW,UAAU,MAAM;AAE/B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2534, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2539, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Promise.js"],"sourcesContent":["var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ,8DAA8D,GAC9D,IAAI,UAAU,UAAU,MAAM;AAE9B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2547, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_Set.js"],"sourcesContent":["var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ,8DAA8D,GAC9D,IAAI,MAAM,UAAU,MAAM;AAE1B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2550, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2555, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_WeakMap.js"],"sourcesContent":["var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ,8DAA8D,GAC9D,IAAI,UAAU,UAAU,MAAM;AAE9B,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2558, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2563, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getTag.js"],"sourcesContent":["var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n"],"names":[],"mappings":"AAAA,IAAI,uGACA,6FACA,qGACA,6FACA,qGACA,2GACA;AAEJ,yCAAyC,GACzC,IAAI,SAAS,gBACT,YAAY,mBACZ,aAAa,oBACb,SAAS,gBACT,aAAa;AAEjB,IAAI,cAAc;AAElB,6CAA6C,GAC7C,IAAI,qBAAqB,SAAS,WAC9B,gBAAgB,SAAS,MACzB,oBAAoB,SAAS,UAC7B,gBAAgB,SAAS,MACzB,oBAAoB,SAAS;AAEjC;;;;;;CAMC,GACD,IAAI,SAAS;AAEb,2FAA2F;AAC3F,IAAI,AAAC,YAAY,OAAO,IAAI,SAAS,IAAI,YAAY,QAAQ,eACxD,OAAO,OAAO,IAAI,QAAQ,UAC1B,WAAW,OAAO,QAAQ,OAAO,OAAO,cACxC,OAAO,OAAO,IAAI,QAAQ,UAC1B,WAAW,OAAO,IAAI,YAAY,YAAa;IAClD,SAAS,SAAS,KAAK;QACrB,IAAI,SAAS,WAAW,QACpB,OAAO,UAAU,YAAY,MAAM,WAAW,GAAG,WACjD,aAAa,OAAO,SAAS,QAAQ;QAEzC,IAAI,YAAY;YACd,OAAQ;gBACN,KAAK;oBAAoB,OAAO;gBAChC,KAAK;oBAAe,OAAO;gBAC3B,KAAK;oBAAmB,OAAO;gBAC/B,KAAK;oBAAe,OAAO;gBAC3B,KAAK;oBAAmB,OAAO;YACjC;QACF;QACA,OAAO;IACT;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2596, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2601, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIsEqualDeep.js"],"sourcesContent":["var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n"],"names":[],"mappings":"AAAA,IAAI,iGACA,6GACA,2GACA,+GACA,mGACA,oGACA,sGACA;AAEJ,oDAAoD,GACpD,IAAI,uBAAuB;AAE3B,yCAAyC,GACzC,IAAI,UAAU,sBACV,WAAW,kBACX,YAAY;AAEhB,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;;;;;;;;CAaC,GACD,SAAS,gBAAgB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK;IAC3E,IAAI,WAAW,QAAQ,SACnB,WAAW,QAAQ,QACnB,SAAS,WAAW,WAAW,OAAO,SACtC,SAAS,WAAW,WAAW,OAAO;IAE1C,SAAS,UAAU,UAAU,YAAY;IACzC,SAAS,UAAU,UAAU,YAAY;IAEzC,IAAI,WAAW,UAAU,WACrB,WAAW,UAAU,WACrB,YAAY,UAAU;IAE1B,IAAI,aAAa,SAAS,SAAS;QACjC,IAAI,CAAC,SAAS,QAAQ;YACpB,OAAO;QACT;QACA,WAAW;QACX,WAAW;IACb;IACA,IAAI,aAAa,CAAC,UAAU;QAC1B,SAAS,CAAC,QAAQ,IAAI,KAAK;QAC3B,OAAO,AAAC,YAAY,aAAa,UAC7B,YAAY,QAAQ,OAAO,SAAS,YAAY,WAAW,SAC3D,WAAW,QAAQ,OAAO,QAAQ,SAAS,YAAY,WAAW;IACxE;IACA,IAAI,CAAC,CAAC,UAAU,oBAAoB,GAAG;QACrC,IAAI,eAAe,YAAY,eAAe,IAAI,CAAC,QAAQ,gBACvD,eAAe,YAAY,eAAe,IAAI,CAAC,OAAO;QAE1D,IAAI,gBAAgB,cAAc;YAChC,IAAI,eAAe,eAAe,OAAO,KAAK,KAAK,QAC/C,eAAe,eAAe,MAAM,KAAK,KAAK;YAElD,SAAS,CAAC,QAAQ,IAAI,KAAK;YAC3B,OAAO,UAAU,cAAc,cAAc,SAAS,YAAY;QACpE;IACF;IACA,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IACA,SAAS,CAAC,QAAQ,IAAI,KAAK;IAC3B,OAAO,aAAa,QAAQ,OAAO,SAAS,YAAY,WAAW;AACrE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2650, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2655, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIsEqual.js"],"sourcesContent":["var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n"],"names":[],"mappings":"AAAA,IAAI,qHACA;AAEJ;;;;;;;;;;;;;CAaC,GACD,SAAS,YAAY,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK;IAC3D,IAAI,UAAU,OAAO;QACnB,OAAO;IACT;IACA,IAAI,SAAS,QAAQ,SAAS,QAAS,CAAC,aAAa,UAAU,CAAC,aAAa,QAAS;QACpF,OAAO,UAAU,SAAS,UAAU;IACtC;IACA,OAAO,gBAAgB,OAAO,OAAO,SAAS,YAAY,aAAa;AACzE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2679, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2684, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIsMatch.js"],"sourcesContent":["var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n"],"names":[],"mappings":"AAAA,IAAI,iGACA;AAEJ,oDAAoD,GACpD,IAAI,uBAAuB,GACvB,yBAAyB;AAE7B;;;;;;;;;CASC,GACD,SAAS,YAAY,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,UAAU;IACxD,IAAI,QAAQ,UAAU,MAAM,EACxB,SAAS,OACT,eAAe,CAAC;IAEpB,IAAI,UAAU,MAAM;QAClB,OAAO,CAAC;IACV;IACA,SAAS,OAAO;IAChB,MAAO,QAAS;QACd,IAAI,OAAO,SAAS,CAAC,MAAM;QAC3B,IAAI,AAAC,gBAAgB,IAAI,CAAC,EAAE,GACpB,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,GAC3B,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,GACrB;YACJ,OAAO;QACT;IACF;IACA,MAAO,EAAE,QAAQ,OAAQ;QACvB,OAAO,SAAS,CAAC,MAAM;QACvB,IAAI,MAAM,IAAI,CAAC,EAAE,EACb,WAAW,MAAM,CAAC,IAAI,EACtB,WAAW,IAAI,CAAC,EAAE;QAEtB,IAAI,gBAAgB,IAAI,CAAC,EAAE,EAAE;YAC3B,IAAI,aAAa,aAAa,CAAC,CAAC,OAAO,MAAM,GAAG;gBAC9C,OAAO;YACT;QACF,OAAO;YACL,IAAI,QAAQ,IAAI;YAChB,IAAI,YAAY;gBACd,IAAI,SAAS,WAAW,UAAU,UAAU,KAAK,QAAQ,QAAQ;YACnE;YACA,IAAI,CAAC,CAAC,WAAW,YACT,YAAY,UAAU,UAAU,uBAAuB,wBAAwB,YAAY,SAC3F,MACJ,GAAG;gBACL,OAAO;YACT;QACF;IACF;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2727, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2732, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_isStrictComparable.js"],"sourcesContent":["var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;CAOC,GACD,SAAS,mBAAmB,KAAK;IAC/B,OAAO,UAAU,SAAS,CAAC,SAAS;AACtC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2744, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2749, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_getMatchData.js"],"sourcesContent":["var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n"],"names":[],"mappings":"AAAA,IAAI,2HACA;AAEJ;;;;;;CAMC,GACD,SAAS,aAAa,MAAM;IAC1B,IAAI,SAAS,KAAK,SACd,SAAS,OAAO,MAAM;IAE1B,MAAO,SAAU;QACf,IAAI,MAAM,MAAM,CAAC,OAAO,EACpB,QAAQ,MAAM,CAAC,IAAI;QAEvB,MAAM,CAAC,OAAO,GAAG;YAAC;YAAK;YAAO,mBAAmB;SAAO;IAC1D;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2769, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2774, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_matchesStrictComparable.js"],"sourcesContent":["/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,wBAAwB,GAAG,EAAE,QAAQ;IAC5C,OAAO,SAAS,MAAM;QACpB,IAAI,UAAU,MAAM;YAClB,OAAO;QACT;QACA,OAAO,MAAM,CAAC,IAAI,KAAK,YACrB,CAAC,aAAa,aAAc,OAAO,OAAO,OAAQ;IACtD;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2791, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2796, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseMatches.js"],"sourcesContent":["var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n"],"names":[],"mappings":"AAAA,IAAI,6GACA,+GACA;AAEJ;;;;;;CAMC,GACD,SAAS,YAAY,MAAM;IACzB,IAAI,YAAY,aAAa;IAC7B,IAAI,UAAU,MAAM,IAAI,KAAK,SAAS,CAAC,EAAE,CAAC,EAAE,EAAE;QAC5C,OAAO,wBAAwB,SAAS,CAAC,EAAE,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,CAAC,EAAE;IACjE;IACA,OAAO,SAAS,MAAM;QACpB,OAAO,WAAW,UAAU,YAAY,QAAQ,QAAQ;IAC1D;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2813, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2818, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/isSymbol.js"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n"],"names":[],"mappings":"AAAA,IAAI,2GACA;AAEJ,yCAAyC,GACzC,IAAI,YAAY;AAEhB;;;;;;;;;;;;;;;;CAgBC,GACD,SAAS,SAAS,KAAK;IACrB,OAAO,OAAO,SAAS,YACpB,aAAa,UAAU,WAAW,UAAU;AACjD;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2840, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2845, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_isKey.js"],"sourcesContent":["var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n"],"names":[],"mappings":"AAAA,IAAI,oGACA;AAEJ,wDAAwD,GACxD,IAAI,eAAe,oDACf,gBAAgB;AAEpB;;;;;;;CAOC,GACD,SAAS,MAAM,KAAK,EAAE,MAAM;IAC1B,IAAI,QAAQ,QAAQ;QAClB,OAAO;IACT;IACA,IAAI,OAAO,OAAO;IAClB,IAAI,QAAQ,YAAY,QAAQ,YAAY,QAAQ,aAChD,SAAS,QAAQ,SAAS,QAAQ;QACpC,OAAO;IACT;IACA,OAAO,cAAc,IAAI,CAAC,UAAU,CAAC,aAAa,IAAI,CAAC,UACpD,UAAU,QAAQ,SAAS,OAAO;AACvC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2865, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2870, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/memoize.js"],"sourcesContent":["var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,6BAA6B,GAC7B,IAAI,kBAAkB;AAEtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2CC,GACD,SAAS,QAAQ,IAAI,EAAE,QAAQ;IAC7B,IAAI,OAAO,QAAQ,cAAe,YAAY,QAAQ,OAAO,YAAY,YAAa;QACpF,MAAM,IAAI,UAAU;IACtB;IACA,IAAI,WAAW;QACb,IAAI,OAAO,WACP,MAAM,WAAW,SAAS,KAAK,CAAC,IAAI,EAAE,QAAQ,IAAI,CAAC,EAAE,EACrD,QAAQ,SAAS,KAAK;QAE1B,IAAI,MAAM,GAAG,CAAC,MAAM;YAClB,OAAO,MAAM,GAAG,CAAC;QACnB;QACA,IAAI,SAAS,KAAK,KAAK,CAAC,IAAI,EAAE;QAC9B,SAAS,KAAK,GAAG,MAAM,GAAG,CAAC,KAAK,WAAW;QAC3C,OAAO;IACT;IACA,SAAS,KAAK,GAAG,IAAI,CAAC,QAAQ,KAAK,IAAI,QAAQ;IAC/C,OAAO;AACT;AAEA,qBAAqB;AACrB,QAAQ,KAAK,GAAG;AAEhB,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2934, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2939, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_memoizeCapped.js"],"sourcesContent":["var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,4CAA4C,GAC5C,IAAI,mBAAmB;AAEvB;;;;;;;CAOC,GACD,SAAS,cAAc,IAAI;IACzB,IAAI,SAAS,QAAQ,MAAM,SAAS,GAAG;QACrC,IAAI,MAAM,IAAI,KAAK,kBAAkB;YACnC,MAAM,KAAK;QACb;QACA,OAAO;IACT;IAEA,IAAI,QAAQ,OAAO,KAAK;IACxB,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2959, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2964, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_stringToPath.js"],"sourcesContent":["var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,wDAAwD,GACxD,IAAI,aAAa;AAEjB,iDAAiD,GACjD,IAAI,eAAe;AAEnB;;;;;;CAMC,GACD,IAAI,eAAe,cAAc,SAAS,MAAM;IAC9C,IAAI,SAAS,EAAE;IACf,IAAI,OAAO,UAAU,CAAC,OAAO,GAAG,KAAK,KAAI;QACvC,OAAO,IAAI,CAAC;IACd;IACA,OAAO,OAAO,CAAC,YAAY,SAAS,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS;QACjE,OAAO,IAAI,CAAC,QAAQ,UAAU,OAAO,CAAC,cAAc,QAAS,UAAU;IACzE;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 2984, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2989, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_arrayMap.js"],"sourcesContent":["/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GACD,SAAS,SAAS,KAAK,EAAE,QAAQ;IAC/B,IAAI,QAAQ,CAAC,GACT,SAAS,SAAS,OAAO,IAAI,MAAM,MAAM,EACzC,SAAS,MAAM;IAEnB,MAAO,EAAE,QAAQ,OAAQ;QACvB,MAAM,CAAC,MAAM,GAAG,SAAS,KAAK,CAAC,MAAM,EAAE,OAAO;IAChD;IACA,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3005, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3010, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseToString.js"],"sourcesContent":["var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n"],"names":[],"mappings":"AAAA,IAAI,mGACA,uGACA,oGACA;AAEJ,uDAAuD,GACvD,IAAI,WAAW,IAAI;AAEnB,uDAAuD,GACvD,IAAI,cAAc,SAAS,OAAO,SAAS,GAAG,WAC1C,iBAAiB,cAAc,YAAY,QAAQ,GAAG;AAE1D;;;;;;;CAOC,GACD,SAAS,aAAa,KAAK;IACzB,0EAA0E;IAC1E,IAAI,OAAO,SAAS,UAAU;QAC5B,OAAO;IACT;IACA,IAAI,QAAQ,QAAQ;QAClB,iEAAiE;QACjE,OAAO,SAAS,OAAO,gBAAgB;IACzC;IACA,IAAI,SAAS,QAAQ;QACnB,OAAO,iBAAiB,eAAe,IAAI,CAAC,SAAS;IACvD;IACA,IAAI,SAAU,QAAQ;IACtB,OAAO,AAAC,UAAU,OAAO,AAAC,IAAI,SAAU,CAAC,WAAY,OAAO;AAC9D;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3036, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3041, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/toString.js"],"sourcesContent":["var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;;;;;;;;;;;;;CAoBC,GACD,SAAS,SAAS,KAAK;IACrB,OAAO,SAAS,OAAO,KAAK,aAAa;AAC3C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3066, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3071, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_castPath.js"],"sourcesContent":["var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n"],"names":[],"mappings":"AAAA,IAAI,oGACA,iGACA,+GACA;AAEJ;;;;;;;CAOC,GACD,SAAS,SAAS,KAAK,EAAE,MAAM;IAC7B,IAAI,QAAQ,QAAQ;QAClB,OAAO;IACT;IACA,OAAO,MAAM,OAAO,UAAU;QAAC;KAAM,GAAG,aAAa,SAAS;AAChE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3088, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3093, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_toKey.js"],"sourcesContent":["var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ,uDAAuD,GACvD,IAAI,WAAW,IAAI;AAEnB;;;;;;CAMC,GACD,SAAS,MAAM,KAAK;IAClB,IAAI,OAAO,SAAS,YAAY,SAAS,QAAQ;QAC/C,OAAO;IACT;IACA,IAAI,SAAU,QAAQ;IACtB,OAAO,AAAC,UAAU,OAAO,AAAC,IAAI,SAAU,CAAC,WAAY,OAAO;AAC9D;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3109, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3114, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseGet.js"],"sourcesContent":["var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n"],"names":[],"mappings":"AAAA,IAAI,uGACA;AAEJ;;;;;;;CAOC,GACD,SAAS,QAAQ,MAAM,EAAE,IAAI;IAC3B,OAAO,SAAS,MAAM;IAEtB,IAAI,QAAQ,GACR,SAAS,KAAK,MAAM;IAExB,MAAO,UAAU,QAAQ,QAAQ,OAAQ;QACvC,SAAS,MAAM,CAAC,MAAM,IAAI,CAAC,QAAQ,EAAE;IACvC;IACA,OAAO,AAAC,SAAS,SAAS,SAAU,SAAS;AAC/C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3131, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3136, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/get.js"],"sourcesContent":["var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;CAwBC,GACD,SAAS,IAAI,MAAM,EAAE,IAAI,EAAE,YAAY;IACrC,IAAI,SAAS,UAAU,OAAO,YAAY,QAAQ,QAAQ;IAC1D,OAAO,WAAW,YAAY,eAAe;AAC/C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3166, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3171, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseHasIn.js"],"sourcesContent":["/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC,GACD,SAAS,UAAU,MAAM,EAAE,GAAG;IAC5B,OAAO,UAAU,QAAQ,OAAO,OAAO;AACzC;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3182, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3187, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_hasPath.js"],"sourcesContent":["var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n"],"names":[],"mappings":"AAAA,IAAI,uGACA,4GACA,oGACA,qGACA,sGACA;AAEJ;;;;;;;;CAQC,GACD,SAAS,QAAQ,MAAM,EAAE,IAAI,EAAE,OAAO;IACpC,OAAO,SAAS,MAAM;IAEtB,IAAI,QAAQ,CAAC,GACT,SAAS,KAAK,MAAM,EACpB,SAAS;IAEb,MAAO,EAAE,QAAQ,OAAQ;QACvB,IAAI,MAAM,MAAM,IAAI,CAAC,MAAM;QAC3B,IAAI,CAAC,CAAC,SAAS,UAAU,QAAQ,QAAQ,QAAQ,IAAI,GAAG;YACtD;QACF;QACA,SAAS,MAAM,CAAC,IAAI;IACtB;IACA,IAAI,UAAU,EAAE,SAAS,QAAQ;QAC/B,OAAO;IACT;IACA,SAAS,UAAU,OAAO,IAAI,OAAO,MAAM;IAC3C,OAAO,CAAC,CAAC,UAAU,SAAS,WAAW,QAAQ,KAAK,WAClD,CAAC,QAAQ,WAAW,YAAY,OAAO;AAC3C;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3213, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3218, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/hasIn.js"],"sourcesContent":["var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n"],"names":[],"mappings":"AAAA,IAAI,yGACA;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;CAyBC,GACD,SAAS,MAAM,MAAM,EAAE,IAAI;IACzB,OAAO,UAAU,QAAQ,QAAQ,QAAQ,MAAM;AACjD;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3248, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3253, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseMatchesProperty.js"],"sourcesContent":["var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n"],"names":[],"mappings":"AAAA,IAAI,6GACA,4FACA,gGACA,iGACA,2HACA,qIACA;AAEJ,oDAAoD,GACpD,IAAI,uBAAuB,GACvB,yBAAyB;AAE7B;;;;;;;CAOC,GACD,SAAS,oBAAoB,IAAI,EAAE,QAAQ;IACzC,IAAI,MAAM,SAAS,mBAAmB,WAAW;QAC/C,OAAO,wBAAwB,MAAM,OAAO;IAC9C;IACA,OAAO,SAAS,MAAM;QACpB,IAAI,WAAW,IAAI,QAAQ;QAC3B,OAAO,AAAC,aAAa,aAAa,aAAa,WAC3C,MAAM,QAAQ,QACd,YAAY,UAAU,UAAU,uBAAuB;IAC7D;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3272, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3277, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/identity.js"],"sourcesContent":["/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;CAeC,GACD,SAAS,SAAS,KAAK;IACrB,OAAO;AACT;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3296, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3301, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseProperty.js"],"sourcesContent":["/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GACD,SAAS,aAAa,GAAG;IACvB,OAAO,SAAS,MAAM;QACpB,OAAO,UAAU,OAAO,YAAY,MAAM,CAAC,IAAI;IACjD;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3313, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3318, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_basePropertyDeep.js"],"sourcesContent":["var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n"],"names":[],"mappings":"AAAA,IAAI;AAEJ;;;;;;CAMC,GACD,SAAS,iBAAiB,IAAI;IAC5B,OAAO,SAAS,MAAM;QACpB,OAAO,QAAQ,QAAQ;IACzB;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3331, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3336, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/property.js"],"sourcesContent":["var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n"],"names":[],"mappings":"AAAA,IAAI,+GACA,uHACA,iGACA;AAEJ;;;;;;;;;;;;;;;;;;;;;CAqBC,GACD,SAAS,SAAS,IAAI;IACpB,OAAO,MAAM,QAAQ,aAAa,MAAM,SAAS,iBAAiB;AACpE;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3362, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3367, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_baseIteratee.js"],"sourcesContent":["var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n"],"names":[],"mappings":"AAAA,IAAI,6GACA,6HACA,sGACA,oGACA;AAEJ;;;;;;CAMC,GACD,SAAS,aAAa,KAAK;IACzB,gFAAgF;IAChF,uEAAuE;IACvE,IAAI,OAAO,SAAS,YAAY;QAC9B,OAAO;IACT;IACA,IAAI,SAAS,MAAM;QACjB,OAAO;IACT;IACA,IAAI,OAAO,SAAS,UAAU;QAC5B,OAAO,QAAQ,SACX,oBAAoB,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,IACtC,YAAY;IAClB;IACA,OAAO,SAAS;AAClB;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3394, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/_createAggregator.js"],"sourcesContent":["var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n"],"names":[],"mappings":"AAAA,IAAI,qHACA,mHACA,+GACA;AAEJ;;;;;;;CAOC,GACD,SAAS,iBAAiB,MAAM,EAAE,WAAW;IAC3C,OAAO,SAAS,UAAU,EAAE,QAAQ;QAClC,IAAI,OAAO,QAAQ,cAAc,kBAAkB,gBAC/C,cAAc,cAAc,gBAAgB,CAAC;QAEjD,OAAO,KAAK,YAAY,QAAQ,aAAa,UAAU,IAAI;IAC7D;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3409, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3414, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/lodash/groupBy.js"],"sourcesContent":["var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n"],"names":[],"mappings":"AAAA,IAAI,qHACA;AAEJ,yCAAyC,GACzC,IAAI,cAAc,OAAO,SAAS;AAElC,8CAA8C,GAC9C,IAAI,iBAAiB,YAAY,cAAc;AAE/C;;;;;;;;;;;;;;;;;;;;;;CAsBC,GACD,IAAI,UAAU,iBAAiB,SAAS,MAAM,EAAE,KAAK,EAAE,GAAG;IACxD,IAAI,eAAe,IAAI,CAAC,QAAQ,MAAM;QACpC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;IACnB,OAAO;QACL,gBAAgB,QAAQ,KAAK;YAAC;SAAM;IACtC;AACF;AAEA,OAAO,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3449, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3455, "column": 0}, "map": {"version":3,"file":"stringify.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/path/utils/predicates.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/path/parser/stringify.ts"],"sourcesContent":["import {type KeyedPathElement, type Path, type PathElement} from '../types'\n\nfunction safeGetElementAt<T>(array: T[] | readonly T[], index: number): T {\n  if (index < 0 || index >= array.length) {\n    throw new Error('Index out of bounds')\n  }\n  return array[index]!\n}\n\nexport function startsWith(parentPath: Path, path: Path): boolean {\n  return (\n    parentPath.length <= path.length &&\n    parentPath.every((segment, i) =>\n      isElementEqual(segment, safeGetElementAt(path, i)),\n    )\n  )\n}\n\nexport function isEqual(path: Path, otherPath: Path): boolean {\n  return (\n    path.length === otherPath.length &&\n    path.every((segment, i) =>\n      isElementEqual(segment, safeGetElementAt(path, i)),\n    )\n  )\n}\n\nexport function isElementEqual(\n  segmentA: PathElement,\n  segmentB: PathElement,\n): boolean {\n  if (isKeyElement(segmentA) && isKeyElement(segmentB)) {\n    return segmentA._key === segmentB._key\n  }\n\n  if (isIndexElement(segmentA)) {\n    return Number(segmentA) === Number(segmentB)\n  }\n\n  return segmentA === segmentB\n}\n\nexport function isKeyElement(\n  segment: PathElement,\n): segment is KeyedPathElement {\n  return typeof (segment as any)?._key === 'string'\n}\nexport function isIndexElement(segment: PathElement): segment is number {\n  return typeof segment === 'number'\n}\n\nexport function isKeyedElement(\n  element: PathElement,\n): element is KeyedPathElement {\n  return (\n    typeof element === 'object' &&\n    '_key' in element &&\n    typeof element._key === 'string'\n  )\n}\nexport function isArrayElement(\n  element: PathElement,\n): element is KeyedPathElement | number {\n  return typeof element === 'number' || isKeyedElement(element)\n}\n\nexport function isPropertyElement(element: PathElement): element is string {\n  return typeof element === 'string'\n}\n","import {type Path, type PathElement} from '../types'\nimport {isKeyedElement} from '../utils/predicates'\n\nconst IS_DOTTABLE = /^[a-z_$]+/\n\nfunction stringifySegment(segment: PathElement, hasLeading: boolean): string {\n  if (Array.isArray(segment)) {\n    return `[${segment[0]}:${segment[1] || ''}]`\n  }\n  const type = typeof segment\n\n  const isNumber = type === 'number'\n\n  if (isNumber) {\n    return `[${segment}]`\n  }\n\n  if (isKeyedElement(segment)) {\n    return `[_key==${JSON.stringify(segment._key)}]`\n  }\n\n  if (typeof segment === 'string' && IS_DOTTABLE.test(segment)) {\n    return hasLeading ? segment : `.${segment}`\n  }\n\n  return `['${segment}']`\n}\n\nexport function stringify(pathArray: Path): string {\n  return pathArray\n    .map((segment, i) => stringifySegment(segment, i === 0))\n    .join('')\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAEA,SAAS,iBAAoB,KAAA,EAA2B,KAAA,EAAkB;IACpE,IAAA,QAAQ,KAAK,SAAS,MAAM,MAAA,EACxB,MAAA,IAAI,MAAM,qBAAqB;IAEvC,OAAO,KAAA,CAAM,KAAK,CAAA;AACpB;AAEgB,SAAA,WAAW,UAAA,EAAkB,IAAA,EAAqB;IAChE,OACE,WAAW,MAAA,IAAU,KAAK,MAAA,IAC1B,WAAW,KAAA,CAAM,CAAC,SAAS,IACzB,eAAe,SAAS,iBAAiB,MAAM,CAAC,CAAC;AAGvD;AAEgB,SAAA,QAAQ,IAAA,EAAY,SAAA,EAA0B;IAC5D,OACE,KAAK,MAAA,KAAW,UAAU,MAAA,IAC1B,KAAK,KAAA,CAAM,CAAC,SAAS,IACnB,eAAe,SAAS,iBAAiB,MAAM,CAAC,CAAC;AAGvD;AAEgB,SAAA,eACd,QAAA,EACA,QAAA,EACS;IACT,OAAI,aAAa,QAAQ,KAAK,aAAa,QAAQ,IAC1C,SAAS,IAAA,KAAS,SAAS,IAAA,GAGhC,eAAe,QAAQ,IAClB,OAAO,QAAQ,MAAM,OAAO,QAAQ,IAGtC,aAAa;AACtB;AAEO,SAAS,aACd,OAAA,EAC6B;IACtB,OAAA,OAAQ,SAAiB,QAAS;AAC3C;AACO,SAAS,eAAe,OAAA,EAAyC;IACtE,OAAO,OAAO,WAAY;AAC5B;AAEO,SAAS,eACd,OAAA,EAC6B;IAC7B,OACE,OAAO,WAAY,YACnB,UAAU,WACV,OAAO,QAAQ,IAAA,IAAS;AAE5B;AACO,SAAS,eACd,OAAA,EACsC;IACtC,OAAO,OAAO,WAAY,YAAY,eAAe,OAAO;AAC9D;AAEO,SAAS,kBAAkB,OAAA,EAAyC;IACzE,OAAO,OAAO,WAAY;AAC5B;ACjEA,MAAM,cAAc;AAEpB,SAAS,iBAAiB,OAAA,EAAsB,UAAA,EAA6B;IAC3E,OAAI,MAAM,OAAA,CAAQ,OAAO,IAChB,CAAA,CAAA,EAAI,OAAA,CAAQ,CAAC,CAAC,CAAA,CAAA,EAAI,OAAA,CAAQ,CAAC,CAAA,IAAK,EAAE,CAAA,CAAA,CAAA,GAE9B,OAAO,WAEM,WAGjB,CAAA,CAAA,EAAI,OAAO,CAAA,CAAA,CAAA,GAGhB,eAAe,OAAO,IACjB,CAAA,OAAA,EAAU,KAAK,SAAA,CAAU,QAAQ,IAAI,CAAC,CAAA,CAAA,CAAA,GAG3C,OAAO,WAAY,YAAY,YAAY,IAAA,CAAK,OAAO,IAClD,aAAa,UAAU,CAAA,CAAA,EAAI,OAAO,EAAA,GAGpC,CAAA,EAAA,EAAK,OAAO,CAAA,EAAA,CAAA;AACrB;AAEO,SAAS,UAAU,SAAA,EAAyB;IACjD,OAAO,UACJ,GAAA,CAAI,CAAC,SAAS,IAAM,iBAAiB,SAAS,MAAM,CAAC,CAAC,EACtD,IAAA,CAAK,EAAE;AACZ","ignoreList":[0,1]}},
    {"offset": {"line": 3503, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3509, "column": 0}, "map": {"version":3,"file":"isObject.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/utils/isObject.ts"],"sourcesContent":["export function isObject(val: unknown): val is {\n  [K in string]: unknown\n} {\n  return val !== null && typeof val === 'object' && !Array.isArray(val)\n}\n"],"names":[],"mappings":";;;AAAO,SAAS,SAAS,GAAA,EAEvB;IACO,OAAA,QAAQ,QAAQ,OAAO,OAAQ,YAAY,CAAC,MAAM,OAAA,CAAQ,GAAG;AACtE","ignoreList":[0]}},
    {"offset": {"line": 3517, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3523, "column": 0}, "map": {"version":3,"file":"utils.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/utils/getKeyOf.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/utils/array.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/operations/array.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/operations/common.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/operations/number.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/utils/hasOwn.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/utils/isEmpty.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/utils/omit.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/operations/object.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/operations/string.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/applyOp.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/patch/applyNodePatch.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/applyPatchMutation.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/node_modules/.pnpm/nanoid%405.0.8/node_modules/nanoid/url-alphabet/index.js","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/node_modules/.pnpm/nanoid%405.0.8/node_modules/nanoid/index.js","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/apply/store/utils.ts"],"sourcesContent":["export function keyOf(value: any): string | null {\n  return (\n    (value !== null &&\n      typeof value === 'object' &&\n      typeof value._key === 'string' &&\n      value._key) ||\n    null\n  )\n}\n","import {isKeyedElement, type PathElement} from '../../path'\nimport {keyOf} from './getKeyOf'\n\nexport function findTargetIndex<T>(array: T[], pathSegment: PathElement) {\n  if (typeof pathSegment === 'number') {\n    return normalizeIndex(array.length, pathSegment)\n  }\n  if (isKeyedElement(pathSegment)) {\n    const idx = array.findIndex(value => keyOf(value) === pathSegment._key)\n    return idx === -1 ? null : idx\n  }\n  throw new Error(\n    `Expected path segment to be addressing a single array item either by numeric index or by '_key'. Instead saw ${JSON.stringify(\n      pathSegment,\n    )}`,\n  )\n}\n\nexport function getTargetIdx(position: 'before' | 'after', index: number) {\n  return position === 'before' ? index : index + 1\n}\n\n// normalizes the index according to the array length\n// returns null if the normalized index is out of bounds\nexport function normalizeIndex(length: number, index: number) {\n  if (length === 0 && (index === -1 || index === 0)) {\n    return 0\n  }\n  const normalized = index < 0 ? length + index : index\n  return normalized >= length || normalized < 0 ? null : normalized\n}\n\n// non-mutating splice\nexport function splice<T>(arr: T[], start: number, deleteCount: number): T[]\nexport function splice<T>(\n  arr: T[],\n  start: number,\n  deleteCount: number,\n  items: T[],\n): T[]\nexport function splice<T>(\n  arr: T[],\n  start: number,\n  deleteCount: number,\n  items?: T[],\n): T[] {\n  const copy = arr.slice()\n  copy.splice(start, deleteCount, ...(items || []))\n  return copy\n}\n","import {\n  type InsertOp,\n  type KeyedPathElement,\n  type RelativePosition,\n  type RemoveOp,\n  type ReplaceOp,\n  type TruncateOp,\n  type UpsertOp,\n} from '../../../mutations/operations/types'\nimport {findTargetIndex, getTargetIdx, splice} from '../../utils/array'\n\nexport function insert<\n  O extends InsertOp<unknown[], RelativePosition, number | KeyedPathElement>,\n  CurrentValue extends unknown[],\n>(op: O, currentValue: CurrentValue) {\n  if (!Array.isArray(currentValue)) {\n    throw new TypeError('Cannot apply \"insert()\" on non-array value')\n  }\n\n  const index = findTargetIndex(currentValue, op.referenceItem)\n  if (index === null) {\n    throw new Error(`Found no matching array element to insert ${op.position}`)\n  }\n  // special case for empty arrays\n  if (currentValue.length === 0) {\n    return op.items\n  }\n  return splice(currentValue, getTargetIdx(op.position, index), 0, op.items)\n}\n\nexport function upsert<\n  O extends UpsertOp<unknown[], RelativePosition, number | KeyedPathElement>,\n  CurrentValue extends unknown[],\n>(op: O, currentValue: CurrentValue) {\n  if (!Array.isArray(currentValue)) {\n    throw new TypeError('Cannot apply \"upsert()\" on non-array value')\n  }\n\n  if (op.items.length === 0) {\n    return currentValue\n  }\n  const replaceItemsMap: number[] = []\n  const insertItems: unknown[] = []\n  op.items.forEach((itemToBeUpserted: any, i) => {\n    const existingIndex = currentValue.findIndex(\n      existingItem => (existingItem as any)?._key === itemToBeUpserted._key,\n    )\n    if (existingIndex >= 0) {\n      replaceItemsMap[existingIndex] = i\n    } else {\n      insertItems.push(itemToBeUpserted)\n    }\n  })\n\n  if (replaceItemsMap.length === 0 && insertItems.length == 0) {\n    return currentValue\n  }\n\n  const next = [...currentValue]\n  // Replace existing items\n  for (const i of replaceItemsMap) {\n    next[i] = op.items[replaceItemsMap[i]!]!\n  }\n\n  // Insert the items that doesn't exist\n  return insert(\n    {\n      type: 'insert',\n      items: insertItems,\n      referenceItem: op.referenceItem,\n      position: op.position,\n    },\n    next,\n  )\n}\n\nexport function replace<\n  O extends ReplaceOp<unknown[], number | KeyedPathElement>,\n  CurrentValue extends unknown[],\n>(op: O, currentValue: CurrentValue) {\n  if (!Array.isArray(currentValue)) {\n    throw new TypeError('Cannot apply \"replace()\" on non-array value')\n  }\n\n  const index = findTargetIndex(currentValue, op.referenceItem)\n  if (index === null) {\n    throw new Error(`Found no matching array element to replace`)\n  }\n  return splice(currentValue, index, op.items.length, op.items)\n}\nexport function remove<\n  O extends RemoveOp<number | KeyedPathElement>,\n  CurrentValue extends unknown[],\n>(op: O, currentValue: CurrentValue) {\n  if (!Array.isArray(currentValue)) {\n    throw new TypeError('Cannot apply \"remove()\" on non-array value')\n  }\n\n  const index = findTargetIndex(currentValue, op.referenceItem)\n  if (index === null) {\n    throw new Error(`Found no matching array element to replace`)\n  }\n  return splice(currentValue, index, 1, [])\n}\n\nexport function truncate<O extends TruncateOp, CurrentValue extends unknown[]>(\n  op: O,\n  currentValue: CurrentValue,\n) {\n  if (!Array.isArray(currentValue)) {\n    throw new TypeError('Cannot apply \"truncate()\" on non-array value')\n  }\n\n  return typeof op.endIndex === 'number'\n    ? currentValue\n        .slice(0, op.startIndex)\n        .concat(currentValue.slice(op.endIndex))\n    : currentValue.slice(0, op.startIndex)\n}\n","import {\n  type SetIfMissingOp,\n  type SetOp,\n  type UnsetOp,\n} from '../../../mutations/operations/types'\n\nexport function set<O extends SetOp<any>, CurrentValue>(\n  op: O,\n  currentValue: CurrentValue,\n) {\n  return op.value\n}\n\nexport function setIfMissing<O extends SetIfMissingOp<any>, CurrentValue>(\n  op: O,\n  currentValue: CurrentValue,\n) {\n  return currentValue ?? op.value\n}\n\nexport function unset<O extends UnsetOp, CurrentValue>(op: O) {\n  return undefined\n}\n","import {type DecOp, type IncOp} from '../../../mutations/operations/types'\n\nexport function inc<O extends IncOp<number>, CurrentValue extends number>(\n  op: O,\n  currentValue: CurrentValue,\n) {\n  if (typeof currentValue !== 'number') {\n    throw new TypeError('Cannot apply \"inc()\" on non-numeric value')\n  }\n\n  return currentValue + op.amount\n}\n\nexport function dec<O extends DecOp<number>, CurrentValue extends number>(\n  op: O,\n  currentValue: CurrentValue,\n) {\n  if (typeof currentValue !== 'number') {\n    throw new TypeError('Cannot apply \"dec()\" on non-numeric value')\n  }\n\n  return currentValue - op.amount\n}\n","export const hasOwn = Object.prototype.hasOwnProperty.call.bind(\n  Object.prototype.hasOwnProperty,\n)\n","import {hasOwn} from './hasOwn'\n\nexport function isEmpty(v: object) {\n  for (const key in v) {\n    if (hasOwn(v, key)) {\n      return false\n    }\n  }\n  return true\n}\n","export function omit<T, K extends keyof T>(val: T, props: K[]): Omit<T, K> {\n  const copy = {...val}\n  for (const prop of props) {\n    delete copy[prop]\n  }\n  return copy\n}\n","import {\n  type AssignOp,\n  type UnassignOp,\n} from '../../../mutations/operations/types'\nimport {isObject} from '../../../utils/isObject'\nimport {isEmpty} from '../../utils/isEmpty'\nimport {omit} from '../../utils/omit'\n\nexport function unassign<T extends object, K extends string[]>(\n  op: UnassignOp<K>,\n  currentValue: T,\n) {\n  if (!isObject(currentValue)) {\n    throw new TypeError('Cannot apply \"unassign()\" on non-object value')\n  }\n\n  return op.keys.length === 0\n    ? currentValue\n    : omit(currentValue, op.keys as any[])\n}\n\nexport function assign<T extends object>(op: AssignOp<T>, currentValue: T) {\n  if (!isObject(currentValue)) {\n    throw new TypeError('Cannot apply \"assign()\" on non-object value')\n  }\n\n  return isEmpty(op.value) ? currentValue : {...currentValue, ...op.value}\n}\n","import {applyPatches, parsePatch} from '@sanity/diff-match-patch'\n\nimport {type DiffMatchPatchOp} from '../../../mutations/operations/types'\n\nexport function diffMatchPatch<\n  O extends DiffMatchPatchOp,\n  CurrentValue extends string,\n>(op: O, currentValue: CurrentValue) {\n  if (typeof currentValue !== 'string') {\n    throw new TypeError('Cannot apply \"diffMatchPatch()\" on non-string value')\n  }\n\n  return applyPatches(parsePatch(op.value), currentValue)[0]\n}\n","import {\n  type AnyOp,\n  type ArrayOp,\n  type NumberOp,\n  type ObjectOp,\n  type Operation,\n  type StringOp,\n} from '../../mutations/operations/types'\nimport {type AnyArray} from '../../utils/typeUtils'\nimport * as operations from './operations'\nimport {type ApplyOp} from './typings/applyOp'\n\nexport function applyOp<const Op extends AnyOp, const CurrentValue>(\n  op: Op,\n  currentValue: CurrentValue,\n): ApplyOp<Op, CurrentValue>\nexport function applyOp<\n  const Op extends NumberOp,\n  const CurrentValue extends number,\n>(op: Op, currentValue: CurrentValue): ApplyOp<Op, CurrentValue>\nexport function applyOp<\n  const Op extends StringOp,\n  const CurrentValue extends string,\n>(op: Op, currentValue: CurrentValue): ApplyOp<Op, CurrentValue>\nexport function applyOp<\n  const Op extends ObjectOp,\n  const CurrentValue extends {[k in keyof any]: unknown},\n>(op: Op, currentValue: CurrentValue): ApplyOp<Op, CurrentValue>\nexport function applyOp<\n  const Op extends ArrayOp,\n  const CurrentValue extends AnyArray,\n>(op: Op, currentValue: CurrentValue): ApplyOp<Op, CurrentValue>\nexport function applyOp<const Op extends Operation, const CurrentValue>(\n  op: Op,\n  currentValue: CurrentValue,\n): ApplyOp<Op, CurrentValue> {\n  if (!(op.type in operations)) {\n    throw new Error(`Invalid operation type: \"${op.type}\"`)\n  }\n\n  return (operations[op.type] as CallableFunction)(op, currentValue)\n}\n","import {type Operation} from '../../mutations/operations/types'\nimport {type NodePatch, type NodePatchList} from '../../mutations/types'\nimport {isArrayElement, isPropertyElement, stringify} from '../../path'\nimport {isObject} from '../../utils/isObject'\nimport {type NormalizeReadOnlyArray} from '../../utils/typeUtils'\nimport {type KeyedPathElement, type Path} from '../'\nimport {findTargetIndex, splice} from '../utils/array'\nimport {applyOp} from './applyOp'\nimport {\n  type ApplyAtPath,\n  type ApplyNodePatch,\n  type ApplyPatches,\n} from './typings/applyNodePatch'\n\nexport function applyPatches<Patches extends NodePatchList, const Doc>(\n  patches: Patches,\n  document: Doc,\n): ApplyPatches<NormalizeReadOnlyArray<Patches>, Doc> {\n  return (patches as NodePatch[]).reduce(\n    (prev, patch) => applyNodePatch(patch, prev) as any,\n    document,\n  ) as any\n}\n\nexport function applyNodePatch<const Patch extends NodePatch, const Doc>(\n  patch: Patch,\n  document: Doc,\n): ApplyNodePatch<Patch, Doc> {\n  return applyAtPath(patch.path, patch.op, document) as any\n}\n\nfunction applyAtPath<P extends Path, O extends Operation, T>(\n  path: P,\n  op: O,\n  value: T,\n): ApplyAtPath<P, O, T> {\n  if (!isNonEmptyArray(path)) {\n    return applyOp(op as any, value) as any\n  }\n\n  const [head, ...tail] = path\n\n  if (isArrayElement(head) && Array.isArray(value)) {\n    return applyInArray(head, tail, op, value) as any\n  }\n\n  if (isPropertyElement(head) && isObject(value)) {\n    return applyInObject(head, tail, op, value) as any\n  }\n\n  throw new Error(\n    `Cannot apply operation of type \"${op.type}\" to path ${stringify(\n      path,\n    )} on ${typeof value} value`,\n  )\n}\n\nfunction applyInObject<Key extends keyof any, T extends {[key in Key]?: any}>(\n  head: Key,\n  tail: Path,\n  op: Operation,\n  object: T,\n) {\n  const current = object[head]\n\n  if (current === undefined && tail.length > 0) {\n    return object\n  }\n\n  // The patch targets the item at the index specified by \"head\"\n  // so forward it to the item\n  const patchedValue = applyAtPath(tail, op, current)\n\n  // If the result of applying it to the item yields the item back we assume it was\n  // a noop and don't modify our value. If we get a new value back, we return a\n  // new array with the modified item replaced\n  return patchedValue === current ? object : {...object, [head]: patchedValue}\n}\n\nfunction applyInArray<T>(\n  head: number | KeyedPathElement,\n  tail: Path,\n  op: Operation,\n  value: T[],\n) {\n  const index = findTargetIndex(value, head!)\n\n  if (index === null) {\n    // partial is default behavior for arrays\n    // the patch targets an index that is out of bounds\n    return value\n  }\n\n  // If the given selector could not be found, return as-is\n  if (index === -1) {\n    return value\n  }\n\n  const current = value[index]!\n\n  // The patch targets the item at the index specified by \"head\"\n  // so forward it to the item\n  const patchedItem = applyAtPath(tail, op, current)\n\n  // If the result of applying it to the item yields the item back we assume it was\n  // a noop and don't modify our value. If we get a new value back, we return a\n  // new array with the modified item replaced\n  return patchedItem === current\n    ? value\n    : splice(value, index, 1, [patchedItem])\n}\n\nfunction isNonEmptyArray<T>(a: T[] | readonly T[]): a is [T, ...T[]] {\n  return a.length > 0\n}\n","import {type PatchMutation, type SanityDocumentBase} from '../mutations/types'\nimport {type NormalizeReadOnlyArray} from '../utils/typeUtils'\nimport {applyPatches} from './patch/applyNodePatch'\nimport {type ApplyPatches} from './patch/typings/applyNodePatch'\n\nexport type ApplyPatchMutation<\n  Mutation extends PatchMutation,\n  Doc extends SanityDocumentBase,\n> =\n  Mutation extends PatchMutation<infer Patches>\n    ? ApplyPatches<NormalizeReadOnlyArray<Patches>, Doc>\n    : Doc\n\nexport function applyPatchMutation<\n  const Mutation extends PatchMutation,\n  const Doc extends SanityDocumentBase,\n>(mutation: Mutation, document: Doc): ApplyPatchMutation<Mutation, Doc> {\n  if (\n    mutation.options?.ifRevision &&\n    document._rev !== mutation.options.ifRevision\n  ) {\n    throw new Error('Revision mismatch')\n  }\n  if (mutation.id !== document._id) {\n    throw new Error(\n      `Document id mismatch. Refusing to apply mutation for document with id=\"${mutation.id}\" on the given document with id=\"${document._id}\"`,\n    )\n  }\n  return applyPatches(mutation.patches, document) as any\n}\n","export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n","import { webcrypto as crypto } from 'node:crypto'\nimport { urlAlphabet as scopedUrlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet } from './url-alphabet/index.js'\nconst POOL_SIZE_MULTIPLIER = 128\nlet pool, poolOffset\nfunction fillPool(bytes) {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    crypto.getRandomValues(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    crypto.getRandomValues(pool)\n    poolOffset = 0\n  }\n  poolOffset += bytes\n}\nexport function random(bytes) {\n  fillPool((bytes -= 0))\n  return pool.subarray(poolOffset - bytes, poolOffset)\n}\nexport function customRandom(alphabet, defaultSize, getRandom) {\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  let step = Math.ceil((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let i = step\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport function customAlphabet(alphabet, size = 21) {\n  return customRandom(alphabet, size, random)\n}\nexport function nanoid(size = 21) {\n  fillPool((size -= 0))\n  let id = ''\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += scopedUrlAlphabet[pool[i] & 63]\n  }\n  return id\n}\n","import {type SanityDocumentBase} from '../../mutations/types'\nimport {type StoredDocument} from '../applyInIndex'\n\nexport function hasId(doc: SanityDocumentBase): doc is StoredDocument {\n  return '_id' in doc\n}\nexport function assignId<Doc extends SanityDocumentBase>(\n  doc: Doc,\n  generateId: () => string,\n): Doc & {_id: string} {\n  return hasId(doc) ? doc : {...doc, _id: generateId()}\n}\n"],"names":["applyPatches","crypto","scopedUrlAlphabet"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}},
    {"offset": {"line": 3727, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3733, "column": 0}, "map": {"version":3,"file":"getAtPath.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/path/get/getAtPath.ts"],"sourcesContent":["import {type AnyArray} from '../../utils/typeUtils'\nimport {type KeyedPathElement, type Path, type PathElement} from '../types'\nimport {isArrayElement, isKeyedElement} from '../utils/predicates'\nimport {type FindInArray} from './types'\n\nexport type {AnyArray} from '../../utils/typeUtils'\n\nexport type Get<\n  P extends number | KeyedPathElement | Readonly<KeyedPathElement> | string,\n  T,\n> = T extends AnyArray\n  ? P extends KeyedPathElement | Readonly<KeyedPathElement> | number\n    ? FindInArray<P, T>\n    : undefined\n  : P extends keyof T\n    ? T[P]\n    : never\n\nexport type GetAtPath<P extends readonly PathElement[], T> = P extends []\n  ? T\n  : P extends [infer Head, ...infer Tail]\n    ? Head extends PathElement\n      ? Tail extends PathElement[]\n        ? GetAtPath<Tail, Get<Head, T>>\n        : undefined\n      : undefined\n    : undefined\n\nexport function getAtPath<const Head extends PathElement, const T>(\n  path: [head: Head],\n  value: T,\n): Get<Head, T>\nexport function getAtPath<\n  const Head extends PathElement,\n  const Tail extends PathElement[],\n  T,\n>(path: [head: Head, ...tail: Tail], value: T): GetAtPath<[Head, ...Tail], T>\nexport function getAtPath<T>(path: [], value: T): T\nexport function getAtPath(path: Path, value: unknown): unknown\nexport function getAtPath(path: Path, value: unknown): unknown {\n  if (path.length === 0) {\n    return value\n  }\n\n  let current = value\n  for (const head of path) {\n    if (isArrayElement(head)) {\n      if (!Array.isArray(current)) {\n        return undefined\n      }\n\n      if (isKeyedElement(head)) {\n        current = current.find(item => item._key === head._key)\n        continue\n      }\n      current = current[head]\n      continue\n    }\n    current = (current as any)[head]\n  }\n  return current\n}\n"],"names":[],"mappings":";;;;;AAuCgB,SAAA,UAAU,IAAA,EAAY,KAAA,EAAyB;IAC7D,IAAI,KAAK,MAAA,KAAW,GACX,OAAA;IAGT,IAAI,UAAU;IACd,KAAA,MAAW,QAAQ,KAAM;QACnB,mNAAA,iBAAA,EAAe,IAAI,GAAG;YACpB,IAAA,CAAC,MAAM,OAAA,CAAQ,OAAO,GACxB;YAGE,KAAA,+NAAA,EAAe,IAAI,GAAG;gBACxB,UAAU,QAAQ,IAAA,CAAK,CAAA,OAAQ,KAAK,IAAA,KAAS,KAAK,IAAI;gBACtD;YAAA;YAEF,UAAU,OAAA,CAAQ,IAAI,CAAA;YACtB;QAAA;QAEF,UAAW,OAAA,CAAgB,IAAI,CAAA;IAAA;IAE1B,OAAA;AACT","ignoreList":[0]}},
    {"offset": {"line": 3757, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3763, "column": 0}, "map": {"version":3,"file":"toTransactions.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/utils/getMutationDocumentId.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/datasets/applyDocumentMutation.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/datasets/applyMutations.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/datasets/commit.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/utils/arrayUtils.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/optimizations/squashNodePatches.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/optimizations/squashDMPStrings.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/utils/mergeMutationGroups.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/optimizations/squashMutations.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/rebase.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/store/toTransactions.ts"],"sourcesContent":["type MutationLike =\n  | {type: 'patch'; id: string}\n  | {type: 'create'; document: {_id: string}}\n  | {type: 'delete'; id: string}\n  | {type: 'createIfNotExists'; document: {_id: string}}\n  | {type: 'createOrReplace'; document: {_id: string}}\n\nexport function getMutationDocumentId(mutation: MutationLike): string {\n  if (mutation.type === 'patch') {\n    return mutation.id\n  }\n  if (mutation.type === 'create') {\n    return mutation.document._id\n  }\n  if (mutation.type === 'delete') {\n    return mutation.id\n  }\n  if (mutation.type === 'createIfNotExists') {\n    return mutation.document._id\n  }\n  if (mutation.type === 'createOrReplace') {\n    return mutation.document._id\n  }\n  throw new Error('Invalid mutation type')\n}\n","import {nanoid} from 'nanoid'\n\nimport {applyPatchMutation, assignId, hasId} from '../../apply'\nimport {\n  type CreateIfNotExistsMutation,\n  type CreateMutation,\n  type CreateOrReplaceMutation,\n  type DeleteMutation,\n  type Mutation,\n  type PatchMutation,\n  type SanityDocumentBase,\n} from '../../mutations/types'\n\nexport type MutationResult<Doc extends SanityDocumentBase> =\n  | {\n      id: string\n      status: 'created'\n      after: Doc\n    }\n  | {\n      id: string\n      status: 'updated'\n      before: Doc\n      after: Doc\n    }\n  | {\n      id: string\n      status: 'deleted'\n      before: Doc | undefined\n      after: undefined\n    }\n  | {\n      status: 'error'\n      message: string\n    }\n  | {\n      status: 'noop'\n    }\n\n/**\n * Applies a set of mutations to the provided document\n * @param current\n * @param mutation\n */\nexport function applyAll<Doc extends SanityDocumentBase>(\n  current: Doc | undefined,\n  mutation: Mutation<Doc>[],\n): Doc | undefined {\n  return mutation.reduce((doc, m) => {\n    const res = applyDocumentMutation(doc, m)\n    if (res.status === 'error') {\n      throw new Error(res.message)\n    }\n    return res.status === 'noop' ? doc : res.after\n  }, current)\n}\n\n/**\n * Applies a mutation to the provided document\n * @param document\n * @param mutation\n */\nexport function applyDocumentMutation<Doc extends SanityDocumentBase>(\n  document: Doc | undefined,\n  mutation: Mutation<Doc>,\n): MutationResult<Doc> {\n  if (mutation.type === 'create') {\n    return create(document, mutation)\n  }\n  if (mutation.type === 'createIfNotExists') {\n    return createIfNotExists(document, mutation)\n  }\n  if (mutation.type === 'delete') {\n    return del(document, mutation)\n  }\n  if (mutation.type === 'createOrReplace') {\n    return createOrReplace(document, mutation)\n  }\n  if (mutation.type === 'patch') {\n    return patch(document, mutation)\n  }\n  // @ts-expect-error all cases should be covered\n  throw new Error(`Invalid mutation type: ${mutation.type}`)\n}\n\nfunction create<Doc extends SanityDocumentBase>(\n  document: Doc | undefined,\n  mutation: CreateMutation<Doc>,\n): MutationResult<Doc> {\n  if (document) {\n    return {status: 'error', message: 'Document already exist'}\n  }\n  const result = assignId(mutation.document, nanoid)\n  return {status: 'created', id: result._id, after: result}\n}\n\nfunction createIfNotExists<Doc extends SanityDocumentBase>(\n  document: Doc | undefined,\n  mutation: CreateIfNotExistsMutation<Doc>,\n): MutationResult<Doc> {\n  if (!hasId(mutation.document)) {\n    return {\n      status: 'error',\n      message: 'Cannot createIfNotExists on document without _id',\n    }\n  }\n  return document\n    ? {status: 'noop'}\n    : {status: 'created', id: mutation.document._id, after: mutation.document}\n}\n\nfunction createOrReplace<Doc extends SanityDocumentBase>(\n  document: Doc | undefined,\n  mutation: CreateOrReplaceMutation<Doc>,\n): MutationResult<Doc> {\n  if (!hasId(mutation.document)) {\n    return {\n      status: 'error',\n      message: 'Cannot createIfNotExists on document without _id',\n    }\n  }\n\n  return document\n    ? {\n        status: 'updated',\n        id: mutation.document._id,\n        before: document,\n        after: mutation.document,\n      }\n    : {status: 'created', id: mutation.document._id, after: mutation.document}\n}\n\nfunction del<Doc extends SanityDocumentBase>(\n  document: Doc | undefined,\n  mutation: DeleteMutation,\n): MutationResult<Doc> {\n  if (!document) {\n    return {status: 'noop'}\n  }\n  if (mutation.id !== document._id) {\n    return {status: 'error', message: 'Delete mutation targeted wrong document'}\n  }\n  return {\n    status: 'deleted',\n    id: mutation.id,\n    before: document,\n    after: undefined,\n  }\n}\n\nfunction patch<Doc extends SanityDocumentBase>(\n  document: Doc | undefined,\n  mutation: PatchMutation,\n): MutationResult<Doc> {\n  if (!document) {\n    return {\n      status: 'error',\n      message: 'Cannot apply patch on nonexistent document',\n    }\n  }\n  const next = applyPatchMutation(mutation, document)\n  return document === next\n    ? {status: 'noop'}\n    : {status: 'updated', id: mutation.id, before: document, after: next}\n}\n","import {type Mutation, type SanityDocumentBase} from '../../mutations/types'\nimport {getMutationDocumentId} from '../utils/getMutationDocumentId'\nimport {applyDocumentMutation} from './applyDocumentMutation'\n\nexport interface UpdateResult<T extends SanityDocumentBase> {\n  id: string\n  status: 'created' | 'updated' | 'deleted'\n  before?: T\n  after?: T\n  mutations: Mutation[]\n}\n\n/**\n * Takes a list of mutations and applies them to documents in a dataset\n */\nexport function applyMutations<T extends SanityDocumentBase>(\n  mutations: Mutation[],\n  dataset: {get: (id: string) => T | undefined},\n): UpdateResult<T>[] {\n  const updatedDocs: Record<\n    string,\n    {\n      before: T | undefined\n      after: T | undefined\n      muts: Mutation[]\n    }\n  > = Object.create(null)\n\n  for (const mutation of mutations) {\n    const documentId = getMutationDocumentId(mutation)\n    if (!documentId) {\n      throw new Error('Unable to get document id from mutation')\n    }\n\n    const before = updatedDocs[documentId]?.after || dataset.get(documentId)\n    const res = applyDocumentMutation(before, mutation)\n    if (res.status === 'error') {\n      throw new Error(res.message)\n    }\n    if (res.status === 'noop') {\n      continue\n    }\n    if (\n      res.status === 'updated' ||\n      res.status === 'created' ||\n      res.status === 'deleted'\n    ) {\n      if (!(documentId in updatedDocs)) {\n        updatedDocs[documentId] = {before, after: undefined, muts: []}\n      }\n      updatedDocs[documentId]!.after = res.after\n    }\n  }\n\n  return Object.entries(updatedDocs).map(\n    // eslint-disable-next-line no-shadow\n    ([id, {before, after, muts}]) => {\n      return {\n        id,\n        status: after ? (before ? 'updated' : 'created') : 'deleted',\n        mutations: muts,\n        before,\n        after,\n      }\n    },\n  )\n}\n","import {type SanityDocumentBase} from '../../mutations/types'\nimport {type Dataset} from '../types'\nimport {type UpdateResult} from './applyMutations'\n\nexport function commit<Doc extends SanityDocumentBase>(\n  results: UpdateResult<Doc>[],\n  dataset: Dataset<Doc>,\n) {\n  results.forEach(result => {\n    if (result.status === 'created' || result.status === 'updated') {\n      dataset.set(result.id, result.after)\n    }\n    if (result.status === 'deleted') {\n      dataset.delete(result.id)\n    }\n  })\n}\n","export function takeUntil<T>(\n  arr: T[],\n  predicate: (item: T) => boolean,\n  opts?: {inclusive: boolean},\n) {\n  const result = []\n  for (const item of arr) {\n    if (predicate(item)) {\n      if (opts?.inclusive) {\n        result.push(item)\n      }\n      return result\n    }\n    result.push(item)\n  }\n  return result\n}\n\nexport function takeUntilRight<T>(\n  arr: T[],\n  predicate: (item: T) => boolean,\n  opts?: {inclusive: boolean},\n) {\n  const result = []\n  for (const item of arr.slice().reverse()) {\n    if (predicate(item)) {\n      if (opts?.inclusive) {\n        result.push(item)\n      }\n      return result\n    }\n    result.push(item)\n  }\n  return result.reverse()\n}\n","import {makePatches, stringifyPatches} from '@sanity/diff-match-patch'\n\nimport {applyNodePatch} from '../../apply'\nimport {type Operation} from '../../mutations/operations/types'\nimport {type NodePatch, type SanityDocumentBase} from '../../mutations/types'\nimport {getAtPath, type Path, startsWith, stringify} from '../../path'\nimport {takeUntilRight} from '../utils/arrayUtils'\n\nfunction isEqualPath(p1: Path, p2: Path) {\n  return stringify(p1) === stringify(p2)\n}\n\nfunction supersedes(later: Operation, earlier: Operation) {\n  return (\n    (earlier.type === 'set' || earlier.type === 'unset') &&\n    (later.type === 'set' || later.type === 'unset')\n  )\n}\n\nexport function squashNodePatches(patches: NodePatch[]) {\n  return compactSetIfMissingPatches(\n    compactSetPatches(compactUnsetPatches(patches)),\n  )\n}\n\nexport function compactUnsetPatches(patches: NodePatch[]) {\n  return patches.reduce(\n    (earlierPatches: NodePatch[], laterPatch: NodePatch) => {\n      if (laterPatch.op.type !== 'unset') {\n        earlierPatches.push(laterPatch)\n        return earlierPatches\n      }\n      // find all preceding patches that are affected by this unset\n      const unaffected = earlierPatches.filter(\n        earlierPatch => !startsWith(laterPatch.path, earlierPatch.path),\n      )\n      unaffected.push(laterPatch)\n      return unaffected\n    },\n    [],\n  )\n}\n\nexport function compactSetPatches(patches: NodePatch[]) {\n  return patches.reduceRight(\n    (laterPatches: NodePatch[], earlierPatch: NodePatch) => {\n      const replacement = laterPatches.find(\n        later =>\n          supersedes(later.op, earlierPatch.op) &&\n          isEqualPath(later.path, earlierPatch.path),\n      )\n      if (replacement) {\n        // we already have another patch later in the chain that replaces this one\n        return laterPatches\n      }\n      laterPatches.unshift(earlierPatch)\n      return laterPatches\n    },\n    [],\n  )\n}\n\nexport function compactSetIfMissingPatches(patches: NodePatch[]) {\n  return patches.reduce(\n    (previousPatches: NodePatch[], laterPatch: NodePatch) => {\n      if (laterPatch.op.type !== 'setIfMissing') {\n        previousPatches.push(laterPatch)\n        return previousPatches\n      }\n      // look at preceding patches up until the first unset\n      const check = takeUntilRight(\n        previousPatches,\n        patch => patch.op.type === 'unset',\n      )\n      const precedent = check.find(\n        precedingPatch =>\n          precedingPatch.op.type === 'setIfMissing' &&\n          isEqualPath(precedingPatch.path, laterPatch.path),\n      )\n      if (precedent) {\n        // we already have an identical patch earlier in the chain that voids this one\n        return previousPatches\n      }\n      previousPatches.push(laterPatch)\n      return previousPatches\n    },\n    [],\n  )\n}\n\nexport function compactDMPSetPatches(\n  base: SanityDocumentBase,\n  patches: NodePatch[],\n) {\n  let edge = base\n  return patches.reduce(\n    (earlierPatches: NodePatch[], laterPatch: NodePatch) => {\n      const before = edge\n      edge = applyNodePatch(laterPatch, edge)\n      if (\n        laterPatch.op.type === 'set' &&\n        typeof laterPatch.op.value === 'string'\n      ) {\n        const current = getAtPath(laterPatch.path, before)\n        if (typeof current === 'string') {\n          // we can replace the earlier diffMatchPatches with a new one\n          const replaced: NodePatch = {\n            ...laterPatch,\n            op: {\n              type: 'diffMatchPatch',\n              value: stringifyPatches(\n                makePatches(current, laterPatch.op.value),\n              ),\n            },\n          }\n          return earlierPatches\n            .flatMap(ep => {\n              return isEqualPath(ep.path, laterPatch.path) &&\n                ep.op.type === 'diffMatchPatch'\n                ? []\n                : ep\n            })\n            .concat(replaced)\n        }\n      }\n      earlierPatches.push(laterPatch)\n      return earlierPatches\n    },\n    [],\n  )\n}\n","import {\n  type Mutation,\n  type NodePatch,\n  type PatchMutation,\n  type SanityDocumentBase,\n} from '../../mutations/types'\nimport {type MutationGroup} from '../types'\nimport {compactDMPSetPatches} from './squashNodePatches'\n\nexport interface DataStore {\n  get: (id: string) => SanityDocumentBase | undefined\n}\nexport function squashDMPStrings(\n  remote: DataStore,\n  mutationGroups: MutationGroup[],\n): MutationGroup[] {\n  return mutationGroups.map(mutationGroup => ({\n    ...mutationGroup,\n    mutations: dmpIfyMutations(remote, mutationGroup.mutations),\n  }))\n}\n\nexport function dmpIfyMutations(\n  store: DataStore,\n  mutations: Mutation[],\n): Mutation[] {\n  return mutations.map((mutation, i) => {\n    return mutation.type === 'patch'\n      ? dmpifyPatchMutation(store.get(mutation.id), mutation)\n      : mutation\n  })\n}\n\nexport function dmpifyPatchMutation(\n  base: SanityDocumentBase | undefined,\n  mutation: PatchMutation,\n): PatchMutation {\n  if (!base) {\n    return mutation\n  }\n  return {\n    ...mutation,\n    patches: compactDMPSetPatches(base, mutation.patches as NodePatch[]),\n  }\n}\n","import {type MutationGroup} from '../types'\n\n/**\n * Merges adjacent non-transactional mutation groups, interleaving transactional mutations as-is\n * @param mutationGroups\n */\nexport function mergeMutationGroups(\n  mutationGroups: MutationGroup[],\n): MutationGroup[] {\n  return chunkWhile(mutationGroups, group => !group.transaction).flatMap(\n    chunk => ({\n      ...chunk[0]!,\n      mutations: chunk.flatMap(c => c.mutations),\n    }),\n  )\n}\n\n/**\n * Groups subsequent mutations into transactions, leaves transactions as-is\n * @param arr\n * @param predicate\n */\nexport function chunkWhile<T>(\n  arr: T[],\n  predicate: (item: T) => boolean,\n): T[][] {\n  const res: T[][] = []\n  let currentChunk: T[] = []\n  arr.forEach(item => {\n    if (predicate(item)) {\n      currentChunk.push(item)\n    } else {\n      if (currentChunk.length > 0) {\n        res.push(currentChunk)\n      }\n      currentChunk = []\n      res.push([item])\n    }\n  })\n  if (currentChunk.length > 0) {\n    res.push(currentChunk)\n  }\n  return res\n}\n","import {groupBy} from 'lodash'\n\nimport {type Mutation, type NodePatch} from '../../mutations/types'\nimport {type MutationGroup} from '../types'\nimport {takeUntilRight} from '../utils/arrayUtils'\nimport {getMutationDocumentId} from '../utils/getMutationDocumentId'\nimport {mergeMutationGroups} from '../utils/mergeMutationGroups'\nimport {squashNodePatches} from './squashNodePatches'\n\nexport function squashMutationGroups(staged: MutationGroup[]): MutationGroup[] {\n  return mergeMutationGroups(staged)\n    .map(transaction => ({\n      ...transaction,\n      mutations: squashMutations(transaction.mutations),\n    }))\n    .map(transaction => ({\n      ...transaction,\n      mutations: transaction.mutations.map(mutation => {\n        if (mutation.type !== 'patch') {\n          return mutation\n        }\n        return {\n          ...mutation,\n          patches: squashNodePatches(mutation.patches as NodePatch[]),\n        }\n      }),\n    }))\n}\n\ntype FIXME = Mutation[]\n\n/*\n assumptions:\n the order documents appear with their mutations within the same transaction doesn't matter\n */\nexport function squashMutations(mutations: Mutation[]): Mutation[] {\n  const byDocument = groupBy(mutations, getMutationDocumentId)\n  return Object.values(byDocument).flatMap(documentMutations => {\n    // these are the mutations that happens for the document with <id> within the same transactions\n    return squashCreateIfNotExists(squashDelete(documentMutations as FIXME))\n      .flat()\n      .reduce((acc: Mutation[], docMutation) => {\n        const prev = acc[acc.length - 1]\n        if ((!prev || prev.type === 'patch') && docMutation.type === 'patch') {\n          return acc.slice(0, -1).concat({\n            ...docMutation,\n            patches: (prev?.patches || []).concat(docMutation.patches),\n          })\n        }\n        return acc.concat(docMutation)\n      }, [])\n  })\n}\n\n/**\n * WARNING: This assumes that the mutations are only for a single document\n * @param mutations\n */\nexport function squashCreateIfNotExists(mutations: Mutation[]): Mutation[] {\n  if (mutations.length === 0) {\n    return mutations\n  }\n\n  return mutations.reduce((previousMuts: Mutation[], laterMut: Mutation) => {\n    if (laterMut.type !== 'createIfNotExists') {\n      previousMuts.push(laterMut)\n      return previousMuts\n    }\n    const prev = takeUntilRight(previousMuts, m => m.type === 'delete')\n    const precedent = prev.find(\n      precedingPatch => precedingPatch.type === 'createIfNotExists',\n    )\n    if (precedent) {\n      // we already have an identical patch earlier in the chain that voids this one\n      return previousMuts\n    }\n    previousMuts.push(laterMut)\n    return previousMuts\n  }, [])\n}\n\nfunction squashDelete(mutations: Mutation[]): Mutation[] {\n  if (mutations.length === 0) {\n    return mutations\n  }\n\n  return mutations.reduce((previousMuts: Mutation[], laterMut: Mutation) => {\n    if (laterMut.type === 'delete') {\n      return [laterMut]\n    }\n    previousMuts.push(laterMut)\n    return previousMuts\n  }, [])\n}\n","import {applyPatches} from '../apply'\nimport {\n  type Mutation,\n  type NodePatch,\n  type PatchMutation,\n  type SanityDocumentBase,\n} from '../mutations/types'\nimport {getAtPath} from '../path'\nimport {applyAll} from './datasets/applyDocumentMutation'\nimport {compactDMPSetPatches} from './optimizations/squashNodePatches'\nimport {type MutationGroup} from './types'\nimport {getMutationDocumentId} from './utils/getMutationDocumentId'\n\ntype RebaseTransaction = {\n  mutations: Mutation[]\n}\n\ntype FlatMutation = Exclude<Mutation, PatchMutation>\n\nfunction flattenMutations(mutations: Mutation[]) {\n  return mutations.flatMap((mut): Mutation | Mutation[] => {\n    if (mut.type === 'patch') {\n      return mut.patches.map(\n        (patch): PatchMutation => ({\n          type: 'patch',\n          id: mut.id,\n          patches: [patch],\n        }),\n      )\n    }\n    return mut\n  })\n}\n\nexport function rebase(\n  documentId: string,\n  oldBase: SanityDocumentBase | undefined,\n  newBase: SanityDocumentBase | undefined,\n  stagedMutations: MutationGroup[],\n): [newStage: MutationGroup[], rebased: SanityDocumentBase | undefined] {\n  // const flattened = flattenMutations(newStage.flatMap(t => t.mutations))\n\n  // 1. get the dmpified mutations from the newStage based on the old base\n  // 2. apply those to the new base\n  // 3. convert those back into set patches based on the new base and return as a new newStage\n  let edge = oldBase\n  const dmpified = stagedMutations.map(transaction => {\n    const mutations = transaction.mutations.flatMap(mut => {\n      if (getMutationDocumentId(mut) !== documentId) {\n        return []\n      }\n      const before = edge\n      edge = applyAll(edge, [mut])\n      if (!before) {\n        return mut\n      }\n      if (mut.type !== 'patch') {\n        return mut\n      }\n      return {\n        type: 'dmpified' as const,\n        mutation: {\n          ...mut,\n          // Todo: make compactDMPSetPatches return pairs of patches that was dmpified with their\n          //  original as dmpPatches and original is not 1:1 (e..g some of the original may not be dmpified)\n          dmpPatches: compactDMPSetPatches(before, mut.patches as NodePatch[]),\n          original: mut.patches,\n        },\n      }\n    })\n    return {...transaction, mutations}\n  })\n\n  let newBaseWithDMPForOldBaseApplied: SanityDocumentBase | undefined = newBase\n  // NOTE: It might not be possible to apply them - if so, we fall back to applying the pending changes\n  // todo: revisit this\n  const appliedCleanly = dmpified.map(transaction => {\n    const applied = []\n    return transaction.mutations.forEach(mut => {\n      if (mut.type === 'dmpified') {\n        // go through all dmpified, try to apply, if they fail, use the original un-optimized set patch instead\n        try {\n          newBaseWithDMPForOldBaseApplied = applyPatches(\n            mut.mutation.dmpPatches,\n            newBaseWithDMPForOldBaseApplied,\n          )\n          applied.push(mut)\n        } catch (err) {\n          // eslint-disable-next-line no-console\n          console.warn('Failed to apply dmp patch, falling back to original')\n          try {\n            newBaseWithDMPForOldBaseApplied = applyPatches(\n              mut.mutation.original,\n              newBaseWithDMPForOldBaseApplied,\n            )\n            applied.push(mut)\n          } catch (second: any) {\n            throw new Error(\n              `Failed to apply patch for document \"${documentId}\": ${second.message}`,\n            )\n          }\n        }\n      } else {\n        newBaseWithDMPForOldBaseApplied = applyAll(\n          newBaseWithDMPForOldBaseApplied,\n          [mut],\n        )\n      }\n    })\n  })\n\n  const newStage = stagedMutations.map((transaction): MutationGroup => {\n    // update all set patches to set to the current value\n    return {\n      ...transaction,\n      mutations: transaction.mutations.map(mut => {\n        if (mut.type !== 'patch' || getMutationDocumentId(mut) !== documentId) {\n          return mut\n        }\n        return {\n          ...mut,\n          patches: mut.patches.map(patch => {\n            if (patch.op.type !== 'set') {\n              return patch\n            }\n            return {\n              ...patch,\n              op: {\n                ...patch.op,\n                value: getAtPath(patch.path, newBaseWithDMPForOldBaseApplied),\n              },\n            }\n          }),\n        }\n      }),\n    }\n  })\n  return [newStage, newBaseWithDMPForOldBaseApplied]\n}\n","import type {Transaction} from '../_unstable_store'\nimport type {MutationGroup} from './types'\n\nexport function toTransactions(groups: MutationGroup[]): Transaction[] {\n  return groups.map(group => {\n    if (group.transaction && group.id !== undefined) {\n      return {id: group.id!, mutations: group.mutations}\n    }\n    return {mutations: group.mutations}\n  })\n}\n"],"names":["patch"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}},
    {"offset": {"line": 4077, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4083, "column": 0}, "map": {"version":3,"file":"encode.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/encoders/sanity/encode.ts"],"sourcesContent":["import {\n  type Mutation,\n  type NodePatch,\n  type Transaction,\n} from '../../mutations/types'\nimport {stringify as stringifyPath} from '../../path/parser/stringify'\n\nexport function encode(mutation: Mutation) {\n  return encodeMutation(mutation)\n}\n\nexport function encodeAll(mutations: Mutation[]) {\n  return mutations.flatMap(encode)\n}\n\nexport function encodeTransaction(transaction: Transaction) {\n  return {\n    transactionId: transaction.id,\n    mutations: encodeAll(transaction.mutations),\n  }\n}\n\nexport function encodeMutation(mutation: Mutation) {\n  if (\n    mutation.type === 'create' ||\n    mutation.type === 'createIfNotExists' ||\n    mutation.type === 'createOrReplace'\n  ) {\n    return {[mutation.type]: mutation.document}\n  }\n  if (mutation.type === 'delete') {\n    return {\n      delete: {id: mutation.id},\n    }\n  }\n  const ifRevisionID = mutation.options?.ifRevision\n  return mutation.patches.map(patch => {\n    return {\n      patch: {\n        id: mutation.id,\n        ...(ifRevisionID && {ifRevisionID}),\n        ...patchToSanity(patch),\n      },\n    }\n  })\n}\n\nfunction patchToSanity(patch: NodePatch) {\n  const {path, op} = patch\n  if (op.type === 'unset') {\n    return {unset: [stringifyPath(path)]}\n  }\n  if (op.type === 'insert') {\n    return {\n      insert: {\n        [op.position]: stringifyPath([...path, op.referenceItem]),\n        items: op.items,\n      },\n    }\n  }\n  if (op.type === 'diffMatchPatch') {\n    return {diffMatchPatch: {[stringifyPath(path)]: op.value}}\n  }\n  if (op.type === 'inc') {\n    return {inc: {[stringifyPath(path)]: op.amount}}\n  }\n  if (op.type === 'dec') {\n    return {dec: {[stringifyPath(path)]: op.amount}}\n  }\n  if (op.type === 'set' || op.type === 'setIfMissing') {\n    return {[op.type]: {[stringifyPath(path)]: op.value}}\n  }\n  if (op.type === 'truncate') {\n    const range = [\n      op.startIndex,\n      typeof op.endIndex === 'number' ? op.endIndex : '',\n    ].join(':')\n\n    return {unset: [`${stringifyPath(path)}[${range}]`]}\n  }\n  if (op.type === 'upsert') {\n    // note: upsert currently not supported by sanity, so will always insert at reference position\n    return {\n      unset: op.items.map(item =>\n        stringifyPath([...path, {_key: (item as any)._key}]),\n      ),\n      insert: {\n        [op.position]: stringifyPath([...path, op.referenceItem]),\n        items: op.items,\n      },\n    }\n  }\n  if (op.type === 'assign') {\n    return {\n      set: Object.fromEntries(\n        Object.keys(op.value).map(key => [\n          stringifyPath(path.concat(key)),\n          op.value[key as keyof typeof op.value],\n        ]),\n      ),\n    }\n  }\n  if (op.type === 'unassign') {\n    return {\n      unset: op.keys.map(key => stringifyPath(path.concat(key))),\n    }\n  }\n  if (op.type === 'replace') {\n    return {\n      insert: {\n        replace: stringifyPath(path.concat(op.referenceItem)),\n        items: op.items,\n      },\n    }\n  }\n  if (op.type === 'remove') {\n    return {\n      unset: [stringifyPath(path.concat(op.referenceItem))],\n    }\n  }\n  //@ts-expect-error all cases should be covered\n  throw new Error(`Unknown operation type ${op.type}`)\n}\n"],"names":["stringifyPath"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4209, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4215, "column": 0}, "map": {"version":3,"file":"_unstable_machine.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/machine/listener.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/machine/documentMutatorMachine.ts"],"sourcesContent":["import {\n  type MutationEvent,\n  type ReconnectEvent,\n  type SanityClient,\n  type WelcomeEvent,\n} from '@sanity/client'\nimport {filter, merge, type ObservedValueOf, share, shareReplay} from 'rxjs'\n\n/**\n * Creates a single, shared, listener EventSource that strems remote mutations, and notifies when it's online (welcome), offline (reconnect).\n */\nexport function createSharedListener(client: SanityClient) {\n  const allEvents$ = client\n    .listen(\n      '*[!(_id in path(\"_.**\"))]',\n      {},\n      {\n        events: ['welcome', 'mutation', 'reconnect'],\n        includeResult: false,\n        includePreviousRevision: false,\n        visibility: 'transaction',\n        effectFormat: 'mendoza',\n        includeMutations: false,\n      },\n    )\n    .pipe(share({resetOnRefCountZero: true}))\n\n  // Reconnect events emitted in case the connection is lost\n  const reconnect = allEvents$.pipe(\n    filter((event): event is ReconnectEvent => event.type === 'reconnect'),\n  )\n\n  // Welcome events are emitted when the listener is (re)connected\n  const welcome = allEvents$.pipe(\n    filter((event): event is WelcomeEvent => event.type === 'welcome'),\n  )\n\n  // Mutation events coming from the listener\n  const mutations = allEvents$.pipe(\n    filter((event): event is MutationEvent => event.type === 'mutation'),\n  )\n\n  // Replay the latest connection event that was emitted either when the connection was disconnected ('reconnect'), established or re-established ('welcome')\n  const connectionEvent = merge(welcome, reconnect).pipe(\n    shareReplay({bufferSize: 1, refCount: true}),\n  )\n\n  // Emit the welcome event if the latest connection event was the 'welcome' event.\n  // Downstream subscribers will typically map the welcome event to an initial fetch\n  const replayWelcome = connectionEvent.pipe(\n    filter(latestConnectionEvent => latestConnectionEvent.type === 'welcome'),\n  )\n\n  // Combine into a single stream\n  return merge(replayWelcome, mutations, reconnect)\n}\n\nexport type SharedListenerEvents = ObservedValueOf<\n  ReturnType<typeof createSharedListener>\n>\n","import {\n  type MutationEvent,\n  type SanityClient,\n  type SanityDocument,\n} from '@sanity/client'\nimport {applyPatch, type RawPatch} from 'mendoza'\nimport {asapScheduler, defer, filter, observeOn} from 'rxjs'\nimport {\n  assertEvent,\n  assign,\n  enqueueActions,\n  fromEventObservable,\n  fromPromise,\n  raise,\n  sendParent,\n  setup,\n  spawnChild,\n  stopChild,\n} from 'xstate'\n\nimport {encodeTransaction, type Mutation} from '../encoders/sanity'\nimport {\n  type MutationGroup,\n  type SanityDocumentBase,\n  type Transaction,\n} from '../store'\nimport {applyMutations} from '../store/datasets/applyMutations'\nimport {commit} from '../store/datasets/commit'\nimport {squashDMPStrings} from '../store/optimizations/squashDMPStrings'\nimport {squashMutationGroups} from '../store/optimizations/squashMutations'\nimport {rebase} from '../store/rebase'\nimport {toTransactions} from '../store/toTransactions'\nimport {createSharedListener, type SharedListenerEvents} from './listener'\n\nexport interface DocumentMutatorMachineInput {\n  id: string\n  client: SanityClient\n  /** A shared listener can be provided, if not it'll be created using `client.listen()` */\n  sharedListener?: ReturnType<typeof createSharedListener>\n  /* Preferrably a LRU cache map that is compatible with an ES6 Map, and have documents that allow unique ids to a particular dataset */\n  cache?: Map<string, SanityDocument<DocumentType> | null>\n}\n\nexport type DocumentMutatorMachineParentEvent =\n  | {type: 'sync'; id: string; document: SanityDocumentBase}\n  | {\n      type: 'mutation'\n      id: string\n      effects: {apply: RawPatch}\n      previousRev: string\n      resultRev: string\n    }\n  | {type: 'rebased.local'; id: string; document: SanityDocumentBase}\n  | {type: 'rebased.remote'; id: string; document: SanityDocumentBase}\n  | {type: 'pristine'; id: string}\n\nexport const documentMutatorMachine = setup({\n  types: {} as {\n    children: {\n      getDocument: 'fetch remote snapshot'\n      submitTransactions: 'submit mutations as transactions'\n    }\n    tags: 'busy' | 'error' | 'ready'\n    context: {\n      client: SanityClient\n      /** A shared listener can be provided, if not it'll be created using `client.listen()` */\n      sharedListener?: ReturnType<typeof createSharedListener>\n      /** The document id */\n      id: string\n      /* Preferrably a LRU cache map that is compatible with an ES6 Map, and have documents that allow unique ids to a particular dataset */\n      cache?: Map<string, SanityDocument<DocumentType> | null>\n      /* The remote snapshot of what the document looks like in Content Lake, kept in sync by applying Mendoza patches in real time. undefined means it's unknown if it exists yet, null means its known that it doesn't exist. */\n      remote: SanityDocument<DocumentType> | null | undefined\n      /* Local snapshot, that is rebased to the remote snapshot whenever that snapshot changes, and allows optimistic local mutations. undefined means it's unknown if the document exists in content lake yet, if both `remote` and `local` is `null` it means it's known that it doesn't exist. If `remote` is defined, and `local` is `null` it means it's optimistically deleted. If `remote` is `null` and `local` defined then it's optimistically created. */\n      local: SanityDocument<DocumentType> | null | undefined\n      /* Remote mendoza mutation events, needs a better name to differentiate from optimistic mutations */\n      mutationEvents: MutationEvent[]\n      /* Track staged mutations that can be submitted */\n      stagedChanges: MutationGroup[]\n      /* Queue mutations mutations that should be staged after an ongoing submission settles */\n      stashedChanges: MutationGroup[]\n      /* Any kind of error object that the UI can parse and decide how to display/report */\n      error: unknown\n      /* Used for automatic retrying of loading the remote snapshot */\n      fetchRemoteSnapshotAttempts: number\n      /* Used for automatic retrying of submitting mutations to Content Lake as a transaction */\n      submitTransactionsAttempts: number\n    }\n    events:\n      | SharedListenerEvents\n      | {type: 'error'}\n      | {type: 'retry'}\n      | {type: 'connect'}\n      | {type: 'reconnect'}\n      | {type: 'welcome'}\n      | {type: 'mutate'; mutations: Mutation[]}\n      | {type: 'submit'}\n      | {\n          type: 'xstate.done.actor.getDocument'\n          output: SanityDocument<DocumentType>\n        }\n      | {\n          type: 'xstate.done.actor.submitTransactions'\n          output: undefined\n        }\n    input: DocumentMutatorMachineInput\n  },\n  actions: {\n    'assign error to context': assign({error: ({event}) => event}),\n    'clear error from context': assign({error: undefined}),\n    'connect to server-sent events': raise({type: 'connect'}),\n    'listen to server-sent events': spawnChild('server-sent events', {\n      id: 'listener',\n      input: ({context}) => ({\n        listener:\n          context.sharedListener || createSharedListener(context.client),\n        id: context.id,\n      }),\n    }),\n    'stop listening to server-sent events': stopChild('listener'),\n    'buffer remote mutation events': assign({\n      mutationEvents: ({event, context}) => {\n        assertEvent(event, 'mutation')\n        return [...context.mutationEvents, event]\n      },\n    }),\n    'restore stashed changes': assign({\n      stagedChanges: ({event, context}) => {\n        assertEvent(event, 'xstate.done.actor.submitTransactions')\n        return context.stashedChanges\n      },\n      stashedChanges: [],\n    }),\n    'rebase fetched remote snapshot': enqueueActions(({enqueue}) => {\n      enqueue.assign(({event, context}) => {\n        assertEvent(event, 'xstate.done.actor.getDocument')\n        const previousRemote = context.remote\n        let nextRemote = event.output\n\n        /**\n         * We assume all patches that happen while we're waiting for the document to resolve are already applied.\n         * But if we do see a patch that has the same revision as the document we just fetched, we should apply any patches following it\n         */\n        let seenCurrentRev = false\n        for (const patch of context.mutationEvents) {\n          if (\n            !patch.effects?.apply ||\n            (!patch.previousRev && patch.transition !== 'appear')\n          )\n            continue\n          if (!seenCurrentRev && patch.previousRev === nextRemote?._rev) {\n            seenCurrentRev = true\n          }\n          if (seenCurrentRev) {\n            nextRemote = applyMendozaPatch(\n              nextRemote,\n              patch.effects.apply,\n              patch.resultRev,\n            )\n          }\n        }\n\n        if (\n          context.cache &&\n          // If the shared cache don't have the document already we can just set it\n          (!context.cache.has(context.id) ||\n            // But when it's in the cache, make sure it's necessary to update it\n            context.cache.get(context.id)!._rev !== nextRemote?._rev)\n        ) {\n          context.cache.set(context.id, nextRemote as unknown as any)\n        }\n\n        const [stagedChanges, local] = rebase(\n          context.id,\n          // It's annoying to convert between null and undefined, reach consensus\n          previousRemote === null ? undefined : previousRemote,\n          nextRemote === null ? undefined : (nextRemote as unknown as any),\n          context.stagedChanges,\n        )\n\n        return {\n          remote: nextRemote as unknown as any,\n          local: local as unknown as any,\n          stagedChanges,\n          // Since the snapshot handler applies all the patches they are no longer needed, allow GC\n          mutationEvents: [],\n        }\n      })\n      enqueue.sendParent(\n        ({context}) =>\n          ({\n            type: 'rebased.remote',\n            id: context.id,\n            document: context.remote!,\n          }) satisfies DocumentMutatorMachineParentEvent,\n      )\n    }),\n    'apply mendoza patch': assign(({event, context}) => {\n      assertEvent(event, 'mutation')\n      const previousRemote = context.remote\n      // We have already seen this mutation\n      if (event.transactionId === previousRemote?._rev) {\n        return {}\n      }\n\n      const nextRemote = applyMendozaPatch(\n        previousRemote!,\n        event.effects!.apply,\n        event.resultRev,\n      )\n\n      if (\n        context.cache &&\n        // If the shared cache don't have the document already we can just set it\n        (!context.cache.has(context.id) ||\n          // But when it's in the cache, make sure it's necessary to update it\n          context.cache.get(context.id)!._rev !== nextRemote?._rev)\n      ) {\n        context.cache.set(context.id, nextRemote as unknown as any)\n      }\n\n      const [stagedChanges, local] = rebase(\n        context.id,\n        // It's annoying to convert between null and undefined, reach consensus\n        previousRemote === null ? undefined : previousRemote,\n        nextRemote === null ? undefined : (nextRemote as unknown as any),\n        context.stagedChanges,\n      )\n\n      return {\n        remote: nextRemote as unknown as any,\n        local: local as unknown as any,\n        stagedChanges,\n      }\n    }),\n    'increment fetch attempts': assign({\n      fetchRemoteSnapshotAttempts: ({context}) =>\n        context.fetchRemoteSnapshotAttempts + 1,\n    }),\n    'reset fetch attempts': assign({\n      fetchRemoteSnapshotAttempts: 0,\n    }),\n    'increment submit attempts': assign({\n      submitTransactionsAttempts: ({context}) =>\n        context.submitTransactionsAttempts + 1,\n    }),\n    'reset submit attempts': assign({\n      submitTransactionsAttempts: 0,\n    }),\n    'stage mutation': assign({\n      stagedChanges: ({event, context}) => {\n        assertEvent(event, 'mutate')\n        return [\n          ...context.stagedChanges,\n          {transaction: false, mutations: event.mutations},\n        ]\n      },\n    }),\n    'stash mutation': assign({\n      stashedChanges: ({event, context}) => {\n        assertEvent(event, 'mutate')\n        return [\n          ...context.stashedChanges,\n          {transaction: false, mutations: event.mutations},\n        ]\n      },\n    }),\n    'rebase local snapshot': enqueueActions(({enqueue}) => {\n      enqueue.assign({\n        local: ({event, context}) => {\n          assertEvent(event, 'mutate')\n          // @TODO would be helpful to not have to convert back and forth between maps\n          const localDataset = new Map()\n          if (context.local) {\n            localDataset.set(context.id, context.local)\n          }\n          // Apply mutations to local dataset (note: this is immutable, and doesn't change the dataset)\n          const results = applyMutations(event.mutations, localDataset)\n          // Write the updated results back to the \"local\" dataset\n          commit(results, localDataset)\n          // Read the result from the local dataset again\n          return localDataset.get(context.id)\n        },\n      })\n      enqueue.sendParent(\n        ({context}) =>\n          ({\n            type: 'rebased.local',\n            id: context.id,\n            document: context.local!,\n          }) satisfies DocumentMutatorMachineParentEvent,\n      )\n    }),\n    'send pristine event to parent': sendParent(\n      ({context}) =>\n        ({\n          type: 'pristine',\n          id: context.id,\n        }) satisfies DocumentMutatorMachineParentEvent,\n    ),\n    'send sync event to parent': sendParent(\n      ({context}) =>\n        ({\n          type: 'sync',\n          id: context.id,\n          document: context.remote!,\n        }) satisfies DocumentMutatorMachineParentEvent,\n    ),\n    'send mutation event to parent': sendParent(({context, event}) => {\n      assertEvent(event, 'mutation')\n      return {\n        type: 'mutation',\n        id: context.id,\n        previousRev: event.previousRev!,\n        resultRev: event.resultRev!,\n        effects: event.effects!,\n      } satisfies DocumentMutatorMachineParentEvent\n    }),\n  },\n  actors: {\n    'server-sent events': fromEventObservable(\n      ({\n        input,\n      }: {\n        input: {listener: ReturnType<typeof createSharedListener>; id: string}\n      }) => {\n        const {listener, id} = input\n        return defer(() => listener).pipe(\n          filter(\n            event =>\n              event.type === 'welcome' ||\n              event.type === 'reconnect' ||\n              (event.type === 'mutation' && event.documentId === id),\n          ),\n          // This is necessary to avoid sync emitted events from `shareReplay` from happening before the actor is ready to receive them\n          observeOn(asapScheduler),\n        )\n      },\n    ),\n    'fetch remote snapshot': fromPromise(\n      async ({\n        input,\n        signal,\n      }: {\n        input: {client: SanityClient; id: string}\n        signal: AbortSignal\n      }) => {\n        const {client, id} = input\n        const document = await client\n          .getDocument(id, {\n            signal,\n          })\n          .catch(e => {\n            if (e instanceof Error && e.name === 'AbortError') return\n            throw e\n          })\n\n        return document\n      },\n    ),\n    'submit mutations as transactions': fromPromise(\n      async ({\n        input,\n        signal,\n      }: {\n        input: {client: SanityClient; transactions: Transaction[]}\n        signal: AbortSignal\n      }) => {\n        const {client, transactions} = input\n        for (const transaction of transactions) {\n          if (signal.aborted) return\n          await client\n            .dataRequest('mutate', encodeTransaction(transaction), {\n              visibility: 'async',\n              returnDocuments: false,\n              signal,\n            })\n            .catch(e => {\n              if (e instanceof Error && e.name === 'AbortError') return\n              throw e\n            })\n        }\n      },\n    ),\n  },\n  delays: {\n    // Exponential backoff delay function\n    fetchRemoteSnapshotTimeout: ({context}) =>\n      Math.pow(2, context.fetchRemoteSnapshotAttempts) * 1000,\n    submitTransactionsTimeout: ({context}) =>\n      Math.pow(2, context.submitTransactionsAttempts) * 1000,\n  },\n}).createMachine({\n  /** @xstate-layout N4IgpgJg5mDOIC5QQPYGMCuBbMA7ALgLRYb4CG+KATgMQnn5gDaADALqKgAOKsAlvj4pcnEAA9EADhYAWAHQA2GSwUBmAKwBOaQEZJkhQBoQAT0Q6ATAF8rx1JhwFipCtTkQ+sNMNxg0jCBpvXF9-Vg4kEB5+QWFRCQQLFhY5PQB2dRU1SQsdGSVjMwRlHTkWNM00nR1VKryKmzt0bDwielcqOWDQwVwoGgB3MAAbbxxw0WiBIRFIhPUKuQ1NVU0tTU0WFdVCxAt1dTlNhX2WdRltGUk061sQexandspO7r9e-qo-H3eJyKnYrNQPNJJollpVutNttdghVCo5MoTgoMpo8jIkqpGvdmo42i4Xl0fv4+H0aGAqFRqH9uLxpnE5ogFrCLFd5CtNBYFJkdOpuaosXcHnjnAw3G9-AAxMh8YYYL5BYn4GlROmA+KIFEs1R6ORpZYWHIXGR6bHC1qijpyL4Sj6DEZjZjsSZqmYaxK1ORcvlc-ZqSoyNKwnRpGTyK4WDK5BQ6BQ5BRm3EW55uG1K0n9ClUqgqgFuxketJe7nIv2rUNB0x7LmSL2qGMsSySevcmSJhzJgnipWQOgEma510M4HmcqHZYyWqaOMqTQyWGh0osVSGiwC5uGyftx74sWvHuBNMhX7O-5DoHiPae72lvnlwPBydFlRVS7qPIl7cilP74-+SByMMKBkB4ZKoL4cikgAbigADWYByDA+AACJJgQg4xPmI7FHkZQrKGsjqKcCiaMG9YpJOxySBiCiyPoX6dnuRJ-gEgHAaBmaUm4XDDBQABm1BYIhYAoWhyqnrSmHDpeCAKCicjUbU6g6nkFichYsJrLWVxaPsk7KdICZCmJlqEraAFASBvbPAOEmqlJF4JJURbVDcy4Yvk1GVkUsabApMjKZGqjNg2kgMU8Xa-j0FnsQBXBUJ4vRgH2DBOhEkn0o5TLKV6y6WDG6lhkYVYIDoKzyBkeR8pUDZqOFu5WuZEBsVZzUeFQ+AmDQsAYAARlgAgYZl7o6I2tYLJINSSO+3JaMGlQpGkhFhryo2jW2xkdhFTFNS1EAAT1-UCHa4EIdBcEIYdA34AAKlQZC4LAZAksIsBDeqBbrdpym8iuByxlcLK5BYqQLBUZyTcFvL1aZ3YsTFrVyFdx0ZuSXGdDx-GCUjfXXXdD1PS9j3vVhMnrWCFRxtNaRLdcfIsiwuS5fkgZaOUlhpDDP7MdFzWWftzXI-gdrPGlLoOSNyiHFstRySisjcgzahyFoUYBbRsac5tO6w1F7wIwLONHfg0qyvKyVfPgVAmCT0kJGt41pJD02xgcpElUkcZ6rI+q5JcckbU0W0NWZB57QduMCKbcoKmIsCpXIZB8YwVAABRC-jj3PYCsA3XwOAoKQACUNDmttjVh-zEfG9H5u21lpVjSrTtTTNbsstUYJJAFWgA37XORTz+t8+xtcKpb1v1+6KJFopGQqRi6nBlstYcqNK5riusYDztlejzKMfJXHCdJynqd8SJaAABYAEpgFgKCMAAyrgZBcLAV+P3nBfF6XJnc7tfmY8xZnglgWGe-klILzUhYDSJVRpnCONNOcWxWRKBRDYO4uAUD7XgJEMuIdqDi2GgWQgOhgxMyRKyFc8IuQkXUDvK0HgvAHmIR9bCD4SoeSWCoLkoZpxrmXIw0OLEMxsNJgkSc418KhnrHyG4oZYTcPhMifhJx4SCiDjrABSpgHiLtogAUhwW77DRIGXkk55wexKCrJQsg1jBTnPsYRqZviiL6PohuORgyhhBhGKMsZYzxhcXrf8EBPHulUJOPCtRlABWIu7IoORVBIIhMpNYGJyghKHmEvaYjQEkOwhkxQrJtBES0JDOBPlkgKD1JYZSjZORyTXNkwBsVwkFPYTJVYS58JxPKbOYM0gUj7FjGcEMOpciaJxMHXWOTWJV2avFRKpIwARILJRGJBF4mZBIkDE0KtIxLSSDkDYGhWl70Ru1Tq6zsLURBkoLyWRmz8PmlUZmcY1zXDKdMghcy2mIyFh8W5ZN4RFmOFyKaZwiLeT2GVJcy5pBrguCiMK2tvyDwBYbIWejOkSMQBkeQORJq0RNCUDIDNondxuGpPQmRqIXPhiPECuKMpdMkbILZ-SEnLxyjqOJMZsj1jRTYIAA */\n\n  id: 'document-mutator',\n\n  context: ({input}) => ({\n    client: input.client.withConfig({allowReconfigure: false}),\n    sharedListener: input.sharedListener,\n    id: input.id,\n    remote: undefined,\n    local: undefined,\n    mutationEvents: [],\n    stagedChanges: [],\n    stashedChanges: [],\n    error: undefined,\n    fetchRemoteSnapshotAttempts: 0,\n    submitTransactionsAttempts: 0,\n    cache: input.cache,\n  }),\n\n  // Auto start the connection by default\n  entry: ['connect to server-sent events'],\n\n  on: {\n    mutate: {\n      actions: ['rebase local snapshot', 'stage mutation'],\n    },\n  },\n  initial: 'disconnected',\n  states: {\n    disconnected: {\n      on: {\n        connect: {\n          target: 'connecting',\n          actions: ['listen to server-sent events'],\n        },\n      },\n    },\n    connecting: {\n      on: {\n        welcome: 'connected',\n        reconnect: 'reconnecting',\n        error: 'connectFailure',\n      },\n      tags: ['busy'],\n    },\n    connectFailure: {\n      on: {\n        connect: {\n          target: 'connecting',\n          actions: ['listen to server-sent events'],\n        },\n      },\n      entry: [\n        'stop listening to server-sent events',\n        'assign error to context',\n      ],\n      exit: ['clear error from context'],\n      tags: ['error'],\n    },\n    reconnecting: {\n      on: {\n        welcome: {\n          target: 'connected',\n        },\n        error: {\n          target: 'connectFailure',\n        },\n      },\n      tags: ['busy', 'error'],\n    },\n    connected: {\n      on: {\n        mutation: {\n          actions: ['buffer remote mutation events'],\n        },\n        reconnect: 'reconnecting',\n      },\n      entry: ['clear error from context'],\n      initial: 'loading',\n      states: {\n        loading: {\n          invoke: {\n            src: 'fetch remote snapshot',\n            id: 'getDocument',\n            input: ({context}) => ({\n              client: context.client,\n              id: context.id,\n            }),\n            onError: {\n              target: 'loadFailure',\n            },\n            onDone: {\n              target: 'loaded',\n              actions: [\n                'rebase fetched remote snapshot',\n                'reset fetch attempts',\n              ],\n            },\n          },\n\n          tags: ['busy'],\n        },\n\n        loaded: {\n          entry: ['send sync event to parent'],\n          on: {\n            mutation: {\n              actions: ['apply mendoza patch', 'send mutation event to parent'],\n            },\n          },\n          initial: 'pristine',\n\n          states: {\n            pristine: {\n              on: {\n                mutate: {\n                  actions: ['rebase local snapshot', 'stage mutation'],\n                  target: 'dirty',\n                },\n              },\n              tags: ['ready'],\n            },\n            dirty: {\n              on: {\n                submit: 'submitting',\n              },\n              tags: ['ready'],\n            },\n            submitting: {\n              on: {\n                mutate: {\n                  actions: ['rebase local snapshot', 'stash mutation'],\n                },\n              },\n              invoke: {\n                src: 'submit mutations as transactions',\n                id: 'submitTransactions',\n                input: ({context}) => {\n                  // @TODO perhaps separate utils to be lower level and operate on single documents at a time instead of expecting a local dataset\n                  const remoteDataset = new Map()\n                  remoteDataset.set(context.id, context.remote)\n                  return {\n                    client: context.client,\n                    transactions: toTransactions(\n                      // Squashing DMP strings is the last thing we do before submitting\n                      squashDMPStrings(\n                        remoteDataset,\n                        squashMutationGroups(context.stagedChanges),\n                      ),\n                    ),\n                  }\n                },\n                onError: {\n                  target: 'submitFailure',\n                },\n\n                onDone: {\n                  target: 'pristine',\n                  actions: [\n                    'restore stashed changes',\n                    'reset submit attempts',\n                    'send pristine event to parent',\n                  ],\n                },\n              },\n              /**\n               * 'busy' means we should show a spinner, 'ready' means we can still accept mutations, they'll be applied optimistically right away, and queued for submissions after the current submission settles\n               */\n              tags: ['busy', 'ready'],\n            },\n            submitFailure: {\n              exit: ['clear error from context'],\n              after: {\n                submitTransactionsTimeout: {\n                  actions: ['increment submit attempts'],\n                  target: 'submitting',\n                },\n              },\n              on: {\n                retry: 'submitting',\n              },\n              /**\n               * How can it be both `ready` and `error`? `ready` means it can receive mutations, optimistically apply them, and queue them for submission. `error` means it failed to submit previously applied mutations.\n               * It's completely fine to keep queueing up more mutations and applying them optimistically, while showing UI that notifies that mutations didn't submit, and show a count down until the next automatic retry.\n               */\n              tags: ['error', 'ready'],\n            },\n          },\n        },\n\n        loadFailure: {\n          exit: ['clear error from context'],\n          after: {\n            fetchRemoteSnapshotTimeout: {\n              actions: ['increment fetch attempts'],\n              target: 'loading',\n            },\n          },\n          on: {\n            retry: 'loading',\n          },\n          tags: ['error'],\n        },\n      },\n    },\n  },\n})\n\nfunction applyMendozaPatch<const DocumentType extends SanityDocumentBase>(\n  document: DocumentType | undefined,\n  patch: RawPatch,\n  nextRevision: string | undefined,\n) {\n  const next = applyPatch(omitRev(document), patch)\n  if (!next) {\n    return null\n  }\n  return Object.assign(next, {_rev: nextRevision})\n}\n\nfunction omitRev<const DocumentType extends SanityDocumentBase>(\n  document: DocumentType | undefined,\n) {\n  if (!document) {\n    return null\n  }\n  // eslint-disable-next-line unused-imports/no-unused-vars\n  const {_rev, ...doc} = document\n  return doc\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAWO,SAAS,qBAAqB,MAAA,EAAsB;IACzD,MAAM,aAAa,OAChB,MAAA,CACC,6BACA,CAAC,GACD;QACE,QAAQ;YAAC;YAAW;YAAY,WAAW;SAAA;QAC3C,eAAe,CAAA;QACf,yBAAyB,CAAA;QACzB,YAAY;QACZ,cAAc;QACd,kBAAkB,CAAA;IAAA,GAGrB,IAAA,kJAAK,QAAA,EAAM;QAAC,qBAAqB,CAAA;IAAA,CAAK,CAAC,GAGpC,YAAY,WAAW,IAAA,CAC3B,0JAAA,EAAO,CAAC,QAAmC,MAAM,IAAA,KAAS,WAAW,IAIjE,UAAU,WAAW,IAAA,kJACzB,SAAA,EAAO,CAAC,QAAiC,MAAM,IAAA,KAAS,SAAS,IAI7D,YAAY,WAAW,IAAA,iJAC3B,UAAA,EAAO,CAAC,QAAkC,MAAM,IAAA,KAAS,UAAU,IAU/D,iKANkB,QAAA,EAAM,SAAS,SAAS,EAAE,IAAA,kJAChD,cAAA,EAAY;QAAC,YAAY;QAAG,UAAU,CAAA;IAAK,CAAA,GAKP,IAAA,kJACpC,SAAA,EAAO,CAAA,wBAAyB,sBAAsB,IAAA,KAAS,SAAS;IAInE,wJAAA,QAAA,EAAM,eAAe,WAAW,SAAS;AAClD;ACCO,MAAM,4MAAyB,QAAA,EAAM;IAC1C,OAAO,CAAC;IAkDR,SAAS;QACP,2BAA2B,oNAAA,EAAO;YAAC,OAAO,CAAC,EAAC,KAAA,CAAA,CAAA,GAAW;QAAA,CAAM;QAC7D,uOAA4B,SAAA,EAAO;YAAC,OAAO,KAAA;QAAA,CAAU;QACrD,6OAAiC,QAAA,EAAM;YAAC,MAAM;QAAA,CAAU;QACxD,gPAAgC,cAAA,EAAW,sBAAsB;YAC/D,IAAI;YACJ,OAAO,CAAC,EAAC,OAAA,EAAA,GAAA,CAAc;oBACrB,UACE,QAAQ,cAAA,IAAkB,qBAAqB,QAAQ,MAAM;oBAC/D,IAAI,QAAQ,EAAA;gBACd,CAAA;QAAA,CACD;QACD,4CAAwC,wNAAA,EAAU,UAAU;QAC5D,4OAAiC,SAAA,EAAO;YACtC,gBAAgB,CAAC,EAAC,KAAA,EAAO,OAAA,CACvB,CAAA,GAAA,oLAAA,cAAA,EAAY,OAAO,UAAU,GACtB,CAAC;uBAAG,QAAQ,cAAA;oBAAgB,KAAK;iBAAA;QAAA,CAE3C;QACD,sOAA2B,SAAA,EAAO;YAChC,eAAe,CAAC,EAAC,KAAA,EAAO,OAAA,EAAA,GAAA,CACtB,iMAAA,EAAY,OAAO,sCAAsC,GAClD,QAAQ,cAAA;YAEjB,gBAAgB,CAAA,CAAA;QAAC,CAClB;QACD,qPAAkC,iBAAA,EAAe,CAAC,EAAC,OAAA,EAAA,KAAa;YAC9D,QAAQ,MAAA,CAAO,CAAC,EAAC,KAAA,EAAO,OAAA,EAAA,KAAa;gBACnC,CAAA,GAAA,8KAAA,CAAA,cAAA,EAAY,OAAO,+BAA+B;gBAClD,MAAM,iBAAiB,QAAQ,MAAA;gBAC3B,IAAA,aAAa,MAAM,MAAA,EAMnB,iBAAiB,CAAA;gBACrB,KAAA,MAAW,SAAS,QAAQ,cAAA,CAExB,CAAC,MAAM,OAAA,EAAS,SACf,CAAC,MAAM,WAAA,IAAe,MAAM,UAAA,KAAe,YAAA,CAG1C,CAAC,kBAAkB,MAAM,WAAA,KAAgB,YAAY,QAAA,CACvD,iBAAiB,CAAA,CAAA,GAEf,kBAAA,CACF,aAAa,kBACX,YACA,MAAM,OAAA,CAAQ,KAAA,EACd,MAAM,SAAA,CAAA,CAAA;gBAMV,QAAQ,KAAA,IAAA,yEAAA;gBAAA,CAEP,CAAC,QAAQ,KAAA,CAAM,GAAA,CAAI,QAAQ,EAAE,KAAA,oEAAA;gBAE5B,QAAQ,KAAA,CAAM,GAAA,CAAI,QAAQ,EAAE,EAAG,IAAA,KAAS,YAAY,IAAA,KAEtD,QAAQ,KAAA,CAAM,GAAA,CAAI,QAAQ,EAAA,EAAI,UAA4B;gBAGtD,MAAA,CAAC,eAAe,KAAK,CAAA,uNAAI,SAAA,EAC7B,QAAQ,EAAA,EAAA,uEAAA;gBAER,mBAAmB,OAAO,KAAA,IAAY,gBACtC,eAAe,OAAO,KAAA,IAAa,YACnC,QAAQ,aAAA;gBAGH,OAAA;oBACL,QAAQ;oBACR;oBACA;oBAAA,yFAAA;oBAEA,gBAAgB,CAAA,CAAA;gBAClB;YAAA,CACD,GACD,QAAQ,UAAA,CACN,CAAC,EAAC,OAAA,CAAA,CAAA,GAAA,CACC;oBACC,MAAM;oBACN,IAAI,QAAQ,EAAA;oBACZ,UAAU,QAAQ,MAAA;gBACpB,CAAA;QACJ,CACD;QACD,kOAAuB,SAAA,EAAO,CAAC,EAAC,KAAA,EAAO,OAAA,EAAA,KAAa;YAClD,CAAA,GAAA,8KAAA,CAAA,cAAA,EAAY,OAAO,UAAU;YAC7B,MAAM,iBAAiB,QAAQ,MAAA;YAE3B,IAAA,MAAM,aAAA,KAAkB,gBAAgB,MAC1C,OAAO,CAAC;YAGV,MAAM,aAAa,kBACjB,gBACA,MAAM,OAAA,CAAS,KAAA,EACf,MAAM,SAAA;YAIN,QAAQ,KAAA,IAAA,yEAAA;YAAA,CAEP,CAAC,QAAQ,KAAA,CAAM,GAAA,CAAI,QAAQ,EAAE,KAAA,oEAAA;YAE5B,QAAQ,KAAA,CAAM,GAAA,CAAI,QAAQ,EAAE,EAAG,IAAA,KAAS,YAAY,IAAA,KAEtD,QAAQ,KAAA,CAAM,GAAA,CAAI,QAAQ,EAAA,EAAI,UAA4B;YAGtD,MAAA,CAAC,eAAe,KAAK,CAAA,uNAAI,SAAA,EAC7B,QAAQ,EAAA,EAAA,uEAAA;YAER,mBAAmB,OAAO,KAAA,IAAY,gBACtC,eAAe,OAAO,KAAA,IAAa,YACnC,QAAQ,aAAA;YAGH,OAAA;gBACL,QAAQ;gBACR;gBACA;YACF;QAAA,CACD;QACD,4BAA4B,oNAAA,EAAO;YACjC,6BAA6B,CAAC,EAAC,OAAA,EAAA,GAC7B,QAAQ,2BAAA,GAA8B;QAAA,CACzC;QACD,mOAAwB,SAAA,EAAO;YAC7B,6BAA6B;QAAA,CAC9B;QACD,iCAA6B,gNAAA,EAAO;YAClC,4BAA4B,CAAC,EAAC,OAAA,EAAA,GAC5B,QAAQ,0BAAA,GAA6B;QAAA,CACxC;QACD,oOAAyB,SAAA,EAAO;YAC9B,4BAA4B;QAAA,CAC7B;QACD,4NAAkB,UAAA,EAAO;YACvB,eAAe,CAAC,EAAC,KAAA,EAAO,OAAA,CACtB,CAAA,GAAA,oLAAA,cAAA,EAAY,OAAO,QAAQ,GACpB;uBACF,QAAQ,aAAA;oBACX;wBAAC,aAAa,CAAA;wBAAO,WAAW,MAAM,SAAA;oBAAS;iBACjD;QAAA,CAEH;QACD,6NAAkB,SAAA,EAAO;YACvB,gBAAgB,CAAC,EAAC,KAAA,EAAO,OAAA,CACvB,CAAA,GAAA,oLAAA,cAAA,EAAY,OAAO,QAAQ,GACpB;uBACF,QAAQ,cAAA;oBACX;wBAAC,aAAa,CAAA;wBAAO,WAAW,MAAM,SAAA;oBAAS;iBACjD;QAAA,CAEH;QACD,4OAAyB,iBAAA,EAAe,CAAC,EAAC,OAAA,EAAA,KAAa;YACrD,QAAQ,MAAA,CAAO;gBACb,OAAO,CAAC,EAAC,KAAA,EAAO,OAAA,EAAA,KAAa;oBAC3B,CAAA,GAAA,8KAAA,CAAA,cAAA,EAAY,OAAO,QAAQ;oBAErB,MAAA,eAAA,aAAA,GAAA,IAAmB,IAAI;oBACzB,QAAQ,KAAA,IACV,aAAa,GAAA,CAAI,QAAQ,EAAA,EAAI,QAAQ,KAAK;oBAG5C,MAAM,cAAU,iOAAA,EAAe,MAAM,SAAA,EAAW,YAAY;oBAE5D,2NAAA,SAAA,EAAO,SAAS,YAAY,GAErB,aAAa,GAAA,CAAI,QAAQ,EAAE;gBAAA;YACpC,CACD,GACD,QAAQ,UAAA,CACN,CAAC,EAAC,OAAA,CAAA,CAAA,GAAA,CACC;oBACC,MAAM;oBACN,IAAI,QAAQ,EAAA;oBACZ,UAAU,QAAQ,KAAA;gBACpB,CAAA;QACJ,CACD;QACD,iCAAiC,4NAAA,EAC/B,CAAC,EAAC,OAAA,CAAA,CAAA,GAAA,CACC;gBACC,MAAM;gBACN,IAAI,QAAQ,EAAA;YACd,CAAA;QAEJ,6BAA6B,4NAAA,EAC3B,CAAC,EAAC,OAAA,CAAA,CAAA,GAAA,CACC;gBACC,MAAM;gBACN,IAAI,QAAQ,EAAA;gBACZ,UAAU,QAAQ,MAAA;YACpB,CAAA;QAEJ,gPAAiC,aAAA,EAAW,CAAC,EAAC,OAAA,EAAS,KAAA,EAAA,GAAA,oLACrD,cAAA,EAAY,OAAO,UAAU,GACtB;gBACL,MAAM;gBACN,IAAI,QAAQ,EAAA;gBACZ,aAAa,MAAM,WAAA;gBACnB,WAAW,MAAM,SAAA;gBACjB,SAAS,MAAM,OAAA;YAAA,CAAA,CAElB;IACH;IACA,QAAQ;QACN,6MAAsB,sBAAA,EACpB,CAAC,EACC,KAAA,EAAA,KAGI;YACE,MAAA,EAAC,QAAA,EAAU,EAAA,CAAA,CAAA,GAAM;YAChB,wJAAA,QAAA,EAAM,IAAM,QAAQ,EAAE,IAAA,kJAC3B,SAAA,EACE,CAAA,QACE,MAAM,IAAA,KAAS,aACf,MAAM,IAAA,KAAS,eACd,MAAM,IAAA,KAAS,cAAc,MAAM,UAAA,KAAe,KACvD,6HAAA;gBAEA,yJAAA,+IAAU,gBAAa;QACzB;QAGJ,gNAAyB,cAAA,EACvB,OAAO,EACL,KAAA,EACA,MAAA,EAAA,KAII;YACE,MAAA,EAAC,MAAA,EAAQ,EAAA,CAAA,CAAA,GAAM;YACJ,OAAA,MAAM,OACpB,WAAA,CAAY,IAAI;gBACf;YAAA,CACD,EACA,KAAA,CAAM,CAAK,MAAA;gBACN,IAAA,CAAA,CAAA,aAAa,SAAS,EAAE,IAAA,KAAS,YAAA,GAC/B,MAAA;YAAA,CACP;QAAA;QAKP,2NAAoC,cAAA,EAClC,OAAO,EACL,KAAA,EACA,MAAA,EAAA,KAII;YACE,MAAA,EAAC,MAAA,EAAQ,YAAA,CAAA,CAAA,GAAgB;YAC/B,KAAA,MAAW,eAAe,aAAc;gBACtC,IAAI,OAAO,OAAA,CAAS,CAAA;gBACpB,MAAM,OACH,WAAA,CAAY,sNAAU,oBAAA,EAAkB,WAAW,GAAG;oBACrD,YAAY;oBACZ,iBAAiB,CAAA;oBACjB;gBAAA,CACD,EACA,KAAA,CAAM,CAAK,MAAA;oBACN,IAAA,CAAA,CAAA,aAAa,SAAS,EAAE,IAAA,KAAS,YAAA,GAC/B,MAAA;gBAAA,CACP;YAAA;QACL;IAGN;IACA,QAAQ;QAAA,qCAAA;QAEN,4BAA4B,CAAC,EAAC,OAAA,CAAO,CAAA,GACnC,KAAK,GAAA,CAAI,GAAG,QAAQ,2BAA2B,IAAI;QACrD,2BAA2B,CAAC,EAAC,OAAA,EAAA,GAC3B,KAAK,GAAA,CAAI,GAAG,QAAQ,0BAA0B,IAAI;IAAA;AAExD,CAAC,EAAE,aAAA,CAAc;IAAA,onEAAA,GAGf,IAAI;IAEJ,SAAS,CAAC,EAAC,KAAA,EAAA,GAAA,CAAY;YACrB,QAAQ,MAAM,MAAA,CAAO,UAAA,CAAW;gBAAC,kBAAkB,CAAA;YAAA,CAAM;YACzD,gBAAgB,MAAM,cAAA;YACtB,IAAI,MAAM,EAAA;YACV,QAAQ,KAAA;YACR,OAAO,KAAA;YACP,gBAAgB,CAAC,CAAA;YACjB,eAAe,CAAC,CAAA;YAChB,gBAAgB,CAAC,CAAA;YACjB,OAAO,KAAA;YACP,6BAA6B;YAC7B,4BAA4B;YAC5B,OAAO,MAAM,KAAA;QAAA,CAAA;IAAA,uCAAA;IAIf,OAAO;QAAC,+BAA+B;KAAA;IAEvC,IAAI;QACF,QAAQ;YACN,SAAS;gBAAC;gBAAyB,gBAAgB;aAAA;QAAA;IAEvD;IACA,SAAS;IACT,QAAQ;QACN,cAAc;YACZ,IAAI;gBACF,SAAS;oBACP,QAAQ;oBACR,SAAS;wBAAC,8BAA8B;qBAAA;gBAAA;YAC1C;QAEJ;QACA,YAAY;YACV,IAAI;gBACF,SAAS;gBACT,WAAW;gBACX,OAAO;YACT;YACA,MAAM;gBAAC,MAAM;aAAA;QACf;QACA,gBAAgB;YACd,IAAI;gBACF,SAAS;oBACP,QAAQ;oBACR,SAAS;wBAAC,8BAA8B;qBAAA;gBAAA;YAE5C;YACA,OAAO;gBACL;gBACA;aACF;YACA,MAAM;gBAAC,0BAA0B;aAAA;YACjC,MAAM;gBAAC,OAAO;aAAA;QAChB;QACA,cAAc;YACZ,IAAI;gBACF,SAAS;oBACP,QAAQ;gBACV;gBACA,OAAO;oBACL,QAAQ;gBAAA;YAEZ;YACA,MAAM;gBAAC;gBAAQ,OAAO;aAAA;QACxB;QACA,WAAW;YACT,IAAI;gBACF,UAAU;oBACR,SAAS;wBAAC,+BAA+B;qBAAA;gBAC3C;gBACA,WAAW;YACb;YACA,OAAO;gBAAC,0BAA0B;aAAA;YAClC,SAAS;YACT,QAAQ;gBACN,SAAS;oBACP,QAAQ;wBACN,KAAK;wBACL,IAAI;wBACJ,OAAO,CAAC,EAAC,OAAA,EAAA,GAAA,CAAc;gCACrB,QAAQ,QAAQ,MAAA;gCAChB,IAAI,QAAQ,EAAA;4BAAA,CAAA;wBAEd,SAAS;4BACP,QAAQ;wBACV;wBACA,QAAQ;4BACN,QAAQ;4BACR,SAAS;gCACP;gCACA;6BAAA;wBACF;oBAEJ;oBAEA,MAAM;wBAAC,MAAM;qBAAA;gBACf;gBAEA,QAAQ;oBACN,OAAO;wBAAC,2BAA2B;qBAAA;oBACnC,IAAI;wBACF,UAAU;4BACR,SAAS;gCAAC;gCAAuB,+BAA+B;6BAAA;wBAAA;oBAEpE;oBACA,SAAS;oBAET,QAAQ;wBACN,UAAU;4BACR,IAAI;gCACF,QAAQ;oCACN,SAAS;wCAAC;wCAAyB,gBAAgB;qCAAA;oCACnD,QAAQ;gCAAA;4BAEZ;4BACA,MAAM;gCAAC,OAAO;6BAAA;wBAChB;wBACA,OAAO;4BACL,IAAI;gCACF,QAAQ;4BACV;4BACA,MAAM;gCAAC,OAAO;6BAAA;wBAChB;wBACA,YAAY;4BACV,IAAI;gCACF,QAAQ;oCACN,SAAS;wCAAC;wCAAyB,gBAAgB;qCAAA;gCAAA;4BAEvD;4BACA,QAAQ;gCACN,KAAK;gCACL,IAAI;gCACJ,OAAO,CAAC,EAAC,OAAA,EAAA,KAAa;oCAEd,MAAA,gBAAA,aAAA,GAAA,IAAoB,IAAI;oCAC9B,OAAA,cAAc,GAAA,CAAI,QAAQ,EAAA,EAAI,QAAQ,MAAM,GACrC;wCACL,QAAQ,QAAQ,MAAA;wCAChB,kOAAc,iBAAA,EAAA,kEAAA;wCAEZ,uOAAA,EACE,mOACA,uBAAA,EAAqB,QAAQ,aAAa;oCAGhD;gCACF;gCACA,SAAS;oCACP,QAAQ;gCACV;gCAEA,QAAQ;oCACN,QAAQ;oCACR,SAAS;wCACP;wCACA;wCACA;qCAAA;gCACF;4BAEJ;4BAAA;;eAAA,GAIA,MAAM;gCAAC;gCAAQ,OAAO;6BAAA;wBACxB;wBACA,eAAe;4BACb,MAAM;gCAAC,0BAA0B;6BAAA;4BACjC,OAAO;gCACL,2BAA2B;oCACzB,SAAS;wCAAC,2BAA2B;qCAAA;oCACrC,QAAQ;gCAAA;4BAEZ;4BACA,IAAI;gCACF,OAAO;4BACT;4BAAA;;;eAAA,GAKA,MAAM;gCAAC;gCAAS,OAAO;6BAAA;wBAAA;oBACzB;gBAEJ;gBAEA,aAAa;oBACX,MAAM;wBAAC,0BAA0B;qBAAA;oBACjC,OAAO;wBACL,4BAA4B;4BAC1B,SAAS;gCAAC,0BAA0B;6BAAA;4BACpC,QAAQ;wBAAA;oBAEZ;oBACA,IAAI;wBACF,OAAO;oBACT;oBACA,MAAM;wBAAC,OAAO;qBAAA;gBAAA;YAChB;QACF;IACF;AAEJ,CAAC;AAED,SAAS,kBACP,QAAA,EACA,KAAA,EACA,YAAA,EACA;IACA,MAAM,oJAAO,aAAA,EAAW,QAAQ,QAAQ,GAAG,KAAK;IAC3C,OAAA,OAGE,OAAO,MAAA,CAAO,MAAM;QAAC,MAAM;IAAa,CAAA,IAFtC;AAGX;AAEA,SAAS,QACP,QAAA,EACA;IACA,IAAI,CAAC,UACI,OAAA;IAGT,MAAM,EAAC,IAAA,EAAM,GAAG,IAAA,CAAA,GAAO;IAChB,OAAA;AACT","ignoreList":[0,1]}},
    {"offset": {"line": 4680, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4686, "column": 0}, "map": {"version":3,"file":"parse.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/path/parser/parse.ts"],"sourcesContent":["import {type PathElement} from '../types'\nimport {type StringToPath} from './types'\n\nexport function parse<const T extends string>(path: T): StringToPath<T> {\n  return path\n    .split(/[[.\\]]/g)\n    .filter(Boolean)\n    .map(seg => (seg.includes('==') ? parseSegment(seg) : coerce(seg))) as any\n}\n\nconst IS_NUMERIC = /^-?\\d+$/\n\nfunction unquote(str: string) {\n  return str.replace(/^['\"]/, '').replace(/['\"]$/, '')\n}\n\nfunction parseSegment(segment: string): PathElement {\n  const [key, value] = segment.split('==')\n  if (key !== '_key') {\n    throw new Error(\n      `Currently only \"_key\" is supported as path segment. Found ${key}`,\n    )\n  }\n  if (typeof value === 'undefined') {\n    throw new Error('Invalid path segment, expected `key==\"value\"`')\n  }\n  return {_key: unquote(value)}\n}\n\nfunction coerce(segment: string): PathElement {\n  return IS_NUMERIC.test(segment) ? Number(segment) : segment\n}\n"],"names":[],"mappings":";;;AAGO,SAAS,MAA8B,IAAA,EAA0B;IACtE,OAAO,KACJ,KAAA,CAAM,SAAS,EACf,MAAA,CAAO,OAAO,EACd,GAAA,CAAI,CAAA,MAAQ,IAAI,QAAA,CAAS,IAAI,IAAI,aAAa,GAAG,IAAI,OAAO,GAAG,CAAE;AACtE;AAEA,MAAM,aAAa;AAEnB,SAAS,QAAQ,GAAA,EAAa;IAC5B,OAAO,IAAI,OAAA,CAAQ,SAAS,EAAE,EAAE,OAAA,CAAQ,SAAS,EAAE;AACrD;AAEA,SAAS,aAAa,OAAA,EAA8B;IAClD,MAAM,CAAC,KAAK,KAAK,CAAA,GAAI,QAAQ,KAAA,CAAM,IAAI;IACvC,IAAI,QAAQ,QACV,MAAM,IAAI,MACR,CAAA,0DAAA,EAA6D,GAAG,EAAA;IAGpE,IAAI,OAAO,QAAU,KACb,MAAA,IAAI,MAAM,+CAA+C;IAEjE,OAAO;QAAC,MAAM,QAAQ,KAAK;IAAC;AAC9B;AAEA,SAAS,OAAO,OAAA,EAA8B;IAC5C,OAAO,WAAW,IAAA,CAAK,OAAO,IAAI,OAAO,OAAO,IAAI;AACtD","ignoreList":[0]}},
    {"offset": {"line": 4709, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4715, "column": 0}, "map": {"version":3,"file":"decode.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/encoders/sanity/decode.ts"],"sourcesContent":["import {type SetIfMissingOp, type SetOp} from '../../mutations/operations/types'\nimport {\n  type Mutation,\n  type NodePatch,\n  type SanityDocumentBase,\n} from '../../mutations/types'\nimport {parse as parsePath} from '../../path/parser/parse'\n\nexport type {Mutation, SanityDocumentBase}\n\nexport type SanityDiffMatchPatch = {\n  id: string\n  diffMatchPatch: {[path: string]: string}\n}\n\nexport type SanitySetPatch = {\n  id: string\n  set: {[path: string]: any}\n}\n\nexport type Insert = {\n  before?: string\n  after?: string\n  replace?: string\n  items: any[]\n}\n\nexport type SanityInsertPatch = {\n  id: string\n  insert: Insert\n}\n\nexport type SanityUnsetPatch = {\n  id: string\n  unset: string[]\n}\n\nexport type SanityIncPatch = {\n  id: string\n  inc: {[path: string]: number}\n}\n\nexport type SanityDecPatch = {\n  id: string\n  dec: {[path: string]: number}\n}\n\nexport type SanitySetIfMissingPatch = {\n  id: string\n  setIfMissing: {[path: string]: any}\n}\n\nexport type SanityPatch =\n  | SanitySetPatch\n  | SanityUnsetPatch\n  | SanityInsertPatch\n  | SanitySetIfMissingPatch\n  | SanityDiffMatchPatch\n  | SanityIncPatch\n  | SanityDecPatch\n\nexport type SanityCreateIfNotExistsMutation<Doc extends SanityDocumentBase> = {\n  createIfNotExists: Doc\n}\n\nexport type SanityCreateOrReplaceMutation<Doc extends SanityDocumentBase> = {\n  createOrReplace: Doc\n}\n\nexport type SanityCreateMutation<Doc extends SanityDocumentBase> = {\n  create: Doc\n}\n\nexport type SanityDeleteMutation = {\n  delete: {id: string}\n}\n\nexport type SanityPatchMutation = {\n  patch:\n    | SanitySetPatch\n    | SanitySetIfMissingPatch\n    | SanityDiffMatchPatch\n    | SanityInsertPatch\n    | SanityUnsetPatch\n}\n\nexport type SanityMutation<\n  Doc extends SanityDocumentBase = SanityDocumentBase,\n> =\n  | SanityCreateMutation<Doc>\n  | SanityCreateIfNotExistsMutation<Doc>\n  | SanityCreateOrReplaceMutation<Doc>\n  | SanityDeleteMutation\n  | SanityPatchMutation\n\nfunction isCreateIfNotExistsMutation<Doc extends SanityDocumentBase>(\n  sanityMutation: SanityMutation<Doc>,\n): sanityMutation is SanityCreateIfNotExistsMutation<Doc> {\n  return 'createIfNotExists' in sanityMutation\n}\n\nfunction isCreateOrReplaceMutation<Doc extends SanityDocumentBase>(\n  sanityMutation: SanityMutation<Doc>,\n): sanityMutation is SanityCreateOrReplaceMutation<Doc> {\n  return 'createOrReplace' in sanityMutation\n}\n\nfunction isCreateMutation<Doc extends SanityDocumentBase>(\n  sanityMutation: SanityMutation<Doc>,\n): sanityMutation is SanityCreateMutation<Doc> {\n  return 'create' in sanityMutation\n}\n\nfunction isDeleteMutation(\n  sanityMutation: SanityMutation<any>,\n): sanityMutation is SanityDeleteMutation {\n  return 'delete' in sanityMutation\n}\n\nfunction isPatchMutation(\n  sanityMutation: SanityMutation<any>,\n): sanityMutation is SanityPatchMutation {\n  return 'patch' in sanityMutation\n}\n\nfunction isSetPatch(sanityPatch: SanityPatch): sanityPatch is SanitySetPatch {\n  return 'set' in sanityPatch\n}\n\nfunction isSetIfMissingPatch(\n  sanityPatch: SanityPatch,\n): sanityPatch is SanitySetIfMissingPatch {\n  return 'setIfMissing' in sanityPatch\n}\n\nfunction isDiffMatchPatch(\n  sanityPatch: SanityPatch,\n): sanityPatch is SanityDiffMatchPatch {\n  return 'diffMatchPatch' in sanityPatch\n}\n\nfunction isUnsetPatch(\n  sanityPatch: SanityPatch,\n): sanityPatch is SanityUnsetPatch {\n  return 'unset' in sanityPatch\n}\n\nfunction isIncPatch(sanityPatch: SanityPatch): sanityPatch is SanityIncPatch {\n  return 'inc' in sanityPatch\n}\n\nfunction isDecPatch(sanityPatch: SanityPatch): sanityPatch is SanityDecPatch {\n  return 'inc' in sanityPatch\n}\n\nfunction isInsertPatch(\n  sanityPatch: SanityPatch,\n): sanityPatch is SanityInsertPatch {\n  return 'insert' in sanityPatch\n}\n\nexport function decodeAll<Doc extends SanityDocumentBase>(\n  sanityMutations: SanityMutation<Doc>[],\n) {\n  return sanityMutations.map(decodeMutation)\n}\n\nexport function decode<Doc extends SanityDocumentBase>(\n  encodedMutation: SanityMutation<Doc>,\n) {\n  return decodeMutation(encodedMutation)\n}\n\nfunction decodeMutation<Doc extends SanityDocumentBase>(\n  encodedMutation: SanityMutation<Doc>,\n): Mutation {\n  if (isCreateIfNotExistsMutation(encodedMutation)) {\n    return {\n      type: 'createIfNotExists',\n      document: encodedMutation.createIfNotExists,\n    }\n  }\n  if (isCreateOrReplaceMutation(encodedMutation)) {\n    return {\n      type: 'createOrReplace',\n      document: encodedMutation.createOrReplace,\n    }\n  }\n  if (isCreateMutation(encodedMutation)) {\n    return {type: 'create', document: encodedMutation.create}\n  }\n  if (isDeleteMutation(encodedMutation)) {\n    return {id: encodedMutation.delete.id, type: 'delete'}\n  }\n  if (isPatchMutation(encodedMutation)) {\n    return {\n      type: 'patch',\n      id: encodedMutation.patch.id,\n      patches: decodeNodePatches(encodedMutation.patch),\n    }\n  }\n  throw new Error(`Unknown mutation: ${JSON.stringify(encodedMutation)}`)\n}\n\nconst POSITION_KEYS = ['before', 'replace', 'after'] as const\n\nfunction getInsertPosition(insert: Insert) {\n  const positions = POSITION_KEYS.filter(k => k in insert)\n  if (positions.length > 1) {\n    throw new Error(\n      `Insert patch is ambiguous. Should only contain one of: ${POSITION_KEYS.join(\n        ', ',\n      )}, instead found ${positions.join(', ')}`,\n    )\n  }\n  return positions[0]\n}\n\nfunction decodeNodePatches<T>(patch: SanityPatch): NodePatch<any, any>[] {\n  // If multiple patches are included, then the order of execution is as follows\n  // set, setIfMissing, unset, inc, dec, insert.\n  // order is defined here: https://www.sanity.io/docs/http-mutations#2f480b2baca5\n  return [\n    ...getSetPatches(patch),\n    ...getSetIfMissingPatches(patch),\n    ...getUnsetPatches(patch),\n    ...getIncPatches(patch),\n    ...getDecPatches(patch),\n    ...getInsertPatches(patch),\n  ]\n\n  throw new Error(`Unknown patch: ${JSON.stringify(patch)}`)\n}\n\nfunction getSetPatches(patch: SanityPatch): NodePatch<any[], SetOp<any>>[] {\n  return isSetPatch(patch)\n    ? Object.keys(patch.set).map(path => ({\n        path: parsePath(path),\n        op: {type: 'set', value: patch.set[path]},\n      }))\n    : []\n}\n\nfunction getSetIfMissingPatches(\n  patch: SanityPatch,\n): NodePatch<any[], SetIfMissingOp<any>>[] {\n  return isSetIfMissingPatch(patch)\n    ? Object.keys(patch.setIfMissing).map(path => ({\n        path: parsePath(path),\n        op: {type: 'setIfMissing', value: patch.setIfMissing[path]},\n      }))\n    : []\n}\n\nfunction getDiffMatchPatchPatches(patch: SanityPatch) {\n  return isDiffMatchPatch(patch)\n    ? Object.keys(patch.diffMatchPatch).map(path => ({\n        path: parsePath(path),\n        op: {type: 'diffMatchPatch', value: patch.diffMatchPatch[path]},\n      }))\n    : []\n}\n\nfunction getUnsetPatches(patch: SanityPatch) {\n  return isUnsetPatch(patch)\n    ? patch.unset.map(path => ({\n        path: parsePath(path),\n        op: {type: 'unset'},\n      }))\n    : []\n}\n\nfunction getIncPatches(patch: SanityPatch) {\n  return isIncPatch(patch)\n    ? Object.keys(patch.inc).map(path => ({\n        path: parsePath(path),\n        op: {type: 'inc', amount: patch.inc[path]},\n      }))\n    : []\n}\n\nfunction getDecPatches(patch: SanityPatch) {\n  return isDecPatch(patch)\n    ? Object.keys(patch.dec).map(path => ({\n        path: parsePath(path),\n        op: {type: 'dec', amount: patch.dec[path]},\n      }))\n    : []\n}\n\nfunction getInsertPatches(patch: SanityPatch) {\n  if (!isInsertPatch(patch)) {\n    return []\n  }\n  const position = getInsertPosition(patch.insert)\n  if (!position) {\n    throw new Error('Insert patch missing position')\n  }\n\n  const path = parsePath(patch.insert[position]!)\n  const referenceItem = path.pop()\n\n  const op =\n    position === 'replace'\n      ? {\n          type: 'insert',\n          position: position,\n          referenceItem,\n          items: patch.insert.items,\n        }\n      : {\n          type: 'insert',\n          position: position,\n          referenceItem,\n          items: patch.insert.items,\n        }\n\n  return [{path, op}]\n}\n"],"names":["parsePath"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4872, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4878, "column": 0}, "map": {"version":3,"file":"arrify.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/utils/arrify.ts"],"sourcesContent":["export type Arrify<T> = (T extends (infer E)[] ? E : T)[]\n\nexport function arrify<T>(val: T): Arrify<T> {\n  return Array.isArray(val) ? val : ([val] as any)\n}\n"],"names":[],"mappings":";;;AAEO,SAAS,OAAU,GAAA,EAAmB;IAC3C,OAAO,MAAM,OAAA,CAAQ,GAAG,IAAI,MAAO;QAAC,GAAG;KAAA;AACzC","ignoreList":[0]}},
    {"offset": {"line": 4888, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4894, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/encoders/compact/decode.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/encoders/compact/encode.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/formatters/compact.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/mutations/operations/creators.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/mutations/autoKeys.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/next-sanity/node_modules/%40sanity/mutate/src/mutations/creators.ts"],"sourcesContent":["import {\n  type Mutation,\n  type PatchMutation,\n  type SanityDocumentBase,\n} from '../../mutations/types'\nimport {type Index, type KeyedPathElement} from '../../path'\nimport {parse as parsePath} from '../../path/parser/parse'\nimport {\n  type CompactMutation,\n  type CompactPatchMutation,\n  type CreateIfNotExistsMutation,\n  type CreateMutation,\n  type CreateOrReplaceMutation,\n  type DeleteMutation,\n  type ItemRef,\n} from './types'\n\nexport {Mutation, SanityDocumentBase}\n\nexport function decode<Doc extends SanityDocumentBase>(\n  mutations: CompactMutation<Doc>[],\n): Mutation[] {\n  return mutations.map(decodeMutation)\n}\n\nexport function decodeMutation<Doc extends SanityDocumentBase>(\n  mutation: CompactMutation<Doc>,\n): Mutation {\n  const [type] = mutation\n  if (type === 'delete') {\n    const [, id] = mutation as DeleteMutation\n    return {id, type}\n  } else if (type === 'create') {\n    const [, document] = mutation as CreateMutation<Doc>\n    return {type, document}\n  } else if (type === 'createIfNotExists') {\n    const [, document] = mutation as CreateIfNotExistsMutation<Doc>\n    return {type, document}\n  } else if (type === 'createOrReplace') {\n    const [, document] = mutation as CreateOrReplaceMutation<Doc>\n    return {type, document}\n  } else if (type === 'patch') {\n    return decodePatchMutation(mutation)\n  }\n  throw new Error(`Unrecognized mutation: ${JSON.stringify(mutation)}`)\n}\n\nfunction decodePatchMutation(mutation: CompactPatchMutation): PatchMutation {\n  const [, type, id, serializedPath, , revisionId] = mutation\n\n  const path = parsePath(serializedPath)\n  if (type === 'dec' || type === 'inc') {\n    const [, , , , [amount]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'inc', amount}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'unset') {\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'unset'}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'insert') {\n    const [, , , , [position, ref, items]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [\n        {\n          path,\n          op: {\n            type: 'insert',\n            position,\n            items,\n            referenceItem: typeof ref === 'string' ? {_key: ref} : ref,\n          },\n        },\n      ],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'set') {\n    const [, , , , [value]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'set', value}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'setIfMissing') {\n    const [, , , , [value]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'setIfMissing', value}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'diffMatchPatch') {\n    const [, , , , [value]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'diffMatchPatch', value}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'truncate') {\n    const [, , , , [startIndex, endIndex]] = mutation\n\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'truncate', startIndex, endIndex}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'assign') {\n    const [, , , , [value]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [{path, op: {type: 'assign', value}}],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'replace') {\n    const [, , , , [ref, items]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [\n        {path, op: {type: 'replace', items, referenceItem: decodeItemRef(ref)}},\n      ],\n      ...createOpts(revisionId),\n    }\n  }\n  if (type === 'upsert') {\n    const [, , , , [position, referenceItem, items]] = mutation\n    return {\n      type: 'patch',\n      id,\n      patches: [\n        {\n          path,\n          op: {\n            type: 'upsert',\n            items,\n            referenceItem: decodeItemRef(referenceItem),\n            position,\n          },\n        },\n      ],\n      ...createOpts(revisionId),\n    }\n  }\n  throw new Error(`Invalid mutation type: ${type}`)\n}\n\nfunction decodeItemRef(ref: ItemRef): Index | KeyedPathElement {\n  return typeof ref === 'string' ? {_key: ref} : ref\n}\n\nfunction createOpts(revisionId: undefined | string) {\n  return revisionId ? {options: {ifRevision: revisionId}} : null\n}\n","// An example of a compact transport/serialization format\nimport {\n  type Mutation,\n  type NodePatch,\n  type SanityDocumentBase,\n} from '../../mutations/types'\nimport {type Index, type KeyedPathElement} from '../../path'\nimport {stringify as stringifyPath} from '../../path/parser/stringify'\nimport {\n  type CompactMutation,\n  type CompactPatchMutation,\n  type ItemRef,\n} from './types'\n\nexport function encode<Doc extends SanityDocumentBase>(\n  mutations: Mutation[],\n): CompactMutation<Doc>[] {\n  return mutations.flatMap(m => encodeMutation<Doc>(m))\n}\n\nfunction encodeItemRef(ref: Index | KeyedPathElement): ItemRef {\n  return typeof ref === 'number' ? ref : ref._key\n}\n\nfunction encodeMutation<Doc extends SanityDocumentBase>(\n  mutation: Mutation,\n): CompactMutation<Doc>[] {\n  if (\n    mutation.type === 'create' ||\n    mutation.type === 'createIfNotExists' ||\n    mutation.type === 'createOrReplace'\n  ) {\n    return [[mutation.type, mutation.document]]\n  }\n  if (mutation.type === 'delete') {\n    return [['delete', mutation.id]]\n  }\n  if (mutation.type === 'patch') {\n    return mutation.patches.map(patch =>\n      maybeAddRevision(\n        mutation.options?.ifRevision,\n        encodePatchMutation(mutation.id, patch),\n      ),\n    )\n  }\n\n  //@ts-expect-error - all cases are covered\n  throw new Error(`Invalid mutation type: ${mutation.type}`)\n}\n\nfunction encodePatchMutation(\n  id: string,\n  patch: NodePatch<any>,\n): CompactPatchMutation {\n  const {op} = patch\n  const path = stringifyPath(patch.path)\n  if (op.type === 'unset') {\n    return ['patch', 'unset', id, path, []]\n  }\n  if (op.type === 'diffMatchPatch') {\n    return ['patch', 'diffMatchPatch', id, path, [op.value]]\n  }\n  if (op.type === 'inc' || op.type === 'dec') {\n    return ['patch', op.type, id, path, [op.amount]]\n  }\n  if (op.type === 'set') {\n    return ['patch', op.type, id, path, [op.value]]\n  }\n  if (op.type === 'setIfMissing') {\n    return ['patch', op.type, id, path, [op.value]]\n  }\n  if (op.type === 'insert') {\n    return [\n      'patch',\n      'insert',\n      id,\n      path,\n      [op.position, encodeItemRef(op.referenceItem), op.items],\n    ]\n  }\n  if (op.type === 'upsert') {\n    return [\n      'patch',\n      'upsert',\n      id,\n      path,\n      [op.position, encodeItemRef(op.referenceItem), op.items],\n    ]\n  }\n  if (op.type === 'assign') {\n    return ['patch', 'assign', id, path, [op.value]]\n  }\n  if (op.type === 'unassign') {\n    return ['patch', 'assign', id, path, [op.keys]]\n  }\n  if (op.type === 'replace') {\n    return [\n      'patch',\n      'replace',\n      id,\n      path,\n      [encodeItemRef(op.referenceItem), op.items],\n    ]\n  }\n  if (op.type === 'truncate') {\n    return ['patch', 'truncate', id, path, [op.startIndex, op.endIndex]]\n  }\n  if (op.type === 'remove') {\n    return ['patch', 'remove', id, path, [encodeItemRef(op.referenceItem)]]\n  }\n  // @ts-expect-error all cases are covered\n  throw new Error(`Invalid operation type: ${op.type}`)\n}\n\nfunction maybeAddRevision<T extends CompactPatchMutation>(\n  revision: string | undefined,\n  mut: T,\n): T {\n  const [mutType, patchType, id, path, args] = mut\n  return (revision ? [mutType, patchType, id, path, args, revision] : mut) as T\n}\n","// An example of a compact formatter\n\nimport {\n  type Mutation,\n  type NodePatch,\n  type SanityDocumentBase,\n} from '../mutations/types'\nimport {type Index, type KeyedPathElement, stringify} from '../path'\n\nexport type ItemRef = string | number\n\nexport function format<Doc extends SanityDocumentBase>(\n  mutations: Mutation[],\n): string {\n  return mutations.flatMap(m => encodeMutation<Doc>(m)).join('\\n')\n}\n\nfunction encodeItemRef(ref: Index | KeyedPathElement): ItemRef {\n  return typeof ref === 'number' ? ref : ref._key\n}\n\nfunction encodeMutation<Doc extends SanityDocumentBase>(\n  mutation: Mutation,\n): string {\n  if (\n    mutation.type === 'create' ||\n    mutation.type === 'createIfNotExists' ||\n    mutation.type === 'createOrReplace'\n  ) {\n    return [mutation.type, ': ', JSON.stringify(mutation.document)].join('')\n  }\n  if (mutation.type === 'delete') {\n    return ['delete ', mutation.id].join(': ')\n  }\n  if (mutation.type === 'patch') {\n    const ifRevision = mutation.options?.ifRevision\n    return [\n      'patch',\n      ' ',\n      `id=${mutation.id}`,\n      ifRevision ? ` (if revision==${ifRevision})` : '',\n      ':\\n',\n      mutation.patches\n        .map(nodePatch => `  ${formatPatchMutation(nodePatch)}`)\n        .join('\\n'),\n    ].join('')\n  }\n\n  //@ts-expect-error - all cases are covered\n  throw new Error(`Invalid mutation type: ${mutation.type}`)\n}\n\nfunction formatPatchMutation(patch: NodePatch<any>): string {\n  const {op} = patch\n  const path = stringify(patch.path)\n  if (op.type === 'unset') {\n    return [path, 'unset()'].join(': ')\n  }\n  if (op.type === 'diffMatchPatch') {\n    return [path, `diffMatchPatch(${op.value})`].join(': ')\n  }\n  if (op.type === 'inc' || op.type === 'dec') {\n    return [path, `${op.type}(${op.amount})`].join(': ')\n  }\n  if (op.type === 'set' || op.type === 'setIfMissing') {\n    return [path, `${op.type}(${JSON.stringify(op.value)})`].join(': ')\n  }\n  if (op.type === 'assign') {\n    return [path, `${op.type}(${JSON.stringify(op.value)})`].join(': ')\n  }\n  if (op.type === 'unassign') {\n    return [path, `${op.type}(${JSON.stringify(op.keys)})`].join(': ')\n  }\n  if (op.type === 'insert' || op.type === 'upsert') {\n    return [\n      path,\n      `${op.type}(${op.position}, ${encodeItemRef(\n        op.referenceItem,\n      )}, ${JSON.stringify(op.items)})`,\n    ].join(': ')\n  }\n  if (op.type === 'replace') {\n    return [\n      path,\n      `replace(${encodeItemRef(op.referenceItem)}, ${JSON.stringify(\n        op.items,\n      )})`,\n    ].join(': ')\n  }\n  if (op.type === 'truncate') {\n    return [path, `truncate(${op.startIndex}, ${op.endIndex}`].join(': ')\n  }\n  if (op.type === 'remove') {\n    return [path, `remove(${encodeItemRef(op.referenceItem)})`].join(': ')\n  }\n  // @ts-expect-error all cases are covered\n  throw new Error(`Invalid operation type: ${op.type}`)\n}\n","import {arrify} from '../../utils/arrify'\nimport {\n  type AnyArray,\n  type ArrayElement,\n  type NormalizeReadOnlyArray,\n} from '../../utils/typeUtils'\nimport {\n  type AssignOp,\n  type DecOp,\n  type DiffMatchPatchOp,\n  type IncOp,\n  type Index,\n  type InsertOp,\n  type KeyedPathElement,\n  type RelativePosition,\n  type RemoveOp,\n  type ReplaceOp,\n  type SetIfMissingOp,\n  type SetOp,\n  type TruncateOp,\n  type UnassignOp,\n  type UnsetOp,\n  type UpsertOp,\n} from './types'\n\nexport const set = <const T>(value: T): SetOp<T> => ({type: 'set', value})\n\nexport const assign = <const T extends {[K in string]: unknown}>(\n  value: T,\n): AssignOp<T> => ({\n  type: 'assign',\n  value,\n})\n\nexport const unassign = <const K extends readonly string[]>(\n  keys: K,\n): UnassignOp<K> => ({\n  type: 'unassign',\n  keys,\n})\n\nexport const setIfMissing = <const T>(value: T): SetIfMissingOp<T> => ({\n  type: 'setIfMissing',\n  value,\n})\n\nexport const unset = (): UnsetOp => ({type: 'unset'})\n\nexport const inc = <const N extends number = 1>(\n  amount: N = 1 as N,\n): IncOp<N> => ({\n  type: 'inc',\n  amount,\n})\n\nexport const dec = <const N extends number = 1>(\n  amount: N = 1 as N,\n): DecOp<N> => ({\n  type: 'dec',\n  amount,\n})\n\nexport const diffMatchPatch = (value: string): DiffMatchPatchOp => ({\n  type: 'diffMatchPatch',\n  value,\n})\n\nexport function insert<\n  const Items extends AnyArray<unknown>,\n  const Pos extends RelativePosition,\n  const ReferenceItem extends Index | KeyedPathElement,\n>(\n  items: Items | ArrayElement<Items>,\n  position: Pos,\n  indexOrReferenceItem: ReferenceItem,\n): InsertOp<NormalizeReadOnlyArray<Items>, Pos, ReferenceItem> {\n  return {\n    type: 'insert',\n    referenceItem: indexOrReferenceItem,\n    position,\n    items: arrify(items) as any,\n  }\n}\n\nexport function append<const Items extends AnyArray<unknown>>(\n  items: Items | ArrayElement<Items>,\n) {\n  return insert(items, 'after', -1)\n}\n\nexport function prepend<const Items extends AnyArray<unknown>>(\n  items: Items | ArrayElement<Items>,\n) {\n  return insert(items, 'before', 0)\n}\n\nexport function insertBefore<\n  const Items extends AnyArray<unknown>,\n  const ReferenceItem extends Index | KeyedPathElement,\n>(items: Items | ArrayElement<Items>, indexOrReferenceItem: ReferenceItem) {\n  return insert(items, 'before', indexOrReferenceItem)\n}\n\nexport const insertAfter = <\n  const Items extends AnyArray<unknown>,\n  const ReferenceItem extends Index | KeyedPathElement,\n>(\n  items: Items | ArrayElement<Items>,\n  indexOrReferenceItem: ReferenceItem,\n) => {\n  return insert(items, 'after', indexOrReferenceItem)\n}\n\nexport function truncate(startIndex: number, endIndex?: number): TruncateOp {\n  return {\n    type: 'truncate',\n    startIndex,\n    endIndex,\n  }\n}\n\n/*\n  Use this when you know the ref Items already exists\n */\nexport function replace<\n  Items extends any[],\n  ReferenceItem extends Index | KeyedPathElement,\n>(\n  items: Items | ArrayElement<Items>,\n  referenceItem: ReferenceItem,\n): ReplaceOp<Items, ReferenceItem> {\n  return {\n    type: 'replace',\n    referenceItem,\n    items: arrify(items) as Items,\n  }\n}\n\n/*\n  Remove an item from an array by either key or index\n */\nexport function remove<ReferenceItem extends Index | KeyedPathElement>(\n  referenceItem: ReferenceItem,\n): RemoveOp<ReferenceItem> {\n  return {\n    type: 'remove',\n    referenceItem,\n  }\n}\n\n/*\nuse this when the reference Items may or may not exist\n */\nexport function upsert<\n  const Items extends AnyArray<unknown>,\n  const Pos extends RelativePosition,\n  const ReferenceItem extends Index | KeyedPathElement,\n>(\n  items: Items | ArrayElement<Items>,\n  position: Pos,\n  referenceItem: ReferenceItem,\n): UpsertOp<Items, Pos, ReferenceItem> {\n  return {\n    type: 'upsert',\n    items: arrify(items) as Items,\n    referenceItem,\n    position,\n  }\n}\n","import {type Index, type KeyedPathElement} from '../path'\nimport {isObject} from '../utils/isObject'\nimport {\n  insert as _insert,\n  replace as _replace,\n  upsert as _upsert,\n} from './operations/creators'\nimport {type RelativePosition} from './operations/types'\n\nexport function autoKeys<Item>(generateKey: (item: Item) => string) {\n  const ensureKeys = createEnsureKeys(generateKey)\n\n  const insert = <\n    Pos extends RelativePosition,\n    Ref extends Index | KeyedPathElement,\n  >(\n    position: Pos,\n    referenceItem: Ref,\n    items: Item[],\n  ) => _insert(ensureKeys(items), position, referenceItem)\n  const upsert = <\n    Pos extends RelativePosition,\n    ReferenceItem extends Index | KeyedPathElement,\n  >(\n    items: Item[],\n    position: Pos,\n    referenceItem: ReferenceItem,\n  ) => _upsert(ensureKeys(items), position, referenceItem)\n\n  const replace = <\n    Pos extends RelativePosition,\n    ReferenceItem extends Index | KeyedPathElement,\n  >(\n    items: Item[],\n    position: Pos,\n    referenceItem: ReferenceItem,\n  ) => _replace(ensureKeys(items), referenceItem)\n\n  const insertBefore = <Ref extends Index | KeyedPathElement>(\n    ref: Ref,\n    items: Item[],\n  ) => insert('before', ref, items)\n\n  const prepend = (items: Item[]) => insertBefore(0, items)\n\n  const insertAfter = <Ref extends Index | KeyedPathElement>(\n    ref: Ref,\n    items: Item[],\n  ) => insert('after', ref, items)\n\n  const append = (items: Item[]) => insert('after', -1, items)\n\n  return {insert, upsert, replace, insertBefore, prepend, insertAfter, append}\n}\n\nfunction hasKey<T extends object>(item: T): item is T & {_key: string} {\n  return '_key' in item\n}\n\nfunction createEnsureKeys<T>(generateKey: (item: T) => string) {\n  return (array: T[]): T[] => {\n    let didModify = false\n    const withKeys = array.map(item => {\n      if (needsKey(item)) {\n        didModify = true\n        return {...item, _key: generateKey(item)}\n      }\n      return item\n    })\n    return didModify ? withKeys : array\n  }\n}\n\nfunction needsKey(arrayItem: any): arrayItem is object {\n  return isObject(arrayItem) && !hasKey(arrayItem)\n}\n","import {parse, type Path, type SafePath} from '../path'\nimport {arrify} from '../utils/arrify'\nimport {\n  type NormalizeReadOnlyArray,\n  type Optional,\n  type Tuplify,\n} from '../utils/typeUtils'\nimport {type Operation} from './operations/types'\nimport {\n  type CreateIfNotExistsMutation,\n  type CreateMutation,\n  type CreateOrReplaceMutation,\n  type DeleteMutation,\n  type NodePatch,\n  type NodePatchList,\n  type PatchMutation,\n  type PatchOptions,\n  type SanityDocumentBase,\n} from './types'\n\nexport function create<Doc extends Optional<SanityDocumentBase, '_id'>>(\n  document: Doc,\n): CreateMutation<Doc> {\n  return {type: 'create', document}\n}\n\nexport function patch<P extends NodePatchList | NodePatch>(\n  id: string,\n  patches: P,\n  options?: PatchOptions,\n): PatchMutation<NormalizeReadOnlyArray<Tuplify<P>>> {\n  return {\n    type: 'patch',\n    id,\n    patches: arrify(patches) as any,\n    ...(options ? {options} : {}),\n  }\n}\n\nexport function at<const P extends Path, O extends Operation>(\n  path: P,\n  operation: O,\n): NodePatch<NormalizeReadOnlyArray<P>, O>\n\nexport function at<const P extends string, O extends Operation>(\n  path: P,\n  operation: O,\n): NodePatch<SafePath<P>, O>\n\nexport function at<O extends Operation>(\n  path: Path | string,\n  operation: O,\n): NodePatch<Path, O> {\n  return {\n    path: typeof path === 'string' ? parse(path) : path,\n    op: operation,\n  }\n}\n\nexport function createIfNotExists<Doc extends SanityDocumentBase>(\n  document: Doc,\n): CreateIfNotExistsMutation<Doc> {\n  return {type: 'createIfNotExists', document}\n}\n\nexport function createOrReplace<Doc extends SanityDocumentBase>(\n  document: Doc,\n): CreateOrReplaceMutation<Doc> {\n  return {type: 'createOrReplace', document}\n}\n\nexport function delete_(id: string): DeleteMutation {\n  return {type: 'delete', id}\n}\n\nexport const del = delete_\nexport const destroy = delete_\n"],"names":["parsePath","encodeMutation","encodeItemRef","patch","stringifyPath","insert","_insert","upsert","_upsert","replace","_replace","insertBefore"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}},
    {"offset": {"line": 5542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5548, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/utils/surrogatePairs.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/clone.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/commonOverlap.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/commonPrefix.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/commonSuffix.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/cleanup.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/bisect.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/halfMatch.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/charsToLines.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/linesToChars.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/lineMode.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/compute.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/diff.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/match/bitap.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/match/match.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/createPatchObject.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/diffText.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/utils/utf8Indices.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/constants.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/make.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/levenshtein.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/diff/xIndex.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/addPadding.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/splitMax.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/apply.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/stringify.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/diff-match-patch/src/patch/parse.ts"],"sourcesContent":["/**\n * Checks if the character is a high surrogate\n *\n * @param char - Character to check\n * @returns True if high surrogate, false otherwise\n */\nexport function isHighSurrogate(char: string): boolean {\n  const charCode = char.charCodeAt(0)\n  return charCode >= 0xd800 && charCode <= 0xdbff\n}\n\n/**\n * Checks if the character is a low surrogate\n *\n * @param char - Character to check\n * @returns True if low surrogate, false otherwise\n */\nexport function isLowSurrogate(char: string): boolean {\n  const charCode = char.charCodeAt(0)\n  return charCode >= 0xdc00 && charCode <= 0xdfff\n}\n","import type {Diff} from './diff.js'\n\n/**\n * Clones a diff tuple.\n *\n * @param diff - Tuple to clone.\n * @returns New, cloned tuple.\n * @internal\n */\nexport function cloneDiff(diff: Diff): Diff {\n  const [type, patch] = diff\n  return [type, patch]\n}\n","/**\n * Determine if the suffix of one string is the prefix of another.\n *\n * @param textA - First string.\n * @param textB - Second string.\n * @returns Number of characters common to the end of the first string\n *   and the start of the second string.\n * @internal\n */\nexport function getCommonOverlap(textA: string, textB: string): number {\n  let text1 = textA\n  let text2 = textB\n\n  // Cache the text lengths to prevent multiple calls.\n  const text1Length = text1.length\n  const text2Length = text2.length\n\n  // Eliminate the null case.\n  if (text1Length === 0 || text2Length === 0) {\n    return 0\n  }\n\n  // Truncate the longer string.\n  if (text1Length > text2Length) {\n    text1 = text1.substring(text1Length - text2Length)\n  } else if (text1Length < text2Length) {\n    text2 = text2.substring(0, text1Length)\n  }\n  const textLength = Math.min(text1Length, text2Length)\n\n  // Quick check for the worst case.\n  if (text1 === text2) {\n    return textLength\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  let best = 0\n  let length = 1\n\n  for (let found = 0; found !== -1; ) {\n    const pattern = text1.substring(textLength - length)\n    found = text2.indexOf(pattern)\n    if (found === -1) {\n      return best\n    }\n    length += found\n    if (found === 0 || text1.substring(textLength - length) === text2.substring(0, length)) {\n      best = length\n      length++\n    }\n  }\n\n  // Only for typescript, never reached\n  return best\n}\n","/**\n * Determine the common prefix of two strings.\n *\n * @param text1 - First string.\n * @param text2 - Second string.\n * @returns The number of characters common to the start of each string.\n * @internal\n */\nexport function getCommonPrefix(text1: string, text2: string): number {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1[0] !== text2[0]) {\n    return 0\n  }\n\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  let pointerMin = 0\n  let pointerMax = Math.min(text1.length, text2.length)\n  let pointerMid = pointerMax\n  let pointerStart = 0\n  while (pointerMin < pointerMid) {\n    if (text1.substring(pointerStart, pointerMid) === text2.substring(pointerStart, pointerMid)) {\n      pointerMin = pointerMid\n      pointerStart = pointerMin\n    } else {\n      pointerMax = pointerMid\n    }\n    pointerMid = Math.floor((pointerMax - pointerMin) / 2 + pointerMin)\n  }\n  return pointerMid\n}\n","/**\n * Determine the common suffix of two strings.\n *\n * @param text1 - First string.\n * @param text2 - Second string.\n * @returns The number of characters common to the end of each string.\n * @internal\n */\nexport function getCommonSuffix(text1: string, text2: string): number {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1[text1.length - 1] !== text2[text2.length - 1]) {\n    return 0\n  }\n\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  let pointerMin = 0\n  let pointerMax = Math.min(text1.length, text2.length)\n  let pointerMid = pointerMax\n  let pointerEnd = 0\n  while (pointerMin < pointerMid) {\n    if (\n      text1.substring(text1.length - pointerMid, text1.length - pointerEnd) ===\n      text2.substring(text2.length - pointerMid, text2.length - pointerEnd)\n    ) {\n      pointerMin = pointerMid\n      pointerEnd = pointerMin\n    } else {\n      pointerMax = pointerMid\n    }\n    pointerMid = Math.floor((pointerMax - pointerMin) / 2 + pointerMin)\n  }\n\n  return pointerMid\n}\n","import {cloneDiff} from './clone.js'\nimport {getCommonOverlap} from './commonOverlap.js'\nimport {getCommonPrefix} from './commonPrefix.js'\nimport {getCommonSuffix} from './commonSuffix.js'\nimport {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT, type Diff} from './diff.js'\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n *\n * @param rawDiffs - Array of diff tuples.\n * @returns Array of diff tuples.\n * @public\n */\nexport function cleanupSemantic(rawDiffs: Diff[]): Diff[] {\n  let diffs: Diff[] = rawDiffs.map((diff) => cloneDiff(diff))\n\n  let hasChanges = false\n  const equalities: number[] = [] // Stack of indices where equalities are found.\n  let equalitiesLength = 0 // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  let lastEquality = null\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  let pointer = 0 // Index of current position.\n  // Number of characters that changed prior to the equality.\n  let lengthInsertions1 = 0\n  let lengthDeletions1 = 0\n  // Number of characters that changed after the equality.\n  let lengthInsertions2 = 0\n  let lengthDeletions2 = 0\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] === DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer\n      lengthInsertions1 = lengthInsertions2\n      lengthDeletions1 = lengthDeletions2\n      lengthInsertions2 = 0\n      lengthDeletions2 = 0\n      lastEquality = diffs[pointer][1]\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] === DIFF_INSERT) {\n        lengthInsertions2 += diffs[pointer][1].length\n      } else {\n        lengthDeletions2 += diffs[pointer][1].length\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastEquality &&\n        lastEquality.length <= Math.max(lengthInsertions1, lengthDeletions1) &&\n        lastEquality.length <= Math.max(lengthInsertions2, lengthDeletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [DIFF_DELETE, lastEquality])\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT\n        // Throw away the equality we just deleted.\n        equalitiesLength--\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1\n        lengthInsertions1 = 0 // Reset the counters.\n        lengthDeletions1 = 0\n        lengthInsertions2 = 0\n        lengthDeletions2 = 0\n        lastEquality = null\n        hasChanges = true\n      }\n    }\n    pointer++\n  }\n\n  // Normalize the diff.\n  if (hasChanges) {\n    diffs = cleanupMerge(diffs)\n  }\n  diffs = cleanupSemanticLossless(diffs)\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abczzz</del><ins>zzzdef</ins>\n  //   -> <del>abc</del>zzz<ins>def</ins>\n  // e.g: <del>zzzabc</del><ins>defzzz</ins>\n  //   -> <ins>def</ins>zzz<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] === DIFF_DELETE && diffs[pointer][0] === DIFF_INSERT) {\n      const deletion = diffs[pointer - 1][1]\n      const insertion = diffs[pointer][1]\n      const overlapLength1 = getCommonOverlap(deletion, insertion)\n      const overlapLength2 = getCommonOverlap(insertion, deletion)\n      if (overlapLength1 >= overlapLength2) {\n        if (overlapLength1 >= deletion.length / 2 || overlapLength1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [DIFF_EQUAL, insertion.substring(0, overlapLength1)])\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlapLength1)\n          diffs[pointer + 1][1] = insertion.substring(overlapLength1)\n          pointer++\n        }\n      } else if (overlapLength2 >= deletion.length / 2 || overlapLength2 >= insertion.length / 2) {\n        // Reverse overlap found.\n        // Insert an equality and swap and trim the surrounding edits.\n        diffs.splice(pointer, 0, [DIFF_EQUAL, deletion.substring(0, overlapLength2)])\n        diffs[pointer - 1][0] = DIFF_INSERT\n        diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlapLength2)\n        diffs[pointer + 1][0] = DIFF_DELETE\n        diffs[pointer + 1][1] = deletion.substring(overlapLength2)\n        pointer++\n      }\n      pointer++\n    }\n    pointer++\n  }\n  return diffs\n}\n\n// Define some regex patterns for matching boundaries.\nconst nonAlphaNumericRegex = /[^a-zA-Z0-9]/\nconst whitespaceRegex = /\\s/\nconst linebreakRegex = /[\\r\\n]/\nconst blanklineEndRegex = /\\n\\r?\\n$/\nconst blanklineStartRegex = /^\\r?\\n\\r?\\n/\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n *\n * @param rawDiffs - Array of diff tuples.\n * @returns Array of diff tuples.\n * @public\n */\nexport function cleanupSemanticLossless(rawDiffs: Diff[]): Diff[] {\n  const diffs = rawDiffs.map((diff) => cloneDiff(diff))\n\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   *\n   * @param one - First string.\n   * @param two - Second string.\n   * @returns The score.\n   * @internal\n   */\n  function diffCleanupSemanticScore(one: string, two: string) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    const char1 = one.charAt(one.length - 1)\n    const char2 = two.charAt(0)\n    const nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex)\n    const nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex)\n    const whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex)\n    const whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex)\n    const lineBreak1 = whitespace1 && char1.match(linebreakRegex)\n    const lineBreak2 = whitespace2 && char2.match(linebreakRegex)\n    const blankLine1 = lineBreak1 && one.match(blanklineEndRegex)\n    const blankLine2 = lineBreak2 && two.match(blanklineStartRegex)\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1\n    }\n    return 0\n  }\n\n  let pointer = 1\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL && diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      let equality1 = diffs[pointer - 1][1]\n      let edit = diffs[pointer][1]\n      let equality2 = diffs[pointer + 1][1]\n\n      // First, shift the edit as far left as possible.\n      const commonOffset = getCommonSuffix(equality1, edit)\n      if (commonOffset) {\n        const commonString = edit.substring(edit.length - commonOffset)\n        equality1 = equality1.substring(0, equality1.length - commonOffset)\n        edit = commonString + edit.substring(0, edit.length - commonOffset)\n        equality2 = commonString + equality2\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      let bestEquality1 = equality1\n      let bestEdit = edit\n      let bestEquality2 = equality2\n      let bestScore =\n        diffCleanupSemanticScore(equality1, edit) + diffCleanupSemanticScore(edit, equality2)\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0)\n        edit = edit.substring(1) + equality2.charAt(0)\n        equality2 = equality2.substring(1)\n        const score =\n          diffCleanupSemanticScore(equality1, edit) + diffCleanupSemanticScore(edit, equality2)\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score\n          bestEquality1 = equality1\n          bestEdit = edit\n          bestEquality2 = equality2\n        }\n      }\n\n      if (diffs[pointer - 1][1] !== bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1\n        } else {\n          diffs.splice(pointer - 1, 1)\n          pointer--\n        }\n        diffs[pointer][1] = bestEdit\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2\n        } else {\n          diffs.splice(pointer + 1, 1)\n          pointer--\n        }\n      }\n    }\n    pointer++\n  }\n\n  return diffs\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n *\n * @param rawDiffs - Array of diff tuples.\n * @returns Array of diff tuples.\n * @public\n */\nexport function cleanupMerge(rawDiffs: Diff[]): Diff[] {\n  let diffs = rawDiffs.map((diff) => cloneDiff(diff))\n\n  // Add a dummy entry at the end.\n  diffs.push([DIFF_EQUAL, ''])\n  let pointer = 0\n  let countDelete = 0\n  let countInsert = 0\n  let textDelete = ''\n  let textInsert = ''\n  let commonlength\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        countInsert++\n        textInsert += diffs[pointer][1]\n        pointer++\n        break\n      case DIFF_DELETE:\n        countDelete++\n        textDelete += diffs[pointer][1]\n        pointer++\n        break\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (countDelete + countInsert > 1) {\n          if (countDelete !== 0 && countInsert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = getCommonPrefix(textInsert, textDelete)\n            if (commonlength !== 0) {\n              if (\n                pointer - countDelete - countInsert > 0 &&\n                diffs[pointer - countDelete - countInsert - 1][0] === DIFF_EQUAL\n              ) {\n                diffs[pointer - countDelete - countInsert - 1][1] += textInsert.substring(\n                  0,\n                  commonlength\n                )\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL, textInsert.substring(0, commonlength)])\n                pointer++\n              }\n              textInsert = textInsert.substring(commonlength)\n              textDelete = textDelete.substring(commonlength)\n            }\n            // Factor out any common suffixies.\n            commonlength = getCommonSuffix(textInsert, textDelete)\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                textInsert.substring(textInsert.length - commonlength) + diffs[pointer][1]\n              textInsert = textInsert.substring(0, textInsert.length - commonlength)\n              textDelete = textDelete.substring(0, textDelete.length - commonlength)\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          pointer -= countDelete + countInsert\n          diffs.splice(pointer, countDelete + countInsert)\n          if (textDelete.length) {\n            diffs.splice(pointer, 0, [DIFF_DELETE, textDelete])\n            pointer++\n          }\n          if (textInsert.length) {\n            diffs.splice(pointer, 0, [DIFF_INSERT, textInsert])\n            pointer++\n          }\n          pointer++\n        } else if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1]\n          diffs.splice(pointer, 1)\n        } else {\n          pointer++\n        }\n        countInsert = 0\n        countDelete = 0\n        textDelete = ''\n        textInsert = ''\n        break\n      default:\n        throw new Error('Unknown diff operation')\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop() // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  let hasChanges = false\n  pointer = 1\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL && diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) ===\n        diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length)\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1]\n        diffs.splice(pointer - 1, 1)\n        hasChanges = true\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) === diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1]\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1]\n        diffs.splice(pointer + 1, 1)\n        hasChanges = true\n      }\n    }\n    pointer++\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (hasChanges) {\n    diffs = cleanupMerge(diffs)\n  }\n\n  return diffs\n}\n\nfunction trueCount(...args: boolean[]) {\n  return args.reduce((n, bool) => n + (bool ? 1 : 0), 0)\n}\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n *\n * @param rawDiffs - Array of diff tuples.\n * @param editCost - Cost of an empty edit operation in terms of edit characters.\n * @returns Array of diff tuples.\n * @public\n */\nexport function cleanupEfficiency(rawDiffs: Diff[], editCost: number = 4): Diff[] {\n  let diffs = rawDiffs.map((diff) => cloneDiff(diff))\n  let hasChanges = false\n  const equalities: number[] = [] // Stack of indices where equalities are found.\n  let equalitiesLength = 0 // Keeping our own length var is faster in JS.\n  let lastEquality: string | null = null\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  let pointer = 0 // Index of current position.\n  // Is there an insertion operation before the last equality.\n  let preIns = false\n  // Is there a deletion operation before the last equality.\n  let preDel = false\n  // Is there an insertion operation after the last equality.\n  let postIns = false\n  // Is there a deletion operation after the last equality.\n  let postDel = false\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] === DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < editCost && (postIns || postDel)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer\n        preIns = postIns\n        preDel = postDel\n        lastEquality = diffs[pointer][1]\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0\n        lastEquality = null\n      }\n      postIns = false\n      postDel = false\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] === DIFF_DELETE) {\n        postDel = true\n      } else {\n        postIns = true\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (\n        lastEquality &&\n        ((preIns && preDel && postIns && postDel) ||\n          (lastEquality.length < editCost / 2 && trueCount(preIns, preDel, postIns, postDel) === 3))\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [DIFF_DELETE, lastEquality])\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT\n        equalitiesLength-- // Throw away the equality we just deleted;\n        lastEquality = null\n        if (preIns && preDel) {\n          // No hasChanges made which could affect previous entry, keep going.\n          postIns = true\n          postDel = true\n          equalitiesLength = 0\n        } else {\n          equalitiesLength-- // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1\n          postIns = false\n          postDel = false\n        }\n        hasChanges = true\n      }\n    }\n    pointer++\n  }\n\n  if (hasChanges) {\n    diffs = cleanupMerge(diffs)\n  }\n\n  return diffs\n}\n","import {doDiff, DIFF_DELETE, DIFF_INSERT, type Diff} from './diff.js'\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n *\n * @param text1 - Old string to be diffed.\n * @param text2 - New string to be diffed.\n * @returns Array of diff tuples.\n * @internal\n */\nexport function bisect(text1: string, text2: string, deadline: number): Diff[] {\n  // Cache the text lengths to prevent multiple calls.\n  const text1Length = text1.length\n  const text2Length = text2.length\n  const maxD = Math.ceil((text1Length + text2Length) / 2)\n  const vOffset = maxD\n  const vLength = 2 * maxD\n  const v1 = new Array(vLength)\n  const v2 = new Array(vLength)\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (let x = 0; x < vLength; x++) {\n    v1[x] = -1\n    v2[x] = -1\n  }\n  v1[vOffset + 1] = 0\n  v2[vOffset + 1] = 0\n  const delta = text1Length - text2Length\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  const front = delta % 2 !== 0\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  let k1start = 0\n  let k1end = 0\n  let k2start = 0\n  let k2end = 0\n  for (let d = 0; d < maxD; d++) {\n    // Bail out if deadline is reached.\n    if (Date.now() > deadline) {\n      break\n    }\n    // Walk the front path one step.\n    for (let k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      const k1Offset = vOffset + k1\n      let x1\n      if (k1 === -d || (k1 !== d && v1[k1Offset - 1] < v1[k1Offset + 1])) {\n        x1 = v1[k1Offset + 1]\n      } else {\n        x1 = v1[k1Offset - 1] + 1\n      }\n      let y1 = x1 - k1\n      while (x1 < text1Length && y1 < text2Length && text1.charAt(x1) === text2.charAt(y1)) {\n        x1++\n        y1++\n      }\n      v1[k1Offset] = x1\n      if (x1 > text1Length) {\n        // Ran off the right of the graph.\n        k1end += 2\n      } else if (y1 > text2Length) {\n        // Ran off the bottom of the graph.\n        k1start += 2\n      } else if (front) {\n        const k2Offset = vOffset + delta - k1\n        if (k2Offset >= 0 && k2Offset < vLength && v2[k2Offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          const x2 = text1Length - v2[k2Offset]\n          if (x1 >= x2) {\n            // Overlap detected.\n            return bisectSplit(text1, text2, x1, y1, deadline)\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (let k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      const k2Offset = vOffset + k2\n      let x2\n      if (k2 === -d || (k2 !== d && v2[k2Offset - 1] < v2[k2Offset + 1])) {\n        x2 = v2[k2Offset + 1]\n      } else {\n        x2 = v2[k2Offset - 1] + 1\n      }\n      let y2 = x2 - k2\n      while (\n        x2 < text1Length &&\n        y2 < text2Length &&\n        text1.charAt(text1Length - x2 - 1) === text2.charAt(text2Length - y2 - 1)\n      ) {\n        x2++\n        y2++\n      }\n      v2[k2Offset] = x2\n      if (x2 > text1Length) {\n        // Ran off the left of the graph.\n        k2end += 2\n      } else if (y2 > text2Length) {\n        // Ran off the top of the graph.\n        k2start += 2\n      } else if (!front) {\n        const k1Offset = vOffset + delta - k2\n        if (k1Offset >= 0 && k1Offset < vLength && v1[k1Offset] !== -1) {\n          const x1 = v1[k1Offset]\n          const y1 = vOffset + x1 - k1Offset\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1Length - x2\n          if (x1 >= x2) {\n            // Overlap detected.\n            return bisectSplit(text1, text2, x1, y1, deadline)\n          }\n        }\n      }\n    }\n  }\n  // Number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ]\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n *\n * @param text1 - Old string to be diffed.\n * @param text2 - New string to be diffed.\n * @param x - Index of split point in text1.\n * @param y - Index of split point in text2.\n * @param deadline - Time at which to bail if not yet complete.\n * @returns Array of diff tuples.\n * @internal\n */\nfunction bisectSplit(text1: string, text2: string, x: number, y: number, deadline: number): Diff[] {\n  const text1a = text1.substring(0, x)\n  const text2a = text2.substring(0, y)\n  const text1b = text1.substring(x)\n  const text2b = text2.substring(y)\n\n  // Compute both diffs serially.\n  const diffs = doDiff(text1a, text2a, {checkLines: false, deadline})\n  const diffsb = doDiff(text1b, text2b, {checkLines: false, deadline})\n\n  return diffs.concat(diffsb)\n}\n","import {getCommonPrefix} from './commonPrefix.js'\nimport {getCommonSuffix} from './commonSuffix.js'\n\ntype HalfMatch = [string, string, string, string, string]\n\n/**\n * Does a slice of shorttext exist within longtext such that the slice\n * is at least half the length of longtext?\n *\n * @param longtext - Longer string.\n * @param shorttext - Shorter string.\n * @param i - Start index of quarter length slice within longtext.\n * @returns Five element Array, containing the prefix of\n *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n *     of shorttext and the common middle.  Or null if there was no match.\n * @internal\n */\nexport function findHalfMatch(text1: string, text2: string, timeout = 1): null | HalfMatch {\n  if (timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null\n  }\n\n  const longText = text1.length > text2.length ? text1 : text2\n  const shortText = text1.length > text2.length ? text2 : text1\n  if (longText.length < 4 || shortText.length * 2 < longText.length) {\n    return null // Pointless.\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  const halfMatch1 = halfMatchI(longText, shortText, Math.ceil(longText.length / 4))\n  // Check again based on the third quarter.\n  const halfMatch2 = halfMatchI(longText, shortText, Math.ceil(longText.length / 2))\n\n  let halfMatch\n  if (halfMatch1 && halfMatch2) {\n    // Both matched.  Select the longest.\n    halfMatch = halfMatch1[4].length > halfMatch2[4].length ? halfMatch1 : halfMatch2\n  } else if (!halfMatch1 && !halfMatch2) {\n    return null\n  } else if (!halfMatch2) {\n    halfMatch = halfMatch1\n  } else if (!halfMatch1) {\n    halfMatch = halfMatch2\n  }\n\n  if (!halfMatch) {\n    throw new Error('Unable to find a half match.')\n  }\n\n  // A half-match was found, sort out the return data.\n  let text1A: string\n  let text1B: string\n  let text2A: string\n  let text2B: string\n\n  if (text1.length > text2.length) {\n    text1A = halfMatch[0]\n    text1B = halfMatch[1]\n    text2A = halfMatch[2]\n    text2B = halfMatch[3]\n  } else {\n    text2A = halfMatch[0]\n    text2B = halfMatch[1]\n    text1A = halfMatch[2]\n    text1B = halfMatch[3]\n  }\n  const midCommon = halfMatch[4]\n  return [text1A, text1B, text2A, text2B, midCommon]\n}\n\n/**\n * Do the two texts share a slice which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n *\n * @param longText - First string.\n * @param shortText - Second string.\n * @returns Five element array, containing the prefix of longText,\n *     the suffix of longText, the prefix of shortText, the suffix of\n *     shortText and the common middle.  Or null if there was no match.\n * @internal\n */\nfunction halfMatchI(longText: string, shortText: string, i: number): null | HalfMatch {\n  // Start with a 1/4 length slice at position i as a seed.\n  const seed = longText.slice(i, i + Math.floor(longText.length / 4))\n  let j = -1\n  let bestCommon = ''\n  let bestLongTextA\n  let bestLongTextB\n  let bestShortTextA\n  let bestShortTextB\n\n  while ((j = shortText.indexOf(seed, j + 1)) !== -1) {\n    const prefixLength = getCommonPrefix(longText.slice(i), shortText.slice(j))\n    const suffixLength = getCommonSuffix(longText.slice(0, i), shortText.slice(0, j))\n    if (bestCommon.length < suffixLength + prefixLength) {\n      bestCommon = shortText.slice(j - suffixLength, j) + shortText.slice(j, j + prefixLength)\n      bestLongTextA = longText.slice(0, i - suffixLength)\n      bestLongTextB = longText.slice(i + prefixLength)\n      bestShortTextA = shortText.slice(0, j - suffixLength)\n      bestShortTextB = shortText.slice(j + prefixLength)\n    }\n  }\n  if (bestCommon.length * 2 >= longText.length) {\n    return [\n      bestLongTextA || '',\n      bestLongTextB || '',\n      bestShortTextA || '',\n      bestShortTextB || '',\n      bestCommon || '',\n    ]\n  }\n\n  return null\n}\n","import type {Diff} from './diff.js'\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of text.\n *\n * @param diffs - Array of diff tuples.\n * @param lineArray - Array of unique strings.\n * @internal\n */\nexport function charsToLines(diffs: Diff[], lineArray: string[]): void {\n  for (let x = 0; x < diffs.length; x++) {\n    const chars = diffs[x][1]\n    const text: string[] = []\n    for (let y = 0; y < chars.length; y++) {\n      text[y] = lineArray[chars.charCodeAt(y)]\n    }\n    diffs[x][1] = text.join('')\n  }\n}\n","/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n *\n * @param textA - First string.\n * @param textB - Second string.\n * @returns An object containing the encoded textA, the encoded textB and\n *   the array of unique strings. The zeroth element of the array of unique\n *   strings is intentionally blank.\n * @internal\n */\nexport function linesToChars(\n  textA: string,\n  textB: string\n): {\n  chars1: string\n  chars2: string\n  lineArray: string[]\n} {\n  const lineArray: string[] = [] // e.g. lineArray[4] === 'Hello\\n'\n  const lineHash: {[key: string]: number} = {} // e.g. lineHash['Hello\\n'] === 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = ''\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   *\n   * @param text - String to encode.\n   * @returns Encoded string.\n   * @internal\n   */\n  function diffLinesToMunge(text: string) {\n    let chars = ''\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    let lineStart = 0\n    let lineEnd = -1\n    // Keeping our own length variable is faster than looking it up.\n    let lineArrayLength = lineArray.length\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart)\n      if (lineEnd === -1) {\n        lineEnd = text.length - 1\n      }\n      let line = text.slice(lineStart, lineEnd + 1)\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line])\n      } else {\n        if (lineArrayLength === maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.slice(lineStart)\n          lineEnd = text.length\n        }\n        chars += String.fromCharCode(lineArrayLength)\n        lineHash[line] = lineArrayLength\n        lineArray[lineArrayLength++] = line\n      }\n      lineStart = lineEnd + 1\n    }\n    return chars\n  }\n  // Allocate 2/3rds of the space for textA, the rest for textB.\n  let maxLines = 40000\n  const chars1 = diffLinesToMunge(textA)\n  maxLines = 65535\n  const chars2 = diffLinesToMunge(textB)\n  return {chars1, chars2, lineArray}\n}\n","import {charsToLines} from './charsToLines.js'\nimport {cleanupSemantic} from './cleanup.js'\nimport {linesToChars} from './linesToChars.js'\nimport {\n  doDiff,\n  DIFF_DELETE,\n  DIFF_EQUAL,\n  DIFF_INSERT,\n  type Diff,\n  type InternalDiffOptions,\n} from './diff.js'\n\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n *\n * @param textA - Old string to be diffed.\n * @param textB - New string to be diffed.\n * @param options - Options for the differ.\n * @returns Array of diff tuples.\n * @internal\n */\nexport function doLineModeDiff(textA: string, textB: string, opts: InternalDiffOptions): Diff[] {\n  // Don't reassign fn params\n  let text1 = textA\n  let text2 = textB\n\n  // Scan the text on a line-by-line basis first.\n  const a = linesToChars(text1, text2)\n  text1 = a.chars1\n  text2 = a.chars2\n  const linearray = a.lineArray\n\n  let diffs = doDiff(text1, text2, {\n    checkLines: false,\n    deadline: opts.deadline,\n  })\n\n  // Convert the diff back to original text.\n  charsToLines(diffs, linearray)\n  // Eliminate freak matches (e.g. blank lines)\n  diffs = cleanupSemantic(diffs)\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push([DIFF_EQUAL, ''])\n  let pointer = 0\n  let countDelete = 0\n  let countInsert = 0\n  let textDelete = ''\n  let textInsert = ''\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        countInsert++\n        textInsert += diffs[pointer][1]\n        break\n      case DIFF_DELETE:\n        countDelete++\n        textDelete += diffs[pointer][1]\n        break\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (countDelete >= 1 && countInsert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - countDelete - countInsert, countDelete + countInsert)\n          pointer = pointer - countDelete - countInsert\n          const aa = doDiff(textDelete, textInsert, {\n            checkLines: false,\n            deadline: opts.deadline,\n          })\n          for (let j = aa.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, aa[j])\n          }\n          pointer += aa.length\n        }\n        countInsert = 0\n        countDelete = 0\n        textDelete = ''\n        textInsert = ''\n        break\n      default:\n        throw new Error('Unknown diff operation.')\n    }\n    pointer++\n  }\n  diffs.pop() // Remove the dummy entry at the end.\n\n  return diffs\n}\n","import {\n  doDiff,\n  DIFF_DELETE,\n  DIFF_EQUAL,\n  DIFF_INSERT,\n  type Diff,\n  type InternalDiffOptions,\n} from './diff.js'\nimport {bisect} from './bisect.js'\nimport {findHalfMatch} from './halfMatch.js'\nimport {doLineModeDiff} from './lineMode.js'\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n *\n * @param text1 - Old string to be diffed.\n * @param text2 - New string to be diffed.\n * @param checklines - Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param deadline - Time when the diff should be complete by.\n * @returns Array of diff tuples.\n * @internal\n */\nexport function computeDiff(text1: string, text2: string, opts: InternalDiffOptions): Diff[] {\n  let diffs: Diff[]\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]]\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]]\n  }\n\n  const longtext = text1.length > text2.length ? text1 : text2\n  const shorttext = text1.length > text2.length ? text2 : text1\n  const i = longtext.indexOf(shorttext)\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ]\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = DIFF_DELETE\n      diffs[2][0] = DIFF_DELETE\n    }\n    return diffs\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ]\n  }\n\n  // Check to see if the problem can be split in two.\n  const halfMatch = findHalfMatch(text1, text2)\n  if (halfMatch) {\n    // A half-match was found, sort out the return data.\n    const text1A = halfMatch[0]\n    const text1B = halfMatch[1]\n    const text2A = halfMatch[2]\n    const text2B = halfMatch[3]\n    const midCommon = halfMatch[4]\n    // Send both pairs off for separate processing.\n    const diffsA = doDiff(text1A, text2A, opts)\n    const diffsB = doDiff(text1B, text2B, opts)\n    // Merge the results.\n    return diffsA.concat([[DIFF_EQUAL, midCommon]], diffsB)\n  }\n\n  if (opts.checkLines && text1.length > 100 && text2.length > 100) {\n    return doLineModeDiff(text1, text2, opts)\n  }\n\n  return bisect(text1, text2, opts.deadline)\n}\n","import {isHighSurrogate, isLowSurrogate} from '../utils/surrogatePairs.js'\nimport {cleanupMerge} from './cleanup.js'\nimport {getCommonPrefix} from './commonPrefix.js'\nimport {getCommonSuffix} from './commonSuffix.js'\nimport {computeDiff} from './compute.js'\n\n/**\n * Diff type for deleted text.\n *\n * @public\n */\nexport const DIFF_DELETE = -1\n\n/**\n * Diff type for inserted text.\n *\n * @public\n */\nexport const DIFF_INSERT = 1\n\n/**\n * Diff type for text that is equal.\n *\n * @public\n */\nexport const DIFF_EQUAL = 0\n\n/**\n * The three different types of changes possible in a diff:\n * - `DIFF_DELETE`: a deletion of text\n * - `DIFF_INSERT`: an insertion of text\n * - `DIFF_EQUAL` : an equal text\n *\n * @public\n */\nexport type DiffType = typeof DIFF_DELETE | typeof DIFF_INSERT | typeof DIFF_EQUAL\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n *\n * @public\n */\nexport type Diff = [DiffType, string]\n\n/**\n * Options for generating a diff.\n *\n * @public\n */\nexport interface DiffOptions {\n  checkLines: boolean\n  timeout: number\n}\n\n/**\n * @internal\n */\nexport interface InternalDiffOptions {\n  checkLines: boolean\n\n  /**\n   * Time when the diff should be complete by.\n   */\n  deadline: number\n}\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n *\n * @param textA - Old string to be diffed.\n * @param textA - New string to be diffed.\n * @returns Array of diff tuples.\n * @public\n */\nexport function diff(\n  textA: null | string,\n  textB: null | string,\n  opts?: Partial<DiffOptions>\n): Diff[] {\n  // Check for null inputs.\n  if (textA === null || textB === null) {\n    throw new Error('Null input. (diff)')\n  }\n\n  const diffs = doDiff(textA, textB, createInternalOpts(opts || {}))\n  adjustDiffForSurrogatePairs(diffs)\n  return diffs\n}\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n *\n * @param textA - Old string to be diffed.\n * @param textB - New string to be diffed.\n * @returns Array of diff tuples.\n * @internal\n */\nexport function doDiff(textA: string, textB: string, options: InternalDiffOptions): Diff[] {\n  // Don't reassign fn params\n  let text1 = textA\n  let text2 = textB\n\n  // Check for equality (speedup).\n  if (text1 === text2) {\n    return text1 ? [[DIFF_EQUAL, text1]] : []\n  }\n\n  // Trim off common prefix (speedup).\n  let commonlength = getCommonPrefix(text1, text2)\n  const commonprefix = text1.substring(0, commonlength)\n  text1 = text1.substring(commonlength)\n  text2 = text2.substring(commonlength)\n\n  // Trim off common suffix (speedup).\n  commonlength = getCommonSuffix(text1, text2)\n  const commonsuffix = text1.substring(text1.length - commonlength)\n  text1 = text1.substring(0, text1.length - commonlength)\n  text2 = text2.substring(0, text2.length - commonlength)\n\n  // Compute the diff on the middle block.\n  let diffs = computeDiff(text1, text2, options)\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix])\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix])\n  }\n  diffs = cleanupMerge(diffs)\n  return diffs\n}\n\nfunction createDeadLine(timeout: undefined | number): number {\n  let t = 1\n  if (typeof timeout !== 'undefined') {\n    t = timeout <= 0 ? Number.MAX_VALUE : timeout\n  }\n  return Date.now() + t * 1000\n}\n\nfunction createInternalOpts(opts: Partial<DiffOptions>): InternalDiffOptions {\n  return {\n    checkLines: true,\n    deadline: createDeadLine(opts.timeout || 1.0),\n    ...opts,\n  }\n}\n\nfunction combineChar(data: string, char: string, dir: 1 | -1) {\n  return dir === 1 ? data + char : char + data\n}\n\n/**\n * Splits out a character in a given direction.\n */\nfunction splitChar(data: string, dir: 1 | -1): [string, string] {\n  return dir === 1\n    ? [data.substring(0, data.length - 1), data[data.length - 1]]\n    : [data.substring(1), data[0]]\n}\n\n/**\n * Checks if two entries of the diff has the same character in the same \"direction\".\n */\nfunction hasSharedChar(diffs: Diff[], i: number, j: number, dir: 1 | -1): boolean {\n  return dir === 1\n    ? diffs[i][1][diffs[i][1].length - 1] === diffs[j][1][diffs[j][1].length - 1]\n    : diffs[i][1][0] === diffs[j][1][0]\n}\n\n/**\n * Takes in a position of an EQUAL diff-type and attempts to \"deisolate\" the character for a given direction.\n * By this we mean that we attempt to either \"shift\" it to the later diffs, or bring another character next into this one.\n *\n * It's easier to understand with an example:\n *   [INSERT a, DELETE b, EQUAL cde, INSERT f, DELETE g]\n * shifting this forward will produce\n *   [INSERT a, DELETE b, EQUAL cd, INSERT ef, DELETE eg]\n *\n * This behavior is useful when `e` is actually a high surrogate character.\n *\n * Shifting it backwards produces\n *   [INSERT ac, DELETE bc, EQUAL cde, INSERT f, DELETE g]\n * which is useful when `c` is a low surrogate character.\n *\n * Note that these diffs are 100% semantically equal.\n *\n * If there's not a matching INSERT/DELETE then it's forced to insert an additional entry:\n *   [EQUAL abc, INSERT d, EQUAL e]\n * shifted forward becomes:\n *   [EQUAL ab, INSERT cd, DELETE c, EQUAL e]\n *\n * If the INSERT and DELETE ends with the same character it will instead deisolate it by\n * bring that charcter into _this_ equal:\n *   [EQUAL abc, INSERT de, DELETE df]\n * shifted forward actually becomes\n *   [EQUAL abcd, INSERT e, DELETE f]\n *\n * The original diff here is typically never produced by the diff algorithm directly,\n * but they occur when we isolate characters in other places.\n */\nfunction deisolateChar(diffs: Diff[], i: number, dir: 1 | -1) {\n  const inv = dir === 1 ? -1 : 1\n  let insertIdx: null | number = null\n  let deleteIdx: null | number = null\n\n  let j = i + dir\n  for (; j >= 0 && j < diffs.length && (insertIdx === null || deleteIdx === null); j += dir) {\n    const [op, text] = diffs[j]\n    if (text.length === 0) {\n      continue\n    }\n\n    if (op === DIFF_INSERT) {\n      if (insertIdx === null) {\n        insertIdx = j\n      }\n      continue\n    } else if (op === DIFF_DELETE) {\n      if (deleteIdx === null) {\n        deleteIdx = j\n      }\n      continue\n    } else if (op === DIFF_EQUAL) {\n      if (insertIdx === null && deleteIdx === null) {\n        // This means that there was two consecutive EQUAL. Kinda weird, but easy to handle.\n        const [rest, char] = splitChar(diffs[i][1], dir)\n        diffs[i][1] = rest\n        diffs[j][1] = combineChar(diffs[j][1], char, inv)\n        return\n      }\n      break\n    }\n  }\n\n  if (insertIdx !== null && deleteIdx !== null && hasSharedChar(diffs, insertIdx, deleteIdx, dir)) {\n    // Special case.\n    const [insertText, insertChar] = splitChar(diffs[insertIdx][1], inv)\n    const [deleteText] = splitChar(diffs[deleteIdx][1], inv)\n    diffs[insertIdx][1] = insertText\n    diffs[deleteIdx][1] = deleteText\n    diffs[i][1] = combineChar(diffs[i][1], insertChar, dir)\n    return\n  }\n\n  const [text, char] = splitChar(diffs[i][1], dir)\n  diffs[i][1] = text\n\n  if (insertIdx === null) {\n    diffs.splice(j, 0, [DIFF_INSERT, char])\n\n    // We need to adjust deleteIdx here since it's been shifted\n    if (deleteIdx !== null && deleteIdx >= j) deleteIdx++\n  } else {\n    diffs[insertIdx][1] = combineChar(diffs[insertIdx][1], char, inv)\n  }\n\n  if (deleteIdx === null) {\n    diffs.splice(j, 0, [DIFF_DELETE, char])\n  } else {\n    diffs[deleteIdx][1] = combineChar(diffs[deleteIdx][1], char, inv)\n  }\n}\n\nfunction adjustDiffForSurrogatePairs(diffs: Diff[]) {\n  // Go over each pair of diffs and see if there was a split at a surrogate pair\n  for (let i = 0; i < diffs.length; i++) {\n    const [diffType, diffText] = diffs[i]\n\n    if (diffText.length === 0) continue\n\n    const firstChar = diffText[0]\n    const lastChar = diffText[diffText.length - 1]\n\n    if (isHighSurrogate(lastChar) && diffType === DIFF_EQUAL) {\n      deisolateChar(diffs, i, 1)\n    }\n\n    if (isLowSurrogate(firstChar) && diffType === DIFF_EQUAL) {\n      deisolateChar(diffs, i, -1)\n    }\n  }\n\n  for (let i = 0; i < diffs.length; i++) {\n    // Remove any empty diffs\n    if (diffs[i][1].length === 0) {\n      diffs.splice(i, 1)\n    }\n  }\n}\n","/* eslint-disable no-bitwise */\ninterface BitapOptions {\n  threshold: number\n  distance: number\n}\n\ninterface Alphabet {\n  [char: string]: number\n}\n\nconst DEFAULT_OPTIONS: BitapOptions = {\n  /**\n   * At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n   */\n  threshold: 0.5,\n\n  /**\n   * How far to search for a match (0 = exact location, 1000+ = broad match).\n   * A match this many characters away from the expected location will add\n   * 1.0 to the score (0.0 is a perfect match).\n   */\n  distance: 1000,\n}\n\nfunction applyDefaults(options: Partial<BitapOptions>): BitapOptions {\n  return {...DEFAULT_OPTIONS, ...options}\n}\n\n// The number of bits in an int.\nconst MAX_BITS = 32\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n *\n * @param text - The text to search.\n * @param pattern - The pattern to search for.\n * @param loc - The location to search around.\n * @returns Best match index or -1.\n * @internal\n */\nexport function bitap(\n  text: string,\n  pattern: string,\n  loc: number,\n  opts: Partial<BitapOptions> = {}\n): number {\n  if (pattern.length > MAX_BITS) {\n    throw new Error('Pattern too long for this browser.')\n  }\n\n  const options = applyDefaults(opts)\n\n  // Initialise the alphabet.\n  const s = getAlphabetFromPattern(pattern)\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   *\n   * @param e - Number of errors in match.\n   * @param x - Location of match.\n   * @returns Overall - score for match (0.0 = good, 1.0 = bad).\n   * @internal\n   */\n  function getBitapScore(e: number, x: number) {\n    const accuracy = e / pattern.length\n    const proximity = Math.abs(loc - x)\n    if (!options.distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy\n    }\n    return accuracy + proximity / options.distance\n  }\n\n  // Highest score beyond which we give up.\n  let scoreThreshold = options.threshold\n  // Is there a nearby exact match? (speedup)\n  let bestLoc = text.indexOf(pattern, loc)\n  if (bestLoc !== -1) {\n    scoreThreshold = Math.min(getBitapScore(0, bestLoc), scoreThreshold)\n    // What about in the other direction? (speedup)\n    bestLoc = text.lastIndexOf(pattern, loc + pattern.length)\n    if (bestLoc !== -1) {\n      scoreThreshold = Math.min(getBitapScore(0, bestLoc), scoreThreshold)\n    }\n  }\n\n  // Initialise the bit arrays.\n  const matchmask = 1 << (pattern.length - 1)\n  bestLoc = -1\n\n  let binMin\n  let binMid\n  let binMax = pattern.length + text.length\n  let lastRd: number[] = []\n  for (let d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    binMin = 0\n    binMid = binMax\n    while (binMin < binMid) {\n      if (getBitapScore(d, loc + binMid) <= scoreThreshold) {\n        binMin = binMid\n      } else {\n        binMax = binMid\n      }\n      binMid = Math.floor((binMax - binMin) / 2 + binMin)\n    }\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid\n    let start = Math.max(1, loc - binMid + 1)\n    const finish = Math.min(loc + binMid, text.length) + pattern.length\n\n    const rd: number[] = new Array(finish + 2)\n    rd[finish + 1] = (1 << d) - 1\n    for (let j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      const charMatch = s[text.charAt(j - 1)]\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] =\n          (((rd[j + 1] << 1) | 1) & charMatch) |\n          (((lastRd[j + 1] | lastRd[j]) << 1) | 1) |\n          lastRd[j + 1]\n      }\n      if (rd[j] & matchmask) {\n        const score = getBitapScore(d, j - 1)\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= scoreThreshold) {\n          // Told you so.\n          scoreThreshold = score\n          bestLoc = j - 1\n          if (bestLoc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - bestLoc)\n          } else {\n            // Already passed loc, downhill from here on in.\n            break\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (getBitapScore(d + 1, loc) > scoreThreshold) {\n      break\n    }\n    lastRd = rd\n  }\n  return bestLoc\n}\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n *\n * @param pattern - The text to encode.\n * @returns Hash of character locations.\n * @internal\n */\nfunction getAlphabetFromPattern(pattern: string): Alphabet {\n  const s: Alphabet = {}\n  for (let i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0\n  }\n  for (let i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1)\n  }\n  return s\n}\n","import {bitap} from './bitap.js'\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n *\n * @param text - The text to search.\n * @param pattern - The pattern to search for.\n * @param searchLocation - The location to search around.\n * @returns Best match index or -1.\n * @public\n */\nexport function match(text: string, pattern: string, searchLocation: number): number {\n  // Check for null inputs.\n  if (text === null || pattern === null || searchLocation === null) {\n    throw new Error('Null input. (match())')\n  }\n\n  const loc = Math.max(0, Math.min(searchLocation, text.length))\n  if (text === pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1\n  } else if (text.substring(loc, loc + pattern.length) === pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc\n  }\n\n  // Do a fuzzy compare.\n  return bitap(text, pattern, loc)\n}\n","import type {Diff} from '../diff/diff.js'\n\n/**\n * Object representing one patch operation.\n *\n * @public\n */\nexport interface Patch {\n  diffs: Diff[]\n\n  start1: number\n  start2: number\n  utf8Start1: number\n  utf8Start2: number\n\n  length1: number\n  length2: number\n  utf8Length1: number\n  utf8Length2: number\n}\n\n/**\n * Clones a patch object.\n *\n * @param patch - The patch to clone\n * @returns Cloned object\n * @private\n */\nexport function clone(patch: Patch): Patch {\n  return {...patch, diffs: patch.diffs.map((diff) => ({...diff}))}\n}\n\n/**\n * Performs a deep copy of a patch array.\n *\n * @param patches - Patches to clone\n * @returns Cloned array\n * @internal\n */\nexport function deepCopy(patches: Patch[]): Patch[] {\n  return patches.map(clone)\n}\n\n/**\n * Create a new, empty, patch object.\n *\n * @param start1 - The index to start the \"from\" at\n * @param start2 - The index to start the \"to\" at\n * @returns New patch object\n * @internal\n */\nexport function createPatchObject(start1: number, start2: number): Patch {\n  return {\n    diffs: [],\n\n    start1,\n    start2,\n    utf8Start1: start1,\n    utf8Start2: start2,\n\n    length1: 0,\n    length2: 0,\n    utf8Length1: 0,\n    utf8Length2: 0,\n  }\n}\n","import {DIFF_DELETE, DIFF_INSERT, type Diff} from './diff.js'\n\n/**\n * Compute and return the source text (all equalities and deletions).\n *\n * @param diffs - Array of diff tuples.\n * @returns Source text.\n * @private\n */\nexport function diffText1(diffs: Diff[]): string {\n  const text: string[] = []\n  for (let x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1]\n    }\n  }\n  return text.join('')\n}\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n *\n * @param diffs - Array of diff tuples.\n * @returns Destination text.\n * @private\n */\nexport function diffText2(diffs: Diff[]): string {\n  const text: string[] = []\n  for (let x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1]\n    }\n  }\n  return text.join('')\n}\n","import {cloneDiff} from '../diff/clone.js'\nimport type {Patch} from '../index.js'\n\n/**\n * Counts the number of bytes in a string.\n * Note that while this approach may seem heavy-handed, it is actually\n * significantly faster than both `new Blob([str]).size` and `TextEncoder`.\n *\n * @param str - String to count\n * @returns Number of bytes\n */\nexport function countUtf8Bytes(str: string): number {\n  let bytes = 0\n  for (let i = 0; i < str.length; i++) {\n    const codePoint = str.codePointAt(i)\n    if (typeof codePoint === 'undefined') {\n      throw new Error('Failed to get codepoint')\n    }\n    bytes += utf8len(codePoint)\n  }\n  return bytes\n}\n\n/**\n * Options for the index adjustment operations.\n *\n * @public\n */\nexport interface AdjustmentOptions {\n  /**\n   * When converting indices between UTF-8 and UCS-2, certain scenarios can occur\n   * where we go beyond the target offset. This can happen in particular with\n   * surrogate pairs/high codepoints, when the base string we are applying the\n   * patch to does not fully match the one that was used to generate the patch.\n   * Defaults to `false`.\n   */\n  allowExceedingIndices?: boolean\n}\n\n/**\n * Takes a `patches` array as produced by diff-match-patch and adjusts the\n * `start1` and `start2` properties so that they refer to UCS-2 index instead\n * of a UTF-8 index.\n *\n * @param patches - The patches to adjust\n * @param base - The base string to use for counting bytes\n * @param options - Options for the adjustment of indices\n * @returns A new array of patches with adjusted indicies\n * @beta\n */\nexport function adjustIndiciesToUcs2(\n  patches: Patch[],\n  base: string,\n  options: AdjustmentOptions = {}\n): Patch[] {\n  let byteOffset = 0\n  let idx = 0 // index into the input.\n\n  function advanceTo(target: number) {\n    for (; byteOffset < target; ) {\n      const codePoint = base.codePointAt(idx)\n      if (typeof codePoint === 'undefined') {\n        // Reached the end of the base string - the indicies won't be correct,\n        // but we also cannot advance any further to find a closer index.\n        return idx\n      }\n\n      byteOffset += utf8len(codePoint)\n\n      // This is encoded as a surrogate pair.\n      if (codePoint > 0xffff) {\n        idx += 2\n      } else {\n        idx += 1\n      }\n    }\n\n    if (!options.allowExceedingIndices && byteOffset !== target) {\n      throw new Error('Failed to determine byte offset')\n    }\n\n    return idx\n  }\n\n  const adjusted: Patch[] = []\n  for (const patch of patches) {\n    adjusted.push({\n      diffs: patch.diffs.map((diff) => cloneDiff(diff)),\n      start1: advanceTo(patch.start1),\n      start2: advanceTo(patch.start2),\n      utf8Start1: patch.utf8Start1,\n      utf8Start2: patch.utf8Start2,\n      length1: patch.length1,\n      length2: patch.length2,\n      utf8Length1: patch.utf8Length1,\n      utf8Length2: patch.utf8Length2,\n    })\n  }\n\n  return adjusted\n}\n\nfunction utf8len(codePoint: number): 1 | 2 | 3 | 4 {\n  // See table at https://en.wikipedia.org/wiki/UTF-8\n  if (codePoint <= 0x007f) return 1\n  if (codePoint <= 0x07ff) return 2\n  if (codePoint <= 0xffff) return 3\n  return 4\n}\n","// The number of bits in an int.\nexport const MAX_BITS = 32\n\nexport const DEFAULT_MARGIN = 4\n","import {cleanupSemantic, cleanupEfficiency} from '../diff/cleanup.js'\nimport {diff, type Diff, DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT} from '../diff/diff.js'\nimport {diffText1} from '../diff/diffText.js'\nimport {isLowSurrogate} from '../utils/surrogatePairs.js'\nimport {countUtf8Bytes} from '../utils/utf8Indices.js'\nimport {MAX_BITS} from './constants.js'\nimport {createPatchObject, type Patch} from './createPatchObject.js'\n\n/**\n * Options for patch generation.\n *\n * @public\n */\nexport interface MakePatchOptions {\n  // Chunk size for context length.\n  margin: number\n}\n\nconst DEFAULT_OPTS: MakePatchOptions = {\n  margin: 4,\n}\n\nfunction getDefaultOpts(opts: Partial<MakePatchOptions> = {}): MakePatchOptions {\n  return {\n    ...DEFAULT_OPTS,\n    ...opts,\n  }\n}\n\n/**\n * Compute a list of patches to turn based on passed diffs.\n *\n * @param diffs - Array of diff tuples.\n * @param options - Options for the patch generation.\n * @returns Array of Patch objects.\n * @public\n */\nexport function make(diffs: Diff[], options?: Partial<MakePatchOptions>): Patch[]\n\n/**\n * Compute a list of patches to turn textA into textB.\n *\n * @param textA - Original text.\n * @param textB - New text.\n * @param options - Options for the patch generation.\n * @returns Array of Patch objects.\n * @public\n */\nexport function make(textA: string, textB: string, options?: Partial<MakePatchOptions>): Patch[]\n\n/**\n * Compute a list of patches to turn textA into textB using provided diff tuples.\n *\n * @param textA - Original text.\n * @param diffs - Diff tuples to use as base.\n * @param options - Options for the patch generation.\n * @returns Array of Patch objects.\n * @public\n */\nexport function make(textA: string, diffs: Diff[], options?: Partial<MakePatchOptions>): Patch[]\n\nexport function make(\n  a: Diff[] | string,\n  b?: Partial<MakePatchOptions> | string | Diff[],\n  options?: Partial<MakePatchOptions>\n): Patch[] {\n  if (typeof a === 'string' && typeof b === 'string') {\n    // Method 1: textA, textB\n    // Compute diffs from textA and textB.\n    let diffs = diff(a, b, {checkLines: true})\n    if (diffs.length > 2) {\n      diffs = cleanupSemantic(diffs)\n      diffs = cleanupEfficiency(diffs)\n    }\n    return _make(a, diffs, getDefaultOpts(options))\n  }\n\n  if (a && Array.isArray(a) && typeof b === 'undefined') {\n    // Method 2: diffs\n    // Compute textA from diffs.\n    return _make(diffText1(a), a, getDefaultOpts(options))\n  }\n\n  if (typeof a === 'string' && b && Array.isArray(b)) {\n    // Method 3: textA, diffs\n    return _make(a, b, getDefaultOpts(options))\n  }\n\n  throw new Error('Unknown call format to make()')\n}\n\nfunction _make(textA: string, diffs: Diff[], options: MakePatchOptions): Patch[] {\n  if (diffs.length === 0) {\n    return [] // Get rid of the null case.\n  }\n  const patches: Patch[] = []\n\n  let patch = createPatchObject(0, 0)\n  let patchDiffLength = 0 // Keeping our own length var is faster in JS.\n  let charCount1 = 0 // Number of characters into the textA string.\n  let charCount2 = 0 // Number of characters into the textB string.\n  let utf8Count1 = 0 // Number of utf-8 bytes into the textA string.\n  let utf8Count2 = 0 // Number of utf-8 bytes into the textB string.\n\n  // Start with textA (prepatchText) and apply the diffs until we arrive at\n  // textB (postpatchText).  We recreate the patches one by one to determine\n  // context info.\n  let prepatchText = textA\n  let postpatchText = textA\n\n  for (let x = 0; x < diffs.length; x++) {\n    const currentDiff = diffs[x]\n    const [diffType, diffText] = currentDiff\n    const diffTextLength = diffText.length\n    const diffByteLength = countUtf8Bytes(diffText)\n\n    if (!patchDiffLength && diffType !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = charCount1\n      patch.start2 = charCount2\n      patch.utf8Start1 = utf8Count1\n      patch.utf8Start2 = utf8Count2\n    }\n\n    switch (diffType) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = currentDiff\n        patch.length2 += diffTextLength\n        patch.utf8Length2 += diffByteLength\n        postpatchText =\n          postpatchText.substring(0, charCount2) + diffText + postpatchText.substring(charCount2)\n        break\n      case DIFF_DELETE:\n        patch.length1 += diffTextLength\n        patch.utf8Length1 += diffByteLength\n        patch.diffs[patchDiffLength++] = currentDiff\n        postpatchText =\n          postpatchText.substring(0, charCount2) +\n          postpatchText.substring(charCount2 + diffTextLength)\n        break\n      case DIFF_EQUAL:\n        if (diffTextLength <= 2 * options.margin && patchDiffLength && diffs.length !== x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = currentDiff\n          patch.length1 += diffTextLength\n          patch.length2 += diffTextLength\n          patch.utf8Length1 += diffByteLength\n          patch.utf8Length2 += diffByteLength\n        } else if (diffTextLength >= 2 * options.margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            addContext(patch, prepatchText, options)\n            patches.push(patch)\n            patch = createPatchObject(-1, -1)\n            patchDiffLength = 0\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // http://code.google.com/p/google-diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatchText = postpatchText\n            charCount1 = charCount2\n            utf8Count1 = utf8Count2\n          }\n        }\n        break\n      default:\n        throw new Error('Unknown diff type')\n    }\n\n    // Update the current character count.\n    if (diffType !== DIFF_INSERT) {\n      charCount1 += diffTextLength\n      utf8Count1 += diffByteLength\n    }\n    if (diffType !== DIFF_DELETE) {\n      charCount2 += diffTextLength\n      utf8Count2 += diffByteLength\n    }\n  }\n\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    addContext(patch, prepatchText, options)\n    patches.push(patch)\n  }\n\n  return patches\n}\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond MAX_BITS.\n *\n * @param patch - The patch to grow.\n * @param text - Source text.\n * @param opts\n * @internal\n */\nexport function addContext(patch: Patch, text: string, opts: MakePatchOptions): void {\n  if (text.length === 0) {\n    return\n  }\n  let pattern = text.substring(patch.start2, patch.start2 + patch.length1)\n  let padding = 0\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (\n    text.indexOf(pattern) !== text.lastIndexOf(pattern) &&\n    pattern.length < MAX_BITS - opts.margin - opts.margin\n  ) {\n    padding += opts.margin\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding)\n  }\n  // Add one chunk for good luck.\n  padding += opts.margin\n\n  // Add the prefix.\n\n  // Avoid splitting inside a surrogate.\n  let prefixStart = patch.start2 - padding\n  if (prefixStart >= 1 && isLowSurrogate(text[prefixStart])) {\n    prefixStart--\n  }\n\n  const prefix = text.substring(prefixStart, patch.start2)\n  if (prefix) {\n    patch.diffs.unshift([DIFF_EQUAL, prefix])\n  }\n\n  const prefixLength = prefix.length\n  const prefixUtf8Length = countUtf8Bytes(prefix)\n\n  // Add the suffix.\n\n  // Avoid splitting inside a surrogate.\n  let suffixEnd = patch.start2 + patch.length1 + padding\n  if (suffixEnd < text.length && isLowSurrogate(text[suffixEnd])) {\n    suffixEnd++\n  }\n\n  const suffix = text.substring(patch.start2 + patch.length1, suffixEnd)\n  if (suffix) {\n    patch.diffs.push([DIFF_EQUAL, suffix])\n  }\n\n  const suffixLength = suffix.length\n  const suffixUtf8Length = countUtf8Bytes(suffix)\n\n  // Roll back the start points.\n  patch.start1 -= prefixLength\n  patch.start2 -= prefixLength\n  patch.utf8Start1 -= prefixUtf8Length\n  patch.utf8Start2 -= prefixUtf8Length\n\n  // Extend the lengths.\n  patch.length1 += prefixLength + suffixLength\n  patch.length2 += prefixLength + suffixLength\n  patch.utf8Length1 += prefixUtf8Length + suffixUtf8Length\n  patch.utf8Length2 += prefixUtf8Length + suffixUtf8Length\n}\n","import {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT, type Diff} from './diff.js'\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n *\n * @param diffs - Array of diff tuples.\n * @returns Number of changes.\n * @internal\n */\nexport function levenshtein(diffs: Diff[]): number {\n  let leven = 0\n  let insertions = 0\n  let deletions = 0\n\n  for (let x = 0; x < diffs.length; x++) {\n    const op = diffs[x][0]\n    const data = diffs[x][1]\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length\n        break\n      case DIFF_DELETE:\n        deletions += data.length\n        break\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        leven += Math.max(insertions, deletions)\n        insertions = 0\n        deletions = 0\n        break\n      default:\n        throw new Error('Unknown diff operation.')\n    }\n  }\n  leven += Math.max(insertions, deletions)\n  return leven\n}\n","import {DIFF_DELETE, DIFF_INSERT, type Diff} from './diff.js'\n\n/**\n * loc is a location in textA, compute and return the equivalent location in\n * textB.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n *\n * @param diffs - Array of diff tuples.\n * @param loc - Location within textA.\n * @returns Location within textB.\n */\nexport function xIndex(diffs: Diff[], loc: number): number {\n  let chars1 = 0\n  let chars2 = 0\n  let lastChars1 = 0\n  let lastChars2 = 0\n  let x\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length\n    }\n    if (chars1 > loc) {\n      // Overshot the location.\n      break\n    }\n    lastChars1 = chars1\n    lastChars2 = chars2\n  }\n  // Was the location was deleted?\n  if (diffs.length !== x && diffs[x][0] === DIFF_DELETE) {\n    return lastChars2\n  }\n  // Add the remaining character length.\n  return lastChars2 + (loc - lastChars1)\n}\n","import {DIFF_EQUAL} from '../diff/diff.js'\nimport {DEFAULT_MARGIN} from './constants.js'\nimport type {Patch} from './createPatchObject.js'\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n *\n * @param patches - Array of Patch objects.\n * @param margin - The margin length to add.\n * @returns The string, padded on each side.\n * @internal\n */\nexport function addPadding(patches: Patch[], margin: number = DEFAULT_MARGIN): string {\n  const paddingLength = margin\n  let nullPadding = ''\n  for (let x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x)\n  }\n\n  // Bump all the patches forward.\n  for (const p of patches) {\n    p.start1 += paddingLength\n    p.start2 += paddingLength\n    p.utf8Start1 += paddingLength\n    p.utf8Start2 += paddingLength\n  }\n\n  // Add some padding on start of first diff.\n  let patch = patches[0]\n  let diffs = patch.diffs\n  if (diffs.length === 0 || diffs[0][0] !== DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift([DIFF_EQUAL, nullPadding])\n    patch.start1 -= paddingLength // Should be 0.\n    patch.start2 -= paddingLength // Should be 0.\n    patch.utf8Start1 -= paddingLength // Should be 0.\n    patch.utf8Start2 -= paddingLength // Should be 0.\n    patch.length1 += paddingLength\n    patch.length2 += paddingLength\n    patch.utf8Length1 += paddingLength\n    patch.utf8Length2 += paddingLength\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    const firstDiffLength = diffs[0][1].length\n    const extraLength = paddingLength - firstDiffLength\n    diffs[0][1] = nullPadding.substring(firstDiffLength) + diffs[0][1]\n    patch.start1 -= extraLength\n    patch.start2 -= extraLength\n    patch.utf8Start1 -= extraLength\n    patch.utf8Start2 -= extraLength\n    patch.length1 += extraLength\n    patch.length2 += extraLength\n    patch.utf8Length1 += extraLength\n    patch.utf8Length2 += extraLength\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1]\n  diffs = patch.diffs\n  if (diffs.length === 0 || diffs[diffs.length - 1][0] !== DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push([DIFF_EQUAL, nullPadding])\n    patch.length1 += paddingLength\n    patch.length2 += paddingLength\n    patch.utf8Length1 += paddingLength\n    patch.utf8Length2 += paddingLength\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    const extraLength = paddingLength - diffs[diffs.length - 1][1].length\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength)\n    patch.length1 += extraLength\n    patch.length2 += extraLength\n    patch.utf8Length1 += extraLength\n    patch.utf8Length2 += extraLength\n  }\n\n  return nullPadding\n}\n","import {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT} from '../diff/diff.js'\nimport {diffText1, diffText2} from '../diff/diffText.js'\nimport {countUtf8Bytes} from '../utils/utf8Indices.js'\nimport {DEFAULT_MARGIN, MAX_BITS} from './constants.js'\nimport {createPatchObject, type Patch} from './createPatchObject.js'\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n *\n * @param patches - Array of Patch objects.\n * @internal\n */\nexport function splitMax(patches: Patch[], margin: number = DEFAULT_MARGIN): void {\n  const patchSize = MAX_BITS\n  for (let x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patchSize) {\n      continue\n    }\n    const bigpatch = patches[x]\n    // Remove the big old patch.\n    patches.splice(x--, 1)\n    let start1 = bigpatch.start1\n    let start2 = bigpatch.start2\n    let preContext = ''\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      const patch = createPatchObject(start1 - preContext.length, start2 - preContext.length)\n      let empty = true\n\n      if (preContext !== '') {\n        const precontextByteCount = countUtf8Bytes(preContext)\n        patch.length1 = preContext.length\n        patch.utf8Length1 = precontextByteCount\n        patch.length2 = preContext.length\n        patch.utf8Length2 = precontextByteCount\n        patch.diffs.push([DIFF_EQUAL, preContext])\n      }\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patchSize - margin) {\n        const diffType = bigpatch.diffs[0][0]\n        let diffText = bigpatch.diffs[0][1]\n        let diffTextByteCount = countUtf8Bytes(diffText)\n        if (diffType === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diffText.length\n          patch.utf8Length2 += diffTextByteCount\n          start2 += diffText.length\n          const diff = bigpatch.diffs.shift()\n          if (diff) {\n            patch.diffs.push(diff)\n          }\n          empty = false\n        } else if (\n          diffType === DIFF_DELETE &&\n          patch.diffs.length === 1 &&\n          patch.diffs[0][0] === DIFF_EQUAL &&\n          diffText.length > 2 * patchSize\n        ) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diffText.length\n          patch.utf8Length1 += diffTextByteCount\n          start1 += diffText.length\n          empty = false\n          patch.diffs.push([diffType, diffText])\n          bigpatch.diffs.shift()\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diffText = diffText.substring(0, patchSize - patch.length1 - margin)\n          diffTextByteCount = countUtf8Bytes(diffText)\n          patch.length1 += diffText.length\n          patch.utf8Length1 += diffTextByteCount\n          start1 += diffText.length\n          if (diffType === DIFF_EQUAL) {\n            patch.length2 += diffText.length\n            patch.utf8Length2 += diffTextByteCount\n            start2 += diffText.length\n          } else {\n            empty = false\n          }\n          patch.diffs.push([diffType, diffText])\n          if (diffText === bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift()\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diffText.length)\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      preContext = diffText2(patch.diffs)\n      preContext = preContext.substring(preContext.length - margin)\n      // Append the end context for this patch.\n      const postContext = diffText1(bigpatch.diffs).substring(0, margin)\n      const postContextByteCount = countUtf8Bytes(postContext)\n      if (postContext !== '') {\n        patch.length1 += postContext.length\n        patch.length2 += postContext.length\n        patch.utf8Length1 += postContextByteCount\n        patch.utf8Length2 += postContextByteCount\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postContext\n        } else {\n          patch.diffs.push([DIFF_EQUAL, postContext])\n        }\n      }\n      if (!empty) {\n        patches.splice(++x, 0, patch)\n      }\n    }\n  }\n}\n","/* eslint-disable max-depth */\n/* eslint-disable max-statements */\nimport {cleanupSemanticLossless} from '../diff/cleanup.js'\nimport {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT, diff} from '../diff/diff.js'\nimport {diffText1, diffText2} from '../diff/diffText.js'\nimport {levenshtein} from '../diff/levenshtein.js'\nimport {xIndex} from '../diff/xIndex.js'\nimport {match} from '../match/match.js'\nimport {adjustIndiciesToUcs2} from '../utils/utf8Indices.js'\nimport {addPadding} from './addPadding.js'\nimport {DEFAULT_MARGIN, MAX_BITS} from './constants.js'\nimport {splitMax} from './splitMax.js'\nimport type {Patch} from './createPatchObject.js'\n\n/**\n * Options for applying a patch.\n *\n * @public\n */\nexport interface ApplyPatchOptions {\n  /**\n   * Chunk size for context length\n   */\n  margin: number\n\n  /**\n   * When deleting a large block of text (over ~64 characters),\n   * how close do the contents have to be to match the expected contents.\n   * (0.0 = perfection, 1.0 = very loose).\n   */\n  deleteThreshold: number\n\n  /**\n   * When converting indices between UTF-8 and UCS-2, certain scenarios can occur\n   * where we go beyond the target offset. This can happen in particular with\n   * surrogate pairs/high codepoints, when the base string we are applying the\n   * patch to does not fully match the one that was used to generate the patch.\n   * Defaults to `false`.\n   */\n  allowExceedingIndices: boolean\n}\n\n/**\n * Result of a patch application operation.\n * Index 0 contains the new text\n * Index 1 contains an array of booleans indicating which patches were applied\n *\n * @public\n */\nexport type PatchResult = [string, boolean[]]\n\n/**\n * Merge a set of patches onto the text. Returns patched text, as well as a\n * list of true/false values indicating which patches were applied.\n *\n * @param patches - Array of Patch objects.\n * @param text - Old text.\n * @param opts - Optional settings for the patch application.\n * @returns Two element Array, containing the new text and an array of boolean values.\n * @public\n */\nexport function apply(\n  patches: Patch[],\n  originalText: string,\n  opts: Partial<ApplyPatchOptions> = {}\n): PatchResult {\n  if (typeof patches === 'string') {\n    throw new Error('Patches must be an array - pass the patch to `parsePatch()` first')\n  }\n\n  let text = originalText\n  if (patches.length === 0) {\n    return [text, []]\n  }\n\n  // Note: adjustment also deep-copies patches so that no changes are made to the originals.\n  const parsed = adjustIndiciesToUcs2(patches, text, {\n    allowExceedingIndices: opts.allowExceedingIndices,\n  })\n\n  const margin = opts.margin || DEFAULT_MARGIN\n  const deleteThreshold = opts.deleteThreshold || 0.4\n\n  const nullPadding = addPadding(parsed, margin)\n  text = nullPadding + text + nullPadding\n\n  splitMax(parsed, margin)\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  let delta = 0\n  const results: boolean[] = []\n  for (let x = 0; x < parsed.length; x++) {\n    const expectedLoc = parsed[x].start2 + delta\n    const text1 = diffText1(parsed[x].diffs)\n    let startLoc\n    let endLoc = -1\n    if (text1.length > MAX_BITS) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      startLoc = match(text, text1.substring(0, MAX_BITS), expectedLoc)\n      if (startLoc !== -1) {\n        endLoc = match(\n          text,\n          text1.substring(text1.length - MAX_BITS),\n          expectedLoc + text1.length - MAX_BITS\n        )\n        if (endLoc === -1 || startLoc >= endLoc) {\n          // Can't find valid trailing context.  Drop this patch.\n          startLoc = -1\n        }\n      }\n    } else {\n      startLoc = match(text, text1, expectedLoc)\n    }\n    if (startLoc === -1) {\n      // No match found.  :(\n      results[x] = false\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= parsed[x].length2 - parsed[x].length1\n    } else {\n      // Found a match.  :)\n      results[x] = true\n      delta = startLoc - expectedLoc\n      let text2\n      if (endLoc === -1) {\n        text2 = text.substring(startLoc, startLoc + text1.length)\n      } else {\n        text2 = text.substring(startLoc, endLoc + MAX_BITS)\n      }\n      if (text1 === text2) {\n        // Perfect match, just shove the replacement text in.\n        text =\n          text.substring(0, startLoc) +\n          diffText2(parsed[x].diffs) +\n          text.substring(startLoc + text1.length)\n      } else {\n        // Imperfect match. Run a diff to get a framework of equivalent indices.\n        let diffs = diff(text1, text2, {checkLines: false})\n        if (text1.length > MAX_BITS && levenshtein(diffs) / text1.length > deleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false\n        } else {\n          diffs = cleanupSemanticLossless(diffs)\n          let index1 = 0\n          let index2 = 0\n          for (let y = 0; y < parsed[x].diffs.length; y++) {\n            const mod = parsed[x].diffs[y]\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = xIndex(diffs, index1)\n            }\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text =\n                text.substring(0, startLoc + index2) + mod[1] + text.substring(startLoc + index2)\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text =\n                text.substring(0, startLoc + index2) +\n                text.substring(startLoc + xIndex(diffs, index1 + mod[1].length))\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length)\n  return [text, results]\n}\n","import {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT} from '../diff/diff.js'\nimport type {Patch} from './createPatchObject.js'\n\n/**\n * Create a textual representation of a patch list.\n *\n * @param patches - Patches to stringify\n * @returns Text representation of patches\n * @public\n */\nexport function stringify(patches: Patch[]): string {\n  return patches.map(stringifyPatch).join('')\n}\n\n/**\n * Create a textual representation of a patch.\n *\n * @param patch - Patch to stringify\n * @returns Text representation of patch\n * @public\n */\nexport function stringifyPatch(patch: Patch): string {\n  const {utf8Length1, utf8Length2, utf8Start1, utf8Start2, diffs} = patch\n\n  let coords1: string\n  if (utf8Length1 === 0) {\n    coords1 = `${utf8Start1},0`\n  } else if (utf8Length1 === 1) {\n    coords1 = `${utf8Start1 + 1}`\n  } else {\n    coords1 = `${utf8Start1 + 1},${utf8Length1}`\n  }\n\n  let coords2: string\n  if (utf8Length2 === 0) {\n    coords2 = `${utf8Start2},0`\n  } else if (utf8Length2 === 1) {\n    coords2 = `${utf8Start2 + 1}`\n  } else {\n    coords2 = `${utf8Start2 + 1},${utf8Length2}`\n  }\n\n  const text = [`@@ -${coords1} +${coords2} @@\\n`]\n  let op\n\n  // Escape the body of the patch with %xx notation.\n  for (let x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+'\n        break\n      case DIFF_DELETE:\n        op = '-'\n        break\n      case DIFF_EQUAL:\n        op = ' '\n        break\n      default:\n        throw new Error('Unknown patch operation.')\n    }\n    text[x + 1] = `${op + encodeURI(diffs[x][1])}\\n`\n  }\n\n  return text.join('').replace(/%20/g, ' ')\n}\n","import {DIFF_DELETE, DIFF_EQUAL, DIFF_INSERT} from '../diff/diff.js'\nimport {countUtf8Bytes} from '../utils/utf8Indices.js'\nimport {createPatchObject, type Patch} from './createPatchObject.js'\n\nconst patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/\n\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n *\n * @param textline - Text representation of patches.\n * @returns Array of Patch objects.\n * @public\n */\nexport function parse(textline: string): Patch[] {\n  if (!textline) {\n    return []\n  }\n\n  const patches: Patch[] = []\n  const lines = textline.split('\\n')\n\n  let textPointer = 0\n  while (textPointer < lines.length) {\n    const m = lines[textPointer].match(patchHeader)\n    if (!m) {\n      throw new Error(`Invalid patch string: ${lines[textPointer]}`)\n    }\n\n    const patch = createPatchObject(toInt(m[1]), toInt(m[3]))\n    patches.push(patch)\n    if (m[2] === '') {\n      patch.start1--\n      patch.utf8Start1--\n      patch.length1 = 1\n      patch.utf8Length1 = 1\n    } else if (m[2] === '0') {\n      patch.length1 = 0\n      patch.utf8Length1 = 0\n    } else {\n      patch.start1--\n      patch.utf8Start1--\n      // The patch itself will contain the UTF-8 length\n      patch.utf8Length1 = toInt(m[2])\n      // We start with UCS-2 length set to the same, but we adjust for it later\n      patch.length1 = patch.utf8Length1\n    }\n\n    if (m[4] === '') {\n      patch.start2--\n      patch.utf8Start2--\n      patch.length2 = 1\n      patch.utf8Length2 = 1\n    } else if (m[4] === '0') {\n      patch.length2 = 0\n      patch.utf8Length2 = 0\n    } else {\n      patch.start2--\n      patch.utf8Start2--\n      // The patch itself will contain the UTF-8 length\n      patch.utf8Length2 = toInt(m[4])\n      // We start with UCS-2 length set to the same, but we adjust for it later\n      patch.length2 = patch.utf8Length2\n    }\n    textPointer++\n\n    while (textPointer < lines.length) {\n      const currentLine = lines[textPointer]\n      const sign = currentLine.charAt(0)\n\n      if (sign === '@') {\n        // Start of next patch\n        break\n      }\n\n      if (sign === '') {\n        // Blank line? Ignore.\n        textPointer++\n        continue\n      }\n\n      let line: string\n      try {\n        line = decodeURI(currentLine.slice(1))\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error(`Illegal escape in parse: ${currentLine}`)\n      }\n\n      // The number of bytes in a line does not equate to the number of \"characters\"\n      // returned by `string.length` - we have to subtract the diff here in order to\n      // make slicing/calculations work correctly\n      const utf8Diff = countUtf8Bytes(line) - line.length\n      if (sign === '-') {\n        // Deletion.\n        patch.diffs.push([DIFF_DELETE, line])\n        patch.length1 -= utf8Diff\n      } else if (sign === '+') {\n        // Insertion.\n        patch.diffs.push([DIFF_INSERT, line])\n        patch.length2 -= utf8Diff\n      } else if (sign === ' ') {\n        // Minor equality.\n        patch.diffs.push([DIFF_EQUAL, line])\n        patch.length1 -= utf8Diff\n        patch.length2 -= utf8Diff\n      } else {\n        // WTF?\n        throw new Error(`Invalid patch mode \"${sign}\" in: ${line}`)\n      }\n      textPointer++\n    }\n  }\n  return patches\n}\n\nfunction toInt(num: string): number {\n  return parseInt(num, 10)\n}\n"],"names":["isHighSurrogate","char","charCode","charCodeAt","isLowSurrogate","cloneDiff","diff","type","patch","getCommonOverlap","textA","textB","text1","text2","text1Length","length","text2Length","substring","textLength","Math","min","best","found","pattern","indexOf","getCommonPrefix","pointerMin","pointerMax","pointerMid","pointerStart","floor","getCommonSuffix","pointerEnd","cleanupSemantic","rawDiffs","diffs","map","hasChanges","equalities","equalitiesLength","lastEquality","pointer","lengthInsertions1","lengthDeletions1","lengthInsertions2","lengthDeletions2","DIFF_EQUAL","DIFF_INSERT","max","splice","DIFF_DELETE","cleanupMerge","cleanupSemanticLossless","deletion","insertion","overlapLength1","overlapLength2","nonAlphaNumericRegex","whitespaceRegex","linebreakRegex","blanklineEndRegex","blanklineStartRegex","diffCleanupSemanticScore","one","two","char1","charAt","char2","nonAlphaNumeric1","match","nonAlphaNumeric2","whitespace1","whitespace2","lineBreak1","lineBreak2","blankLine1","blankLine2","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","push","countDelete","countInsert","textDelete","textInsert","commonlength","Error","pop","trueCount","_len","arguments","args","Array","_key","reduce","n","bool","cleanupEfficiency","editCost","undefined","preIns","preDel","postIns","postDel","bisect","deadline","maxD","ceil","vOffset","vLength","v1","v2","x","delta","front","k1start","k1end","k2start","k2end","d","Date","now","k1","k1Offset","x1","y1","k2Offset","x2","bisectSplit","k2","y2","y","text1a","text2a","text1b","text2b","doDiff","checkLines","diffsb","concat","findHalfMatch","timeout","longText","shortText","halfMatch1","halfMatchI","halfMatch2","halfMatch","text1A","text1B","text2A","text2B","midCommon","i","seed","slice","j","bestCommon","bestLongTextA","bestLongTextB","bestShortTextA","bestShortTextB","prefixLength","suffixLength","charsToLines","lineArray","chars","text","join","linesToChars","lineHash","diffLinesToMunge","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","String","fromCharCode","maxLines","chars1","chars2","doLineModeDiff","opts","a","linearray","aa","computeDiff","longtext","shorttext","diffsA","diffsB","createInternalOpts","adjustDiffForSurrogatePairs","options","commonprefix","commonsuffix","unshift","createDeadLine","t","Number","MAX_VALUE","combineChar","data","dir","splitChar","hasSharedChar","deisolateChar","inv","insertIdx","deleteIdx","op","rest","insertText","insertChar","deleteText","diffType","diffText","firstChar","lastChar","DEFAULT_OPTIONS","threshold","distance","applyDefaults","MAX_BITS","bitap","loc","s","getAlphabetFromPattern","getBitapScore","e","accuracy","proximity","abs","scoreThreshold","bestLoc","lastIndexOf","matchmask","binMin","binMid","binMax","lastRd","start","finish","rd","charMatch","searchLocation","createPatchObject","start1","start2","utf8Start1","utf8Start2","length1","length2","utf8Length1","utf8Length2","diffText1","diffText2","countUtf8Bytes","str","bytes","codePoint","codePointAt","utf8len","adjustIndiciesToUcs2","patches","base","byteOffset","idx","advanceTo","target","allowExceedingIndices","adjusted","DEFAULT_MARGIN","DEFAULT_OPTS","margin","getDefaultOpts","make","b","_make","isArray","patchDiffLength","charCount1","charCount2","utf8Count1","utf8Count2","prepatchText","postpatchText","currentDiff","diffTextLength","diffByteLength","addContext","padding","prefixStart","prefix","prefixUtf8Length","suffixEnd","suffix","suffixUtf8Length","levenshtein","leven","insertions","deletions","xIndex","lastChars1","lastChars2","addPadding","paddingLength","nullPadding","p","firstDiffLength","extraLength","splitMax","patchSize","bigpatch","preContext","empty","precontextByteCount","diffTextByteCount","shift","postContext","postContextByteCount","apply","originalText","parsed","deleteThreshold","results","expectedLoc","startLoc","endLoc","index1","index2","mod","stringify","stringifyPatch","coords1","coords2","encodeURI","replace","patchHeader","parse","textline","lines","split","textPointer","m","toInt","currentLine","sign","decodeURI","ex","utf8Diff","num","parseInt"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]}},
    {"offset": {"line": 7290, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7296, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/mendoza/src/internal-patcher.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/mendoza/src/utf8.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/mendoza/src/incremental-patcher.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/mendoza/src/simple-patcher.ts"],"sourcesContent":["import {ObjectModel} from './object-model'\nimport {RawPatch} from './patch'\n\nconst OPS = [\n  'Value',\n  'Copy',\n  'Blank',\n  'ReturnIntoArray',\n  'ReturnIntoObject',\n  'ReturnIntoObjectSameKey',\n  'PushField',\n  'PushElement',\n  'PushParent',\n  'Pop',\n  'PushFieldCopy',\n  'PushFieldBlank',\n  'PushElementCopy',\n  'PushElementBlank',\n  'ReturnIntoObjectPop',\n  'ReturnIntoObjectSameKeyPop',\n  'ReturnIntoArrayPop',\n  'ObjectSetFieldValue',\n  'ObjectCopyField',\n  'ObjectDeleteField',\n  'ArrayAppendValue',\n  'ArrayAppendSlice',\n  'StringAppendString',\n  'StringAppendSlice',\n]\n\ntype InputEntry<V> = {\n  value: V\n  key?: string\n  keys?: string[]\n}\n\ntype OutputEntry<V, S, O, A> = {\n  value: V | null\n  writeValue?: S | O | A\n}\n\nexport class Patcher<V, S, O, A> {\n  model: ObjectModel<V, S, O, A>\n  root: V\n  patch: RawPatch\n  i: number\n  inputStack: InputEntry<V>[]\n  outputStack: OutputEntry<V, S, O, A>[]\n\n  constructor(model: ObjectModel<V, S, O, A>, root: V, patch: RawPatch) {\n    this.model = model\n    this.root = root\n    this.patch = patch\n    this.i = 0\n    this.inputStack = []\n    this.outputStack = []\n  }\n\n  read(): unknown {\n    return this.patch[this.i++]\n  }\n\n  process() {\n    this.inputStack.push({value: this.root})\n    this.outputStack.push({value: this.root})\n\n    for (; this.i < this.patch.length; ) {\n      let opcode = this.read() as number\n      let op = OPS[opcode]\n      if (!op) throw new Error(`Unknown opcode: ${opcode}`)\n      let processor = `process${op}`\n      ;(this as any)[processor].apply(this)\n    }\n\n    let entry = this.outputStack.pop()!\n    return this.finalizeOutput(entry)\n  }\n\n  inputEntry(): InputEntry<V> {\n    return this.inputStack[this.inputStack.length - 1]\n  }\n\n  inputKey(entry: InputEntry<V>, idx: number): string {\n    if (!entry.keys) {\n      entry.keys = this.model.objectGetKeys(entry.value).sort()\n    }\n\n    return entry.keys[idx]\n  }\n\n  outputEntry(): OutputEntry<V, S, O, A> {\n    return this.outputStack[this.outputStack.length - 1]\n  }\n\n  outputArray(): A {\n    let entry = this.outputEntry()\n\n    if (!entry.writeValue) {\n      entry.writeValue = this.model.copyArray(entry.value)\n    }\n\n    return entry.writeValue as A\n  }\n\n  outputObject(): O {\n    let entry = this.outputEntry()\n\n    if (!entry.writeValue) {\n      entry.writeValue = this.model.copyObject(entry.value)\n    }\n\n    return entry.writeValue as O\n  }\n\n  outputString(): S {\n    let entry = this.outputEntry()\n\n    if (!entry.writeValue) {\n      entry.writeValue = this.model.copyString(entry.value)\n    }\n\n    return entry.writeValue as S\n  }\n\n  finalizeOutput(entry: OutputEntry<V, S, O, A>): V {\n    if (entry.writeValue) {\n      return this.model.finalize(entry.writeValue)\n    } else {\n      return entry.value!\n    }\n  }\n\n  // Processors:\n\n  processValue() {\n    let value = this.model.wrap(this.read())\n    this.outputStack.push({value})\n  }\n\n  processCopy() {\n    let input = this.inputEntry()\n    this.outputStack.push({value: input.value})\n  }\n\n  processBlank() {\n    this.outputStack.push({value: null})\n  }\n\n  processReturnIntoArray() {\n    let entry = this.outputStack.pop()!\n    let result = this.finalizeOutput(entry)\n    let arr = this.outputArray()\n    this.model.arrayAppendValue(arr, result)\n  }\n\n  processReturnIntoObject() {\n    let key = this.read() as string\n    let entry = this.outputStack.pop()!\n    let result = this.finalizeOutput(entry)\n    result = this.model.markChanged(result)\n    let obj = this.outputObject()\n    this.model.objectSetField(obj, key, result)\n  }\n\n  processReturnIntoObjectSameKey() {\n    let input = this.inputEntry()\n    let entry = this.outputStack.pop()!\n    let result = this.finalizeOutput(entry)\n    let obj = this.outputObject()\n    this.model.objectSetField(obj, input.key!, result)\n  }\n\n  processPushField() {\n    let idx = this.read() as number\n    let entry = this.inputEntry()\n    let key = this.inputKey(entry, idx)\n    let value = this.model.objectGetField(entry.value, key)\n    this.inputStack.push({value, key})\n  }\n\n  processPushElement() {\n    let idx = this.read() as number\n    let entry = this.inputEntry()\n    let value = this.model.arrayGetElement(entry.value, idx)\n    this.inputStack.push({value})\n  }\n\n  processPop() {\n    this.inputStack.pop()\n  }\n\n  processPushFieldCopy() {\n    this.processPushField()\n    this.processCopy()\n  }\n\n  processPushFieldBlank() {\n    this.processPushField()\n    this.processBlank()\n  }\n\n  processPushElementCopy() {\n    this.processPushElement()\n    this.processCopy()\n  }\n\n  processPushElementBlank() {\n    this.processPushElement()\n    this.processBlank()\n  }\n\n  processReturnIntoObjectPop() {\n    this.processReturnIntoObject()\n    this.processPop()\n  }\n\n  processReturnIntoObjectSameKeyPop() {\n    this.processReturnIntoObjectSameKey()\n    this.processPop()\n  }\n\n  processReturnIntoArrayPop() {\n    this.processReturnIntoArray()\n    this.processPop()\n  }\n\n  processObjectSetFieldValue() {\n    this.processValue()\n    this.processReturnIntoObject()\n  }\n\n  processObjectCopyField() {\n    this.processPushField()\n    this.processCopy()\n    this.processReturnIntoObjectSameKey()\n    this.processPop()\n  }\n\n  processObjectDeleteField() {\n    let idx = this.read() as number\n    let entry = this.inputEntry()\n    let key = this.inputKey(entry, idx)\n    let obj = this.outputObject()\n    this.model.objectDeleteField(obj, key)\n  }\n\n  processArrayAppendValue() {\n    let value = this.model.wrap(this.read())\n    let arr = this.outputArray()\n    this.model.arrayAppendValue(arr, value)\n  }\n\n  processArrayAppendSlice() {\n    let left = this.read() as number\n    let right = this.read() as number\n    let str = this.outputArray()\n    let val = this.inputEntry().value\n    this.model.arrayAppendSlice(str, val, left, right)\n  }\n\n  processStringAppendString() {\n    let value = this.model.wrap(this.read())\n    let str = this.outputString()\n    this.model.stringAppendValue(str, value)\n  }\n\n  processStringAppendSlice() {\n    let left = this.read() as number\n    let right = this.read() as number\n    let str = this.outputString()\n    let val = this.inputEntry().value\n    this.model.stringAppendSlice(str, val, left, right)\n  }\n}\n","export function utf8charSize(code: number): 1 | 2 | 3 | 4 {\n  if (code >> 16) {\n    return 4\n  } else if (code >> 11) {\n    return 3\n  } else if (code >> 7) {\n    return 2\n  } else {\n    return 1\n  }\n}\n\nexport function utf8stringSize(str: string): number {\n  let b = 0\n  for (let i = 0; i < str.length; i++) {\n    let code = str.codePointAt(i)!\n    let size = utf8charSize(code)\n    if (size == 4) i++\n    b += size\n  }\n  return b\n}\n\n/** Converts an UTF-8 byte index into a UCS-2 index. */\nexport function utf8resolveIndex(str: string, idx: number, start = 0) {\n  let byteCount = start\n  let ucsIdx = 0\n\n  for (ucsIdx = start; byteCount < idx; ucsIdx++) {\n    let code = str.codePointAt(ucsIdx)!\n    let size = utf8charSize(code)\n    if (size === 4) ucsIdx++ // Surrogate pair.\n    byteCount += size\n  }\n\n  return ucsIdx\n}\n\nexport function commonPrefix(str: string, str2: string) {\n  let len = Math.min(str.length, str2.length)\n  let b = 0\n  for (let i = 0; i < len; ) {\n    let aPoint = str.codePointAt(i)!\n    let bPoint = str2.codePointAt(i)!\n    if (aPoint !== bPoint) return b\n    let size = utf8charSize(aPoint)\n    b += size\n    i += size === 4 ? 2 : 1\n  }\n  return b\n}\n\nexport function commonSuffix(str: string, str2: string, prefix: number = 0) {\n  let len = Math.min(str.length, str2.length) - prefix\n  let b = 0\n  for (let i = 0; i < len; ) {\n    let aPoint = str.codePointAt(str.length - 1 - i)!\n    let bPoint = str2.codePointAt(str2.length - 1 - i)!\n    if (aPoint !== bPoint) return b\n    let size = utf8charSize(aPoint)\n    b += size\n    i += size === 4 ? 2 : 1\n  }\n  return b\n}\n","import {Patcher} from './internal-patcher'\nimport type {ObjectModel} from './object-model'\nimport type {RawPatch} from './patch'\nimport {commonPrefix, commonSuffix, utf8charSize, utf8stringSize} from './utf8'\n\n// The incremental patcher allows you to apply multiple patches and tracks the history of every element.\n// It also allows you to extract a simple diff between the documents.\n\nexport type Value<T> = {\n  data?: unknown\n  content?: Content<T>\n  startMeta: T\n  endMeta: T\n}\n\nexport type Type = 'array' | 'string' | 'object' | 'number' | 'boolean' | 'null'\n\nexport type Content<T> = ObjectContent<T> | ArrayContent<T> | StringContent<T>\n\nexport type ObjectContent<T> = {\n  type: 'object'\n  fields: {[key: string]: Value<T>}\n}\n\nexport type ArrayContent<T> = {\n  type: 'array'\n  elements: Value<T>[]\n  metas: T[]\n}\n\nexport type StringContent<T> = {\n  type: 'string'\n  parts: StringPart<T>[]\n}\n\nexport type StringPart<T> = {\n  value: string\n  utf8size: number\n  uses: StringContent<T>[]\n  startMeta: T\n  endMeta: T\n}\n\nclass IncrementalModel<T>\n  implements ObjectModel<Value<T>, StringContent<T>, ObjectContent<T>, ArrayContent<T>>\n{\n  meta: T\n\n  constructor(meta: T) {\n    this.meta = meta\n  }\n\n  wrap(data: unknown): Value<T> {\n    return this.wrapWithMeta(data, this.meta, this.meta)\n  }\n\n  wrapWithMeta(data: unknown, startMeta: T, endMeta: T = this.meta): Value<T> {\n    return {data, startMeta, endMeta}\n  }\n\n  asObject(value: Value<T>): ObjectContent<T> {\n    if (!value.content) {\n      let fields: ObjectContent<T>['fields'] = {}\n      for (let [key, val] of Object.entries(value.data as any)) {\n        fields[key] = this.wrapWithMeta(val, value.startMeta)\n      }\n      value.content = {type: 'object', fields}\n    }\n\n    return value.content as ObjectContent<T>\n  }\n\n  asArray(value: Value<T>): ArrayContent<T> {\n    if (!value.content) {\n      let elements = (value.data as unknown[]).map((item) =>\n        this.wrapWithMeta(item, value.startMeta),\n      )\n      let metas = elements.map(() => this.meta)\n      value.content = {type: 'array', elements, metas}\n    }\n\n    return value.content as ArrayContent<T>\n  }\n\n  asString(value: Value<T>): StringContent<T> {\n    if (!value.content) {\n      let str = value.data as string\n\n      let part: StringPart<T> = {\n        value: str,\n        utf8size: utf8stringSize(str),\n        uses: [],\n        startMeta: value.startMeta,\n        endMeta: value.endMeta,\n      }\n      value.content = this.stringFromParts([part])\n    }\n\n    return value.content as StringContent<T>\n  }\n\n  stringFromParts(parts: StringPart<T>[]): StringContent<T> {\n    let str: StringContent<T> = {\n      type: 'string',\n      parts,\n    }\n\n    for (let part of parts) {\n      part.uses.push(str)\n    }\n\n    return str\n  }\n\n  objectGetKeys(value: Value<T>): string[] {\n    if (value.content) {\n      return Object.keys((value.content as ObjectContent<T>).fields)\n    } else {\n      return Object.keys(value.data as any)\n    }\n  }\n\n  objectGetField(value: Value<T>, key: string): Value<T> {\n    let obj = this.asObject(value)\n    return obj.fields[key]\n  }\n\n  arrayGetElement(value: Value<T>, idx: number): Value<T> {\n    let arr = this.asArray(value)\n    return arr.elements[idx]\n  }\n\n  finalize(content: Content<T>): Value<T> {\n    this.updateEndMeta(content)\n    return {content, startMeta: this.meta, endMeta: this.meta}\n  }\n\n  markChanged(value: Value<T>): Value<T> {\n    return this.wrap(unwrap(value))\n  }\n\n  updateEndMeta(content: Content<T>) {\n    if (content.type == 'string') {\n      for (let part of content.parts) {\n        part.endMeta = this.meta\n      }\n    } else {\n      if (content.type === 'array') {\n        for (let val of content.elements) {\n          if (val.content && val.endMeta !== this.meta) {\n            this.updateEndMeta(val.content)\n          }\n          val.endMeta = this.meta\n        }\n      } else {\n        for (let val of Object.values(content.fields)) {\n          if (val.content && val.endMeta !== this.meta) {\n            this.updateEndMeta(val.content)\n          }\n          val.endMeta = this.meta\n        }\n      }\n    }\n  }\n\n  copyString(value: Value<T> | null): StringContent<T> {\n    if (value) {\n      let other = this.asString(value)\n      return this.stringFromParts(other.parts.slice())\n    } else {\n      return {\n        type: 'string',\n        parts: [],\n      }\n    }\n  }\n\n  copyObject(value: Value<T> | null): ObjectContent<T> {\n    let obj: ObjectContent<T> = {\n      type: 'object',\n      fields: {},\n    }\n\n    if (value) {\n      let other = this.asObject(value)\n      Object.assign(obj.fields, other.fields)\n    }\n\n    return obj\n  }\n\n  copyArray(value: Value<T> | null): ArrayContent<T> {\n    let arr = value ? this.asArray(value) : null\n    let elements = arr ? arr.elements : []\n    let metas = arr ? arr.metas : []\n\n    return {\n      type: 'array',\n      elements,\n      metas,\n    }\n  }\n\n  objectSetField(target: ObjectContent<T>, key: string, value: Value<T>): void {\n    target.fields[key] = value\n  }\n\n  objectDeleteField(target: ObjectContent<T>, key: string): void {\n    delete target.fields[key]\n  }\n\n  arrayAppendValue(target: ArrayContent<T>, value: Value<T>): void {\n    target.elements.push(value)\n    target.metas.push(this.meta)\n  }\n\n  arrayAppendSlice(target: ArrayContent<T>, source: Value<T>, left: number, right: number): void {\n    let arr = this.asArray(source)\n    let samePosition = arr.elements.length === left\n\n    target.elements.push(...arr.elements.slice(left, right))\n\n    if (samePosition) {\n      target.metas.push(...arr.metas.slice(left, right))\n    } else {\n      for (let i = left; i < right; i++) {\n        target.metas.push(this.meta)\n      }\n    }\n  }\n\n  stringAppendValue(target: StringContent<T>, value: Value<T>): void {\n    let str = this.asString(value)\n    for (let part of str.parts) {\n      this.stringAppendPart(target, part)\n    }\n  }\n\n  stringAppendPart(target: StringContent<T>, part: StringPart<T>): void {\n    target.parts.push(part)\n    part.uses.push(target)\n  }\n\n  resolveStringPart(str: StringContent<T>, from: number, len: number): number {\n    if (len === 0) return from\n\n    for (let i = from; i < str.parts.length; i++) {\n      let part = str.parts[i]\n\n      if (len === part.utf8size) {\n        // Matches perfect!\n        return i + 1\n      }\n\n      if (len < part.utf8size) {\n        // It's a part of this chunk. We now need to split it up.\n        this.splitString(part, len)\n        return i + 1\n      }\n\n      len -= part.utf8size\n    }\n\n    throw new Error('splitting string out of bounds')\n  }\n\n  splitString(part: StringPart<T>, idx: number) {\n    let leftValue\n    let rightValue\n    let leftSize = idx\n    let rightSize = part.utf8size - leftSize\n\n    // idx is here in UTF-8 index, not codepoint index.\n    // This means we might to adjust for multi-byte characters.\n    if (part.utf8size !== part.value.length) {\n      let byteCount = 0\n\n      for (idx = 0; byteCount < leftSize; idx++) {\n        let code = part.value.codePointAt(idx)!\n        let size = utf8charSize(code)\n        if (size === 4) idx++ // Surrogate pair.\n        byteCount += size\n      }\n    }\n\n    leftValue = part.value.slice(0, idx)\n    rightValue = part.value.slice(idx)\n\n    let newPart: StringPart<T> = {\n      value: rightValue,\n      utf8size: rightSize,\n      uses: part.uses.slice(),\n      startMeta: part.startMeta,\n      endMeta: part.endMeta,\n    }\n\n    part.value = leftValue\n    part.utf8size = leftSize\n\n    for (let use of part.uses) {\n      // Insert the new part.\n      let ndx = use.parts.indexOf(part)\n      if (ndx === -1) throw new Error('bug: mismatch between string parts and use.')\n      use.parts.splice(ndx + 1, 0, newPart)\n    }\n  }\n\n  stringAppendSlice(target: StringContent<T>, source: Value<T>, left: number, right: number): void {\n    let str = this.asString(source)\n    let firstPart = this.resolveStringPart(str, 0, left)\n    let lastPart = this.resolveStringPart(str, firstPart, right - left)\n\n    for (let i = firstPart; i < lastPart; i++) {\n      let part = str.parts[i]\n      this.stringAppendPart(target, part)\n    }\n  }\n}\n\n// Turns a native JavaScript object into a Value with a given origin.\nexport function wrap<T>(data: unknown, meta: T): Value<T> {\n  return {data, startMeta: meta, endMeta: meta}\n}\n\n// Converts a Value into a native JavaScript type.\nexport function unwrap<T>(value: Value<T>): unknown {\n  if (typeof value.data !== 'undefined') return value.data\n\n  let result: any\n  let content = value.content!\n  switch (content.type) {\n    case 'string':\n      result = content.parts.map((part) => part.value).join('')\n      break\n    case 'array':\n      result = content.elements.map((val) => unwrap(val))\n      break\n    case 'object': {\n      result = {}\n      for (let [key, val] of Object.entries(content.fields)) {\n        result[key] = unwrap(val)\n      }\n    }\n  }\n\n  value.data = result\n  return result\n}\n\n// Returns the type of a Value.\nexport function getType<T>(value: Value<T>): Type {\n  if (value.content) return value.content.type\n  if (Array.isArray(value.data!)) return 'array'\n  if (value.data === null) return 'null'\n\n  return typeof value.data as Type\n}\n\n// Updates the `right` value such that it reuses as much as possible from the `left` value.\nexport function rebaseValue<T>(left: Value<T>, right: Value<T>): Value<T> {\n  let leftType = getType(left)\n  let rightType = getType(right)\n  if (leftType !== rightType) return right\n\n  let leftModel = new IncrementalModel(left.endMeta)\n  let rightModel = new IncrementalModel(right.endMeta)\n\n  switch (leftType) {\n    case 'object': {\n      let leftObj = leftModel.asObject(left)\n      let rightObj = rightModel.asObject(right)\n\n      // Number of fields which are identical in left and right.\n      let identicalFieldCount = 0\n      let leftFieldCount = Object.keys(leftObj.fields).length\n      let rightFieldCount = Object.keys(rightObj.fields).length\n\n      for (let [key, rightVal] of Object.entries(rightObj.fields)) {\n        let leftVal = leftObj.fields[key]\n        if (leftVal) {\n          rightObj.fields[key] = rebaseValue(leftVal, rightVal)\n          if (rightObj.fields[key] === leftVal) {\n            identicalFieldCount++\n          }\n        }\n      }\n\n      let isIdentical = leftFieldCount === rightFieldCount && leftFieldCount === identicalFieldCount\n      return isIdentical ? left : right\n    }\n    case 'array': {\n      let leftArr = leftModel.asArray(left)\n      let rightArr = rightModel.asArray(right)\n\n      if (leftArr.elements.length !== rightArr.elements.length) {\n        break\n      }\n\n      let numRebased = 0\n      for (let i = 0; i < rightArr.elements.length; i++) {\n        rightArr.elements[i] = rebaseValue(leftArr.elements[i], rightArr.elements[i])\n        if (rightArr.elements[i] !== leftArr.elements[i]) {\n          numRebased++\n        }\n      }\n\n      return numRebased === 0 ? left : right\n    }\n    case 'null':\n    case 'boolean':\n    case 'number': {\n      if (unwrap(left) === unwrap(right)) return left\n      break\n    }\n    case 'string': {\n      let leftRaw = unwrap(left) as string\n      let rightRaw = unwrap(right) as string\n      if (leftRaw === rightRaw) return left\n\n      let result = rightModel.copyString(null)\n      let prefix = commonPrefix(leftRaw, rightRaw)\n      let suffix = commonSuffix(leftRaw, rightRaw, prefix)\n\n      let rightLen = utf8stringSize(rightRaw)\n      let leftLen = utf8stringSize(leftRaw)\n\n      if (0 < prefix) {\n        rightModel.stringAppendSlice(result, left, 0, prefix)\n      }\n      if (prefix < rightLen - suffix) {\n        rightModel.stringAppendSlice(result, right, prefix, rightLen - suffix)\n      }\n      if (leftLen - suffix < leftLen) {\n        rightModel.stringAppendSlice(result, left, leftLen - suffix, leftLen)\n      }\n      let value = rightModel.finalize(result)\n      if (unwrap(value) !== rightRaw) throw new Error('incorrect string rebase')\n      return value\n    }\n  }\n\n  return right\n}\n\nexport function applyPatch<T>(left: Value<T>, patch: RawPatch, startMeta: T) {\n  let model = new IncrementalModel(startMeta)\n  let patcher = new Patcher(model, left, patch)\n  return patcher.process()\n}\n","import {Patcher} from './internal-patcher'\nimport {ObjectModel} from './object-model'\nimport {RawPatch} from './patch'\nimport {utf8resolveIndex} from './utf8'\n\ntype StringBuilder = {type: 'string'; data: string}\ntype ObjectBuilder = {type: 'object'; data: {[key: string]: unknown}}\ntype ArrayBuilder = unknown[]\n\nclass SimpleModel implements ObjectModel<unknown, StringBuilder, ObjectBuilder, ArrayBuilder> {\n  wrap(data: any): unknown {\n    return data\n  }\n\n  finalize(b: StringBuilder | ObjectBuilder | ArrayBuilder): unknown {\n    if (Array.isArray(b)) {\n      return b\n    } else {\n      return b.data\n    }\n  }\n\n  markChanged(value: unknown) {\n    return value\n  }\n\n  objectGetKeys(value: unknown): string[] {\n    return Object.keys(value as any)\n  }\n\n  objectGetField(value: unknown, key: string): unknown {\n    return (value as any)[key]\n  }\n\n  arrayGetElement(value: unknown, idx: number): unknown {\n    return (value as any[])[idx]\n  }\n\n  copyObject(value: unknown | null): ObjectBuilder {\n    let res: ObjectBuilder = {\n      type: 'object',\n      data: {},\n    }\n    if (value !== null) {\n      for (let [key, val] of Object.entries(value as ObjectBuilder)) {\n        res.data[key] = val\n      }\n    }\n    return res\n  }\n\n  copyArray(value: unknown | null): ArrayBuilder {\n    if (value === null) return []\n    return (value as ArrayBuilder).slice()\n  }\n\n  copyString(value: unknown | null): StringBuilder {\n    return {\n      type: 'string',\n      data: value === null ? '' : (value as string),\n    }\n  }\n\n  objectSetField(target: ObjectBuilder, key: string, value: unknown): void {\n    target.data[key] = value\n  }\n\n  objectDeleteField(target: ObjectBuilder, key: string): void {\n    delete target.data[key]\n  }\n\n  arrayAppendValue(target: ArrayBuilder, value: unknown): void {\n    target.push(value)\n  }\n\n  arrayAppendSlice(target: ArrayBuilder, source: unknown, left: number, right: number): void {\n    target.push(...(source as ArrayBuilder).slice(left, right))\n  }\n\n  stringAppendSlice(target: StringBuilder, source: unknown, left: number, right: number): void {\n    const sourceString = source as string\n\n    const leftPos = utf8resolveIndex(sourceString, left)\n    const rightPos = utf8resolveIndex(sourceString, right, leftPos)\n\n    target.data += sourceString.slice(leftPos, rightPos)\n  }\n\n  stringAppendValue(target: StringBuilder, value: unknown): void {\n    target.data += value as string\n  }\n}\n\n// Applies a patch on a JavaScript object.\nexport function applyPatch(left: any, patch: RawPatch): any {\n  let root = left // No need to wrap because the representation is the same.\n  let patcher = new Patcher(new SimpleModel(), root, patch)\n  return patcher.process()\n}\n"],"names":["applyPatch"],"mappings":"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","ignoreList":[0,1,2,3]}},
    {"offset": {"line": 7824, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7830, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/get-random-values-esm/index.mjs"],"sourcesContent":["// Strict ESM env, designed to run outside Node.js in envs that provide WebCrypto (deno, browsers, etc)\n\nexport default function getRandomValues(typedArray) {\n  const crypto =\n    typeof window !== 'undefined' && 'crypto' in window\n      ? window.crypto\n      : globalThis.crypto\n\n  if (!crypto || !crypto.getRandomValues) {\n    throw new Error('WebCrypto not available in this environment')\n  }\n\n  return crypto.getRandomValues(typedArray)\n}\n"],"names":[],"mappings":"AAAA,uGAAuG;;;;AAExF,SAAS,gBAAgB,UAAU;IAChD,MAAM,SACJ,OAAO,WAAW,eAAe,YAAY,SACzC,OAAO,MAAM,GACb,WAAW,MAAM;IAEvB,IAAI,CAAC,UAAU,CAAC,OAAO,eAAe,EAAE;QACtC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,OAAO,eAAe,CAAC;AAChC","ignoreList":[0]}},
    {"offset": {"line": 7841, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7847, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40vercel/stega/dist/index.mjs"],"sourcesContent":["var s={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},c={0:8203,1:8204,2:8205,3:65279},u=new Array(4).fill(String.fromCodePoint(c[0])).join(\"\"),m=String.fromCharCode(0);function E(t){let e=JSON.stringify(t);return`${u}${Array.from(e).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${r} (${n})`);return Array.from(n.toString(4).padStart(4,\"0\")).map(o=>String.fromCodePoint(c[o])).join(\"\")}).join(\"\")}`}function y(t){let e=JSON.stringify(t);return Array.from(e).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${r} (${n})`);return Array.from(n.toString(16).padStart(2,\"0\")).map(o=>String.fromCodePoint(s[o])).join(\"\")}).join(\"\")}function I(t){return!Number.isNaN(Number(t))||/[a-z]/i.test(t)&&!/\\d+(?:[-:\\/]\\d+){2}(?:T\\d+(?:[-:\\/]\\d+){1,2}(\\.\\d+)?Z?)?/.test(t)?!1:Boolean(Date.parse(t))}function T(t){try{new URL(t,t.startsWith(\"/\")?\"https://acme.com\":void 0)}catch{return!1}return!0}function C(t,e,r=\"auto\"){return r===!0||r===\"auto\"&&(I(t)||T(t))?t:`${t}${E(e)}`}var x=Object.fromEntries(Object.entries(c).map(t=>t.reverse())),g=Object.fromEntries(Object.entries(s).map(t=>t.reverse())),S=`${Object.values(s).map(t=>`\\\\u{${t.toString(16)}}`).join(\"\")}`,f=new RegExp(`[${S}]{4,}`,\"gu\");function G(t){let e=t.match(f);if(!!e)return h(e[0],!0)[0]}function $(t){let e=t.match(f);if(!!e)return e.map(r=>h(r)).flat()}function h(t,e=!1){let r=Array.from(t);if(r.length%2===0){if(r.length%4||!t.startsWith(u))return A(r,e)}else throw new Error(\"Encoded data has invalid length\");let n=[];for(let o=r.length*.25;o--;){let p=r.slice(o*4,o*4+4).map(d=>x[d.codePointAt(0)]).join(\"\");n.unshift(String.fromCharCode(parseInt(p,4)))}if(e){n.shift();let o=n.indexOf(m);return o===-1&&(o=n.length),[JSON.parse(n.slice(0,o).join(\"\"))]}return n.join(\"\").split(m).filter(Boolean).map(o=>JSON.parse(o))}function A(t,e){var d;let r=[];for(let i=t.length*.5;i--;){let a=`${g[t[i*2].codePointAt(0)]}${g[t[i*2+1].codePointAt(0)]}`;r.unshift(String.fromCharCode(parseInt(a,16)))}let n=[],o=[r.join(\"\")],p=10;for(;o.length;){let i=o.shift();try{if(n.push(JSON.parse(i)),e)return n}catch(a){if(!p--)throw a;let l=+((d=a.message.match(/\\sposition\\s(\\d+)$/))==null?void 0:d[1]);if(!l)throw a;o.unshift(i.substring(0,l),i.substring(l))}}return n}function _(t){var e;return{cleaned:t.replace(f,\"\"),encoded:((e=t.match(f))==null?void 0:e[0])||\"\"}}function O(t){return t&&JSON.parse(_(JSON.stringify(t)).cleaned)}export{f as VERCEL_STEGA_REGEX,y as legacyStegaEncode,O as vercelStegaClean,C as vercelStegaCombine,G as vercelStegaDecode,$ as vercelStegaDecodeAll,E as vercelStegaEncode,_ as vercelStegaSplit};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7972, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7978, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40emotion/memoize/dist/memoize.esm.js"],"sourcesContent":["function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n"],"names":[],"mappings":";;;AAAA,SAAS,QAAQ,EAAE;IACjB,IAAI,QAAQ,CAAC;IACb,OAAO,SAAU,GAAG;QAClB,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,KAAK,CAAC,IAAI,GAAG,GAAG;QAC9C,OAAO,KAAK,CAAC,IAAI;IACnB;AACF;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 7989, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7995, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40emotion/is-prop-valid/dist/is-prop-valid.esm.js"],"sourcesContent":["import memoize from '@emotion/memoize';\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport default index;\n"],"names":[],"mappings":";;;AAAA;;AAEA,IAAI,kBAAkB,65HAA65H,qDAAqD;AAEx+H,IAAI,QAAQ,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,SAAU,IAAI;IAChC,OAAO,gBAAgB,IAAI,CAAC,SAAS,KAAK,UAAU,CAAC,OAAO,OAEzD,KAAK,UAAU,CAAC,OAAO,OAEvB,KAAK,UAAU,CAAC,KAAK;AAC1B;uCAIe","ignoreList":[0]}},
    {"offset": {"line": 8005, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8011, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/node_modules/uuid/dist/esm-node/native.js"],"sourcesContent":["import crypto from 'node:crypto';\nexport default {\n  randomUUID: crypto.randomUUID\n};"],"names":[],"mappings":";;;AAAA;;uCACe;IACb,YAAY,uGAAA,CAAA,UAAM,CAAC,UAAU;AAC/B","ignoreList":[0]}},
    {"offset": {"line": 8019, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8025, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/node_modules/uuid/dist/esm-node/rng.js"],"sourcesContent":["import crypto from 'node:crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,YAAY,IAAI,WAAW,MAAM,qCAAqC;AAC5E,IAAI,UAAU,UAAU,MAAM;AACf,SAAS;IACtB,IAAI,UAAU,UAAU,MAAM,GAAG,IAAI;QACnC,uGAAA,CAAA,UAAM,CAAC,cAAc,CAAC;QACtB,UAAU;IACZ;IACA,OAAO,UAAU,KAAK,CAAC,SAAS,WAAW;AAC7C","ignoreList":[0]}},
    {"offset": {"line": 8039, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8045, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/node_modules/uuid/dist/esm-node/regex.js"],"sourcesContent":["export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;"],"names":[],"mappings":";;;uCAAe","ignoreList":[0]}},
    {"offset": {"line": 8049, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8055, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/node_modules/uuid/dist/esm-node/validate.js"],"sourcesContent":["import REGEX from './regex.js';\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;"],"names":[],"mappings":";;;AAAA;;AACA,SAAS,SAAS,IAAI;IACpB,OAAO,OAAO,SAAS,YAAY,2LAAA,CAAA,UAAK,CAAC,IAAI,CAAC;AAChD;uCACe","ignoreList":[0]}},
    {"offset": {"line": 8064, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8070, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/node_modules/uuid/dist/esm-node/stringify.js"],"sourcesContent":["import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;"],"names":[],"mappings":";;;;AAAA;;AAEA;;;CAGC,GACD,MAAM,YAAY,EAAE;AACpB,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,EAAG;IAC5B,UAAU,IAAI,CAAC,CAAC,IAAI,KAAK,EAAE,QAAQ,CAAC,IAAI,KAAK,CAAC;AAChD;AACO,SAAS,gBAAgB,GAAG,EAAE,SAAS,CAAC;IAC7C,uEAAuE;IACvE,oFAAoF;IACpF,EAAE;IACF,sEAAsE;IACtE,uEAAuE;IACvE,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,WAAW;AAClgB;AACA,SAAS,UAAU,GAAG,EAAE,SAAS,CAAC;IAChC,MAAM,OAAO,gBAAgB,KAAK;IAClC,4EAA4E;IAC5E,oBAAoB;IACpB,wEAAwE;IACxE,2BAA2B;IAC3B,mEAAmE;IACnE,IAAI,CAAC,CAAA,GAAA,8LAAA,CAAA,UAAQ,AAAD,EAAE,OAAO;QACnB,MAAM,UAAU;IAClB;IACA,OAAO;AACT;uCACe","ignoreList":[0]}},
    {"offset": {"line": 8104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8110, "column": 0}, "map": {"version":3,"sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/node_modules/uuid/dist/esm-node/v4.js"],"sourcesContent":["import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AACA,SAAS,GAAG,OAAO,EAAE,GAAG,EAAE,MAAM;IAC9B,IAAI,4LAAA,CAAA,UAAM,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,SAAS;QACzC,OAAO,4LAAA,CAAA,UAAM,CAAC,UAAU;IAC1B;IACA,UAAU,WAAW,CAAC;IACtB,MAAM,OAAO,QAAQ,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,yLAAA,CAAA,UAAG;IAElD,gEAAgE;IAChE,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,OAAO;IAC3B,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,OAAO;IAE3B,oCAAoC;IACpC,IAAI,KAAK;QACP,SAAS,UAAU;QACnB,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,EAAG;YAC3B,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,EAAE;QAC3B;QACA,OAAO;IACT;IACA,OAAO,CAAA,GAAA,+LAAA,CAAA,kBAAe,AAAD,EAAE;AACzB;uCACe","ignoreList":[0]}},
    {"offset": {"line": 8139, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8155, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/src/common.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/src/constants.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/src/request.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/src/channel.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/src/controller.ts","file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/%40sanity/comlink/src/node.ts"],"sourcesContent":["import {bufferCount, concatMap, defer, filter, fromEvent, map, pipe, take} from 'rxjs'\nimport {fromEventObservable} from 'xstate'\nimport type {ListenInput, ProtocolMessage} from './types'\n\nexport const listenInputFromContext =\n  (\n    config: (\n      | {\n          include: string | string[]\n          exclude?: string | string[]\n        }\n      | {\n          include?: string | string[]\n          exclude: string | string[]\n        }\n    ) & {\n      matches?: boolean\n      count?: number\n      responseType?: string\n    },\n  ) =>\n  <\n    T extends {\n      domain: string\n      connectTo: string\n      name: string\n      target: MessageEventSource | undefined\n    },\n  >({\n    context,\n  }: {\n    context: T\n  }): ListenInput => {\n    const {count, include, exclude, responseType = 'message.received'} = config\n    return {\n      count,\n      domain: context.domain,\n      from: context.connectTo,\n      include: include ? (Array.isArray(include) ? include : [include]) : [],\n      exclude: exclude ? (Array.isArray(exclude) ? exclude : [exclude]) : [],\n      responseType,\n      target: context.target,\n      to: context.name,\n    }\n  }\n\nexport const listenFilter =\n  (input: ListenInput) =>\n  (event: MessageEvent<ProtocolMessage>): boolean => {\n    const {data} = event\n    return (\n      (input.include.length ? input.include.includes(data.type) : true) &&\n      (input.exclude.length ? !input.exclude.includes(data.type) : true) &&\n      data.domain === input.domain &&\n      data.from === input.from &&\n      data.to === input.to &&\n      (!input.target || event.source === input.target)\n    )\n  }\n\nexport const eventToMessage =\n  <T>(type: T) =>\n  (event: MessageEvent<ProtocolMessage>): {type: T; message: MessageEvent<ProtocolMessage>} => ({\n    type,\n    message: event,\n  })\n\nexport const messageEvents$ = defer(() =>\n  fromEvent<MessageEvent<ProtocolMessage>>(window, 'message'),\n)\n\n/**\n * @public\n */\nexport const createListenLogic = (\n  compatMap?: (event: MessageEvent<ProtocolMessage>) => MessageEvent<ProtocolMessage>,\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n) =>\n  fromEventObservable(({input}: {input: ListenInput}) => {\n    return messageEvents$.pipe(\n      compatMap ? map(compatMap) : pipe(),\n      filter(listenFilter(input)),\n      map(eventToMessage(input.responseType)),\n      input.count\n        ? pipe(\n            bufferCount(input.count),\n            concatMap((arr) => arr),\n            take(input.count),\n          )\n        : pipe(),\n    )\n  })\n","import type {MessageType} from './types'\n\n/** @internal */\nexport const DOMAIN = 'sanity/comlink'\n\n/** @internal */\nexport const RESPONSE_TIMEOUT = 10000\n\n/** @internal */\nexport const HEARTBEAT_INTERVAL = 1000\n\n/** @internal */\nexport const HANDSHAKE_INTERVAL = 500\n\n/**\n * @public\n */\nexport const MSG_RESPONSE = 'comlink/response'\n\n/**\n * @public\n */\nexport const MSG_HEARTBEAT = 'comlink/heartbeat'\n\n/** @internal */\nexport const MSG_DISCONNECT = 'comlink/disconnect'\n\n/** @internal */\nexport const MSG_HANDSHAKE_SYN = 'comlink/handshake/syn'\n\n/** @internal */\nexport const MSG_HANDSHAKE_SYN_ACK = 'comlink/handshake/syn-ack'\n\n/** @internal */\nexport const MSG_HANDSHAKE_ACK = 'comlink/handshake/ack'\n\n/** @internal */\nexport const HANDSHAKE_MSG_TYPES = [\n  MSG_HANDSHAKE_SYN,\n  MSG_HANDSHAKE_SYN_ACK,\n  MSG_HANDSHAKE_ACK,\n] satisfies MessageType[]\n\n/** @internal */\nexport const INTERNAL_MSG_TYPES = [\n  MSG_RESPONSE,\n  MSG_DISCONNECT,\n  MSG_HEARTBEAT,\n  ...HANDSHAKE_MSG_TYPES,\n] satisfies MessageType[]\n","import {EMPTY, filter, fromEvent, map, take, takeUntil, type Observable} from 'rxjs'\nimport {v4 as uuid} from 'uuid'\nimport {\n  assign,\n  fromEventObservable,\n  sendTo,\n  setup,\n  type ActorRefFrom,\n  type AnyActorRef,\n} from 'xstate'\nimport {MSG_RESPONSE, RESPONSE_TIMEOUT} from './constants'\nimport type {Message, MessageData, MessageType, ProtocolMessage, ResponseMessage} from './types'\n\nconst throwOnEvent =\n  <T>(message?: string) =>\n  (source: Observable<T>) =>\n    source.pipe(\n      take(1),\n      map(() => {\n        throw new Error(message)\n      }),\n    )\n\n/**\n * @public\n */\nexport interface RequestMachineContext<S extends Message> {\n  connectionId: string\n  data: MessageData | undefined\n  domain: string\n  expectResponse: boolean\n  from: string\n  id: string\n  parentRef: AnyActorRef\n  resolvable: PromiseWithResolvers<S['response']> | undefined\n  response: S['response'] | null\n  responseTo: string | undefined\n  signal: AbortSignal | undefined\n  suppressWarnings: boolean | undefined\n  sources: Set<MessageEventSource>\n  targetOrigin: string\n  to: string\n  type: MessageType\n}\n\n/**\n * @public\n */\nexport type RequestActorRef<S extends Message> = ActorRefFrom<\n  ReturnType<typeof createRequestMachine<S>>\n>\n\n/**\n * @public\n */\nexport const createRequestMachine = <\n  S extends Message,\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n>() => {\n  return setup({\n    types: {} as {\n      children: {\n        'listen for response': 'listen'\n      }\n      context: RequestMachineContext<S>\n      // @todo Should response types be specified?\n      events: {type: 'message'; data: ProtocolMessage<ResponseMessage>} | {type: 'abort'}\n      emitted:\n        | {type: 'request.failed'; requestId: string}\n        | {type: 'request.aborted'; requestId: string}\n        | {\n            type: 'request.success'\n            requestId: string\n            response: MessageData | null\n            responseTo: string | undefined\n          }\n      input: {\n        connectionId: string\n        data?: S['data']\n        domain: string\n        expectResponse?: boolean\n        from: string\n        parentRef: AnyActorRef\n        resolvable?: PromiseWithResolvers<S['response']>\n        responseTo?: string\n        signal?: AbortSignal\n        sources: Set<MessageEventSource> | MessageEventSource\n        suppressWarnings?: boolean\n        targetOrigin: string\n        to: string\n        type: S['type']\n      }\n      output: {\n        requestId: string\n        response: S['response'] | null\n        responseTo: string | undefined\n      }\n    },\n    actors: {\n      listen: fromEventObservable(\n        ({\n          input,\n        }: {\n          input: {\n            requestId: string\n            sources: Set<MessageEventSource>\n            signal?: AbortSignal\n          }\n        }) => {\n          const abortSignal$ = input.signal\n            ? fromEvent(input.signal, 'abort').pipe(\n                throwOnEvent(`Request ${input.requestId} aborted`),\n              )\n            : EMPTY\n\n          const messageFilter = (event: MessageEvent<ProtocolMessage<ResponseMessage>>) =>\n            event.data?.type === MSG_RESPONSE &&\n            event.data?.responseTo === input.requestId &&\n            !!event.source &&\n            input.sources.has(event.source)\n\n          return fromEvent<MessageEvent<ProtocolMessage<ResponseMessage>>>(window, 'message').pipe(\n            filter(messageFilter),\n            take(input.sources.size),\n            takeUntil(abortSignal$),\n          )\n        },\n      ),\n    },\n    actions: {\n      'send message': ({context}, params: {message: ProtocolMessage}) => {\n        const {sources, targetOrigin} = context\n        const {message} = params\n\n        sources.forEach((source) => {\n          source.postMessage(message, {targetOrigin})\n        })\n      },\n      'on success': sendTo(\n        ({context}) => context.parentRef,\n        ({context, self}) => {\n          if (context.response) {\n            context.resolvable?.resolve(context.response)\n          }\n          return {\n            type: 'request.success',\n            requestId: self.id,\n            response: context.response,\n            responseTo: context.responseTo,\n          }\n        },\n      ),\n      'on fail': sendTo(\n        ({context}) => context.parentRef,\n        ({context, self}) => {\n          if (!context.suppressWarnings) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `[@sanity/comlink] Received no response to message '${context.type}' on client '${context.from}' (ID: '${context.id}').`,\n            )\n          }\n          context.resolvable?.reject(new Error('No response received'))\n          return {type: 'request.failed', requestId: self.id}\n        },\n      ),\n      'on abort': sendTo(\n        ({context}) => context.parentRef,\n        ({context, self}) => {\n          context.resolvable?.reject(new Error('Request aborted'))\n          return {type: 'request.aborted', requestId: self.id}\n        },\n      ),\n    },\n    guards: {\n      expectsResponse: ({context}) => context.expectResponse,\n    },\n    delays: {\n      initialTimeout: 0,\n      responseTimeout: RESPONSE_TIMEOUT,\n    },\n  }).createMachine({\n    /** @xstate-layout N4IgpgJg5mDOIC5QAoC2BDAxgCwJYDswBKAOlwgBswBiAD1gBd0GwT0AzFgJ2QNwdzoKAFVyowAewCuDItTRY8hUuSoBtAAwBdRKAAOE2P1wT8ukLUQBGAEwBWEgBYAnK+eOAzB7sB2DzY8rABoQAE9rDQc3V0cNTw8fAA4NHwBfVJCFHAJiElgwfAgCKGpNHSQQAyMBU3NLBDsrDxI7DTaAjQA2OOcNDxDwhHsNJx9Ou0TOq2cJxP9HdMyMbOU8gqL8ErUrcv1DY1qK+sbm1vaPLp6+gcRnGydo9wDGycWQLKVc9AB3dGNN6jiWCwdAwMrmKoHMxHRCJRKOEiJHwuZKBZwXKzBMKIGyYkhtAkXOweTqOHw2RJvD45Ug-P4CAH0JgsNicMA8LhwAz4fKicTSWTyZafWm-f5QcEVSE1aGgepwhFIlF9aYYrGDC4+JzEppjGzOUkeGbpDIgfASCBwczU5QQ-YyuqIAC0nRuCBd+IJXu9KSpwppZEoYDt1RMsosiEcNjdVjiJEeGisiSTHkcVgWpptuXyhWKIahjqGzi1BqRJINnVcdkcbuTLS9VYC8ISfsUAbp4vzDphCHJIyjBvJNlxNmRNexQ3sJGH43GPj8jWJrZWuXYfyoEC7YcLsbrgRsjkcvkmdgNbopVhIPhVfnsh8ClMz-tWsCkmEwcHgUvt257u8v+6Hse4xnhOdZnImVidPqCRNB4JqpEAA */\n    context: ({input}) => {\n      return {\n        connectionId: input.connectionId,\n        data: input.data,\n        domain: input.domain,\n        expectResponse: input.expectResponse ?? false,\n        from: input.from,\n        id: `msg-${uuid()}`,\n        parentRef: input.parentRef,\n        resolvable: input.resolvable,\n        response: null,\n        responseTo: input.responseTo,\n        signal: input.signal,\n        sources: input.sources instanceof Set ? input.sources : new Set([input.sources]),\n        suppressWarnings: input.suppressWarnings,\n        targetOrigin: input.targetOrigin,\n        to: input.to,\n        type: input.type,\n      }\n    },\n    initial: 'idle',\n    on: {\n      abort: '.aborted',\n    },\n    states: {\n      idle: {\n        after: {\n          initialTimeout: [\n            {\n              target: 'sending',\n            },\n          ],\n        },\n      },\n      sending: {\n        entry: {\n          type: 'send message',\n          params: ({context}) => {\n            const {connectionId, data, domain, from, id, responseTo, to, type} = context\n            const message = {\n              connectionId,\n              data,\n              domain,\n              from,\n              id,\n              to,\n              type,\n              responseTo,\n            }\n            return {message}\n          },\n        },\n        always: [\n          {\n            guard: 'expectsResponse',\n            target: 'awaiting',\n          },\n          'success',\n        ],\n      },\n      awaiting: {\n        invoke: {\n          id: 'listen for response',\n          src: 'listen',\n          input: ({context}) => ({\n            requestId: context.id,\n            sources: context.sources,\n            signal: context.signal,\n          }),\n          onError: 'aborted',\n        },\n        after: {\n          responseTimeout: 'failed',\n        },\n        on: {\n          message: {\n            actions: assign({\n              response: ({event}) => event.data.data,\n              responseTo: ({event}) => event.data.responseTo,\n            }),\n            target: 'success',\n          },\n        },\n      },\n      failed: {\n        type: 'final',\n        entry: 'on fail',\n      },\n      success: {\n        type: 'final',\n        entry: 'on success',\n      },\n      aborted: {\n        type: 'final',\n        entry: 'on abort',\n      },\n    },\n    output: ({context, self}) => {\n      const output = {\n        requestId: self.id,\n        response: context.response,\n        responseTo: context.responseTo,\n      }\n      return output\n    },\n  })\n}\n\n// export const delayedRequestMachine = requestMachine.provide({\n//   delays: {\n//     initialTimeout: 500,\n//   },\n// })\n","import {v4 as uuid} from 'uuid'\nimport {\n  assertEvent,\n  assign,\n  createActor,\n  enqueueActions,\n  fromCallback,\n  raise,\n  setup,\n  stopChild,\n  type ActorRefFrom,\n  type EventObject,\n} from 'xstate'\nimport {createListenLogic, listenInputFromContext} from './common'\nimport {\n  DOMAIN,\n  HANDSHAKE_INTERVAL,\n  MSG_DISCONNECT,\n  MSG_HANDSHAKE_ACK,\n  MSG_HANDSHAKE_SYN,\n  MSG_HANDSHAKE_SYN_ACK,\n  MSG_HEARTBEAT,\n  MSG_RESPONSE,\n} from './constants'\nimport {createRequestMachine, type RequestActorRef} from './request'\nimport type {\n  BufferAddedEmitEvent,\n  BufferFlushedEmitEvent,\n  Message,\n  MessageEmitEvent,\n  ProtocolMessage,\n  RequestData,\n  Status,\n  WithoutResponse,\n} from './types'\n\n/**\n * @public\n */\nexport type ChannelActorLogic<R extends Message, S extends Message> = ReturnType<\n  typeof createChannelMachine<R, S>\n>\n/**\n * @public\n */\nexport type ChannelActor<R extends Message, S extends Message> = ActorRefFrom<\n  ReturnType<typeof createChannelMachine<R, S>>\n>\n\n/**\n * @public\n */\nexport type Channel<R extends Message, S extends Message> = {\n  actor: ChannelActor<R, S>\n  connect: () => void\n  disconnect: () => void\n  id: string\n  name: string\n  machine: ReturnType<typeof createChannelMachine<R, S>>\n  on: <T extends R['type'], U extends Extract<R, {type: T}>>(\n    type: T,\n    handler: (event: U['data']) => Promise<U['response']> | U['response'],\n  ) => () => void\n  onStatus: (handler: (status: Status) => void) => () => void\n  post: (data: WithoutResponse<S>) => void\n  setTarget: (target: MessageEventSource) => void\n  start: () => () => void\n  stop: () => void\n  target: MessageEventSource | undefined\n}\n\n/**\n * @public\n */\nexport interface ChannelInput {\n  connectTo: string\n  domain?: string\n  heartbeat?: boolean\n  name: string\n  id?: string\n  target?: MessageEventSource\n  targetOrigin: string\n}\n\nconst sendBackAtInterval = fromCallback<\n  EventObject,\n  {event: EventObject; immediate?: boolean; interval: number}\n>(({sendBack, input}) => {\n  const send = () => {\n    sendBack(input.event)\n  }\n\n  if (input.immediate) {\n    send()\n  }\n\n  const interval = setInterval(send, input.interval)\n\n  return () => {\n    clearInterval(interval)\n  }\n})\n\n/**\n * @public\n */\nexport const createChannelMachine = <\n  R extends Message, // Receives\n  S extends Message, // Sends\n  V extends WithoutResponse<S> = WithoutResponse<S>,\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n>() => {\n  const channelMachine = setup({\n    types: {} as {\n      children: {\n        'listen for handshake': 'listen'\n        'listen for messages': 'listen'\n        'send heartbeat': 'sendBackAtInterval'\n        'send syn': 'sendBackAtInterval'\n      }\n      context: {\n        buffer: Array<V>\n        connectionId: string\n        connectTo: string\n        domain: string\n        heartbeat: boolean\n        id: string\n        name: string\n        requests: Array<RequestActorRef<S>>\n        target: MessageEventSource | undefined\n        targetOrigin: string\n      }\n      emitted:\n        | BufferAddedEmitEvent<V>\n        | BufferFlushedEmitEvent<V>\n        | MessageEmitEvent<R>\n        | (R extends R ? {type: R['type']; message: ProtocolMessage<R>} : never)\n      events:\n        | {type: 'connect'}\n        | {type: 'disconnect'}\n        | {type: 'message.received'; message: MessageEvent<ProtocolMessage<R>>}\n        | {type: 'post'; data: V}\n        | {type: 'response'; respondTo: string; data: Pick<S, 'response'>}\n        | {type: 'request.aborted'; requestId: string}\n        | {type: 'request.failed'; requestId: string}\n        | {\n            type: 'request.success'\n            requestId: string\n            response: S['response'] | null\n            responseTo: string | undefined\n          }\n        | {type: 'request'; data: RequestData<S> | RequestData<S>[]}\n        | {type: 'syn'}\n        | {type: 'target.set'; target: MessageEventSource}\n      input: ChannelInput\n    },\n    actors: {\n      requestMachine: createRequestMachine<S>(),\n      listen: createListenLogic(),\n      sendBackAtInterval,\n    },\n    actions: {\n      'buffer message': enqueueActions(({enqueue}) => {\n        enqueue.assign({\n          buffer: ({event, context}) => {\n            assertEvent(event, 'post')\n            return [...context.buffer, event.data]\n          },\n        })\n        enqueue.emit(({event}) => {\n          assertEvent(event, 'post')\n          return {\n            type: '_buffer.added',\n            message: event.data,\n          } satisfies BufferAddedEmitEvent<V>\n        })\n      }),\n      'create request': assign({\n        requests: ({context, event, self, spawn}) => {\n          assertEvent(event, 'request')\n          const arr = Array.isArray(event.data) ? event.data : [event.data]\n          const requests = arr.map((request) => {\n            const id = `req-${uuid()}`\n            return spawn('requestMachine', {\n              id,\n              input: {\n                connectionId: context.connectionId,\n                data: request.data,\n                domain: context.domain,\n                expectResponse: request.expectResponse,\n                from: context.name,\n                parentRef: self,\n                responseTo: request.responseTo,\n                sources: context.target!,\n                targetOrigin: context.targetOrigin,\n                to: context.connectTo,\n                type: request.type,\n              },\n            })\n          })\n          return [...context.requests, ...requests]\n        },\n      }),\n      'emit received message': enqueueActions(({enqueue}) => {\n        enqueue.emit(({event}) => {\n          assertEvent(event, 'message.received')\n          return {\n            type: '_message',\n            message: event.message.data,\n          } satisfies MessageEmitEvent<R>\n        })\n        enqueue.emit(({event}) => {\n          assertEvent(event, 'message.received')\n          const emit = {\n            type: event.message.data.type,\n            message: event.message.data,\n          }\n          return emit\n        })\n      }),\n      'flush buffer': enqueueActions(({enqueue}) => {\n        enqueue.raise(({context}) => ({\n          type: 'request',\n          data: context.buffer.map(({data, type}) => ({data, type})),\n        }))\n        enqueue.emit(({context}) => {\n          return {\n            type: '_buffer.flushed',\n            messages: context.buffer,\n          } satisfies BufferFlushedEmitEvent<V>\n        })\n        enqueue.assign({\n          buffer: [],\n        })\n      }),\n      'post': raise(({event}) => {\n        assertEvent(event, 'post')\n        return {\n          type: 'request' as const,\n          data: {\n            data: event.data.data,\n            expectResponse: true,\n            type: event.data.type,\n          },\n        }\n      }),\n      'remove request': enqueueActions(({context, enqueue, event}) => {\n        assertEvent(event, ['request.success', 'request.failed', 'request.aborted'])\n        stopChild(event.requestId)\n        enqueue.assign({requests: context.requests.filter(({id}) => id !== event.requestId)})\n      }),\n      'respond': raise(({event}) => {\n        assertEvent(event, 'response')\n        return {\n          type: 'request' as const,\n          data: {\n            data: event.data,\n            type: MSG_RESPONSE,\n            responseTo: event.respondTo,\n          },\n        }\n      }),\n      'send handshake ack': raise({\n        type: 'request',\n        data: {type: MSG_HANDSHAKE_ACK},\n      }),\n      'send disconnect': raise(() => {\n        return {\n          type: 'request' as const,\n          data: {type: MSG_DISCONNECT},\n        }\n      }),\n      'send handshake syn': raise({\n        type: 'request',\n        data: {type: MSG_HANDSHAKE_SYN},\n      }),\n      'set target': assign({\n        target: ({event}) => {\n          assertEvent(event, 'target.set')\n          return event.target\n        },\n      }),\n    },\n    guards: {\n      'has target': ({context}) => !!context.target,\n      'should send heartbeats': ({context}) => context.heartbeat,\n    },\n  }).createMachine({\n    /** @xstate-layout N4IgpgJg5mDOIC5QGMAWBDAdpsAbAxAC7oBOMhAdLGIQNoAMAuoqAA4D2sAloV+5ixAAPRAHZRAJgoAWABz0ArHICMy2QGZZCgJwAaEAE9EE+tIrb6ANgkLl46fTuj1AXxf60WHARJgAjgCucJSwAcjIcLAMzEggHNy8-IIiCKLS2hQS6qb2yurisrL6RgjK9LIyCuqq0g7WstZuHhjYePi+gcEUAGboXLiQ0YLxPHwCsSmiCgoykpayDtqS6trqxYjKEk0gnq24FFwQA-jI-DjIdEzDnKNJExuOZpZ12eq29OrSCuupypYUojUaTKCnm5Wk2123gORzA+HilxibBuiXGoBSGnUAIU4gU9FWamUtR+lmUM1EllBEkslMUEnpkJa0JaEFgGAA1lxMFB8LADJghrERqjkhtshk3mTtNo5OpqpYfqCKhTptoqpY1WUtu4dky8BQWWz0Jzue1-EFYIjrgkxqLSupqRRPpoPqJtLI0hIioZENJJE7NnJ8ZYHVk1YyvPrDRyuTyEYLkTa7uixVlMh81KGFhS1j6EPkZlpVjTphr8mkI3sDVhWTHTQBbSLoGAUXwRLgAN0GVyFKNt91KimUFEKXvKC2s9R+6X+jipnzJeSqEJ1UKjNaNJp5EC4sFOrQuCbifeTwg2cgoym0RPxDtqkj0eaB9Ao8zSolMEivZVcq71+33c5CEgeFOCtXskzRM8EDxKRpmkSw3QJbQsmpH5tHmV8JHSbJpDsakV2aSMALOMALhAjoLXAxNbiglI-SxWw1Vw0QNDw0Qfg9KQ7EJSxHHxApK2hQCyOAiAzVgDhMGoI9hX7FMEHSF8cWkelpHURCbBsb481xAEgT9BQJCmWQsiE-URPI8TG1gWBmzAVsyLATtuyRY9ILtWoKmlL82Kqd0tAVJ91LMHFZDKIkVlkNVZHMkiDzE-Adz3UjDx7GiRQHCKnheD53k+HSSkDDIwpBVTqQwuKKEssSDTAUhCAAI3qyg0DIrd8Fkk86MQUMnVM+RynoegTDJH48hGp0vR-FDRqqKqasgOqGua9AQjATAd1NSiul6fpXOtWi7Wy19cslD4vnG7IX3oVjVDUVYEJQqrksW8SdstLqPKy0wKgG1RhtMWogqKhoMjkWp6XxUyFBe3c3tAz70vco6fq+V8PTkGUFzdQqNnELEM2yClrwwzQ4ZShKQJqr7UYU98AS0W9pT4z5pHG0yXwMkNNTyGk3B1TB2AgOBBDXXBDsyhSFG9EovQqN5i1JeRcKqw4Bkl+ToMx8x0j+EaqQ9XMSkBURMgMkEwQWKro2NWNNdPFJAzN0lJGM4slDxhBEJfXyplBd03wW1KxIdnrBxBh4JAyW75C8rJpmDqmIGWkgmpasPjqUcaHooMLHA0uU1UkJOgKW1B6rT1bWor5At0zgcTAkK7hrz1irB0D8cW0UvRPLyv07WqgNq2qAG+l9SnXUz0UOXD5xuMs3Y4+DVJBX7UiKrV6Q8gcfoJO54rFefLLqfJYX1WKYNLxL4NO1NwgA */\n    id: 'channel',\n    context: ({input}) => ({\n      id: input.id || `${input.name}-${uuid()}`,\n      buffer: [],\n      connectionId: `cnx-${uuid()}`,\n      connectTo: input.connectTo,\n      domain: input.domain ?? DOMAIN,\n      heartbeat: input.heartbeat ?? false,\n      name: input.name,\n      requests: [],\n      target: input.target,\n      targetOrigin: input.targetOrigin,\n    }),\n    on: {\n      'target.set': {\n        actions: 'set target',\n      },\n      'request.success': {\n        actions: 'remove request',\n      },\n      'request.failed': {\n        actions: 'remove request',\n      },\n    },\n    initial: 'idle',\n    states: {\n      idle: {\n        on: {\n          connect: {\n            target: 'handshaking',\n            guard: 'has target',\n          },\n          post: {\n            actions: 'buffer message',\n          },\n        },\n      },\n      handshaking: {\n        id: 'handshaking',\n        invoke: [\n          {\n            id: 'send syn',\n            src: 'sendBackAtInterval',\n            input: () => ({\n              event: {type: 'syn'},\n              interval: HANDSHAKE_INTERVAL,\n              immediate: true,\n            }),\n          },\n          {\n            id: 'listen for handshake',\n            src: 'listen',\n            input: (input) =>\n              listenInputFromContext({\n                include: MSG_HANDSHAKE_SYN_ACK,\n                count: 1,\n              })(input),\n            /* Below would maybe be more readable than transitioning to\n          'connected' on 'message', and 'ack' on exit but having onDone when\n          using passing invocations currently breaks XState Editor */\n            // onDone: {\n            //   target: 'connected',\n            //   actions: 'ack',\n            // },\n          },\n        ],\n        on: {\n          'syn': {\n            actions: 'send handshake syn',\n          },\n          'request': {\n            actions: 'create request',\n          },\n          'post': {\n            actions: 'buffer message',\n          },\n          'message.received': {\n            target: 'connected',\n          },\n          'disconnect': {\n            target: 'disconnected',\n          },\n        },\n        exit: 'send handshake ack',\n      },\n      connected: {\n        entry: 'flush buffer',\n        invoke: {\n          id: 'listen for messages',\n          src: 'listen',\n          input: listenInputFromContext({\n            exclude: [MSG_RESPONSE, MSG_HEARTBEAT],\n          }),\n        },\n        on: {\n          'post': {\n            actions: 'post',\n          },\n          'request': {\n            actions: 'create request',\n          },\n          'response': {\n            actions: 'respond',\n          },\n          'message.received': {\n            actions: 'emit received message',\n          },\n          'disconnect': {\n            target: 'disconnected',\n          },\n        },\n        initial: 'heartbeat',\n        states: {\n          heartbeat: {\n            initial: 'checking',\n            states: {\n              checking: {\n                always: {\n                  guard: 'should send heartbeats',\n                  target: 'sending',\n                },\n              },\n              sending: {\n                on: {\n                  'request.failed': {\n                    target: '#handshaking',\n                  },\n                },\n                invoke: {\n                  id: 'send heartbeat',\n                  src: 'sendBackAtInterval',\n                  input: () => ({\n                    event: {type: 'post', data: {type: MSG_HEARTBEAT, data: undefined}},\n                    interval: 2000,\n                    immediate: false,\n                  }),\n                },\n              },\n            },\n          },\n        },\n      },\n      disconnected: {\n        id: 'disconnected',\n        entry: 'send disconnect',\n        on: {\n          request: {\n            actions: 'create request',\n          },\n          post: {\n            actions: 'buffer message',\n          },\n          connect: {\n            target: 'handshaking',\n            guard: 'has target',\n          },\n        },\n      },\n    },\n  })\n\n  return channelMachine\n}\n\n/**\n * @public\n */\nexport const createChannel = <R extends Message, S extends Message>(\n  input: ChannelInput,\n  machine: ChannelActorLogic<R, S> = createChannelMachine<R, S>(),\n): Channel<R, S> => {\n  const id = input.id || `${input.name}-${uuid()}`\n  const actor = createActor(machine, {\n    input: {...input, id},\n  })\n\n  const on = <T extends R['type'], U extends Extract<R, {type: T}>>(\n    type: T,\n    handler: (event: U['data']) => Promise<U['response']> | U['response'],\n  ) => {\n    const {unsubscribe} = actor.on(\n      // @ts-expect-error @todo `type` typing\n      type,\n      async (event: {type: T; message: ProtocolMessage<U>}) => {\n        const response = await handler(event.message.data)\n        if (response) {\n          actor.send({type: 'response', respondTo: event.message.id, data: response})\n        }\n      },\n    )\n    return unsubscribe\n  }\n\n  const connect = () => {\n    actor.send({type: 'connect'})\n  }\n\n  const disconnect = () => {\n    actor.send({type: 'disconnect'})\n  }\n\n  const onStatus = (handler: (status: Status) => void) => {\n    const currentSnapshot = actor.getSnapshot()\n    let currentStatus: Status =\n      typeof currentSnapshot.value === 'string'\n        ? currentSnapshot.value\n        : Object.keys(currentSnapshot.value)[0]\n\n    const {unsubscribe} = actor.subscribe((state) => {\n      const status: Status =\n        typeof state.value === 'string' ? state.value : Object.keys(state.value)[0]\n      if (currentStatus !== status) {\n        currentStatus = status\n        handler(status)\n      }\n    })\n    return unsubscribe\n  }\n\n  const setTarget = (target: MessageEventSource) => {\n    actor.send({type: 'target.set', target})\n  }\n\n  const post = (data: WithoutResponse<S>) => {\n    actor.send({type: 'post', data})\n  }\n\n  const stop = () => {\n    actor.stop()\n  }\n\n  const start = () => {\n    actor.start()\n    return stop\n  }\n\n  return {\n    actor,\n    connect,\n    disconnect,\n    id,\n    name: input.name,\n    machine,\n    on,\n    onStatus,\n    post,\n    setTarget,\n    start,\n    stop,\n    get target() {\n      return actor.getSnapshot().context.target\n    },\n  }\n}\n","import {\n  createChannel,\n  createChannelMachine,\n  type Channel,\n  type ChannelActorLogic,\n  type ChannelInput,\n} from './channel'\nimport {type InternalEmitEvent, type Message, type StatusEvent, type WithoutResponse} from './types'\n\n/**\n * @public\n */\nexport type ConnectionInput = Omit<ChannelInput, 'target' | 'targetOrigin'>\n\n/**\n * @public\n */\nexport interface ConnectionInstance<R extends Message, S extends Message> {\n  on: <T extends R['type'], U extends Extract<R, {type: T}>>(\n    type: T,\n    handler: (event: U['data']) => Promise<U['response']> | U['response'],\n  ) => () => void\n  onInternalEvent: <\n    T extends InternalEmitEvent<R, S>['type'],\n    U extends Extract<InternalEmitEvent<R, S>, {type: T}>,\n  >(\n    type: T,\n    handler: (event: U) => void,\n  ) => () => void\n  onStatus: (handler: (event: StatusEvent) => void) => void\n  post: (data: WithoutResponse<S>) => void\n  start: () => () => void\n  stop: () => void\n}\n\n/**\n * @public\n */\nexport interface Controller {\n  addTarget: (target: MessageEventSource) => () => void\n  createConnection: <R extends Message, S extends Message>(\n    input: ConnectionInput,\n    machine?: ChannelActorLogic<R, S>,\n  ) => ConnectionInstance<R, S>\n  destroy: () => void\n}\n\ninterface Connection<\n  R extends Message = Message,\n  S extends Message = Message,\n  T extends InternalEmitEvent<R, S>['type'] = InternalEmitEvent<R, S>['type'],\n> {\n  input: ConnectionInput\n  channels: Set<Channel<R, S>>\n  internalEventSubscribers: Set<{\n    type: T\n    handler: (event: Extract<InternalEmitEvent<R, S>, {type: T}>) => void\n    unsubscribers: Array<() => void>\n  }>\n  machine: ChannelActorLogic<R, S>\n  statusSubscribers: Set<{\n    handler: (event: StatusEvent) => void\n    unsubscribers: Array<() => void>\n  }>\n  subscribers: Set<{\n    type: R['type']\n    handler: (event: R['data']) => Promise<R['response']> | R['response']\n    unsubscribers: Array<() => void>\n  }>\n}\n\nconst noop = () => {}\n\n/**\n * @public\n */\nexport const createController = (input: {targetOrigin: string}): Controller => {\n  const {targetOrigin} = input\n  const targets = new Set<MessageEventSource>()\n  const connections = new Set<Connection>()\n\n  const addTarget = (target: MessageEventSource) => {\n    // If the target has already been added, return just a noop cleanup\n    if (targets.has(target)) {\n      return noop\n    }\n\n    if (!targets.size || !connections.size) {\n      targets.add(target)\n\n      // If there are existing connections, set the target on all existing\n      // channels, and trigger a connection event\n      connections.forEach((connection) => {\n        connection.channels.forEach((channel) => {\n          channel.setTarget(target)\n          channel.connect()\n        })\n      })\n      // We perform a 'soft' cleanup here: disconnect only as we want to\n      // maintain at least one live channel per connection\n      return () => {\n        targets.delete(target)\n        connections.forEach((connection) => {\n          connection.channels.forEach((channel) => {\n            if (channel.target === target) {\n              channel.disconnect()\n            }\n          })\n        })\n      }\n    }\n\n    targets.add(target)\n\n    // Maintain a list of channels to cleanup\n    const targetChannels = new Set<Channel<Message, Message>>()\n\n    // If we already have targets and connections, we need to create new\n    // channels for each source with all the associated subscribers.\n    connections.forEach((connection) => {\n      const channel = createChannel(\n        {\n          ...connection.input,\n          target,\n          targetOrigin,\n        },\n        connection.machine,\n      )\n\n      targetChannels.add(channel)\n      connection.channels.add(channel)\n\n      connection.subscribers.forEach(({type, handler, unsubscribers}) => {\n        unsubscribers.push(channel.on(type, handler))\n      })\n      connection.internalEventSubscribers.forEach(({type, handler, unsubscribers}) => {\n        // @ts-expect-error @todo\n        unsubscribers.push(channel.actor.on(type, handler).unsubscribe)\n      })\n      connection.statusSubscribers.forEach(({handler, unsubscribers}) => {\n        unsubscribers.push(channel.onStatus((status) => handler({channel: channel.id, status})))\n      })\n\n      channel.start()\n      channel.connect()\n    })\n\n    // We perform a more 'aggressive' cleanup here as we do not need to maintain\n    // these 'duplicate' channels: disconnect, stop, and delete\n    return () => {\n      targets.delete(target)\n      targetChannels.forEach((channel) => {\n        cleanupChannel(channel)\n        connections.forEach((connection) => {\n          connection.channels.delete(channel)\n        })\n      })\n    }\n  }\n\n  const cleanupChannel: (channel: Channel<Message, Message>) => void = (channel) => {\n    channel.disconnect()\n    // Necessary to allow disconnect messages to be sent before the channel\n    // actor is stopped\n    setTimeout(() => {\n      channel.stop()\n    }, 0)\n  }\n\n  const createConnection = <R extends Message, S extends Message>(\n    input: ConnectionInput,\n    machine: ChannelActorLogic<R, S> = createChannelMachine<R, S>(),\n  ): ConnectionInstance<R, S> => {\n    const connection: Connection<R, S> = {\n      channels: new Set(),\n      input,\n      internalEventSubscribers: new Set(),\n      machine,\n      statusSubscribers: new Set(),\n      subscribers: new Set(),\n    }\n\n    // @ts-expect-error @todo @help\n    connections.add(connection)\n\n    const {channels, internalEventSubscribers, statusSubscribers, subscribers} = connection\n\n    if (targets.size) {\n      // If targets have already been added, create a channel for each target\n      targets.forEach((target) => {\n        const channel = createChannel<R, S>(\n          {\n            ...input,\n            target,\n            targetOrigin,\n          },\n          machine,\n        )\n        channels.add(channel)\n      })\n    } else {\n      // If targets have not been added yet, create a channel without a target\n      const channel = createChannel<R, S>({...input, targetOrigin}, machine)\n      channels.add(channel)\n    }\n\n    const post: ConnectionInstance<R, S>['post'] = (data) => {\n      channels.forEach((channel) => {\n        channel.post(data)\n      })\n    }\n\n    const on: ConnectionInstance<R, S>['on'] = (type, handler) => {\n      const unsubscribers: Array<() => void> = []\n      channels.forEach((channel) => {\n        unsubscribers.push(channel.on(type, handler))\n      })\n      const subscriber = {type, handler, unsubscribers}\n      subscribers.add(subscriber)\n      return () => {\n        unsubscribers.forEach((unsub) => unsub())\n        subscribers.delete(subscriber)\n      }\n    }\n\n    const onInternalEvent = <\n      T extends InternalEmitEvent<R, S>['type'],\n      U extends Extract<InternalEmitEvent<R, S>, {type: T}>,\n    >(\n      type: T,\n      handler: (event: U) => void,\n    ) => {\n      const unsubscribers: Array<() => void> = []\n      channels.forEach((channel) => {\n        // @ts-expect-error @todo @help\n        unsubscribers.push(channel.actor.on(type, handler).unsubscribe)\n      })\n      const subscriber = {type, handler, unsubscribers}\n      // @ts-expect-error @todo @help\n      internalEventSubscribers.add(subscriber)\n      return () => {\n        unsubscribers.forEach((unsub) => unsub())\n        // @ts-expect-error @todo @help\n        internalEventSubscribers.delete(subscriber)\n      }\n    }\n\n    const onStatus = (handler: (event: StatusEvent) => void) => {\n      const unsubscribers: Array<() => void> = []\n      channels.forEach((channel) => {\n        unsubscribers.push(channel.onStatus((status) => handler({channel: channel.id, status})))\n      })\n      const subscriber = {handler, unsubscribers}\n      statusSubscribers.add(subscriber)\n      return () => {\n        unsubscribers.forEach((unsub) => unsub())\n        statusSubscribers.delete(subscriber)\n      }\n    }\n\n    const stop = () => {\n      channels.forEach((channel) => {\n        channel.disconnect()\n        channel.stop()\n      })\n    }\n\n    const start = () => {\n      channels.forEach((channel) => {\n        channel.start()\n        channel.connect()\n      })\n\n      return stop\n    }\n\n    return {\n      on,\n      onInternalEvent,\n      onStatus,\n      post,\n      start,\n      stop,\n    }\n  }\n\n  const destroy = () => {\n    connections.forEach(({channels}) => {\n      channels.forEach((channel) => {\n        cleanupChannel(channel)\n        channels.delete(channel)\n      })\n    })\n  }\n\n  return {\n    addTarget,\n    createConnection,\n    destroy,\n  }\n}\n","import {v4 as uuid} from 'uuid'\nimport {\n  assertEvent,\n  assign,\n  createActor,\n  emit,\n  enqueueActions,\n  raise,\n  setup,\n  stopChild,\n  type ActorRefFrom,\n} from 'xstate'\nimport {createListenLogic, listenInputFromContext} from './common'\nimport {\n  DOMAIN,\n  MSG_DISCONNECT,\n  MSG_HANDSHAKE_ACK,\n  MSG_HANDSHAKE_SYN,\n  MSG_HANDSHAKE_SYN_ACK,\n  MSG_HEARTBEAT,\n  MSG_RESPONSE,\n} from './constants'\nimport {createRequestMachine, type RequestActorRef} from './request'\nimport type {\n  BufferAddedEmitEvent,\n  BufferFlushedEmitEvent,\n  HeartbeatEmitEvent,\n  HeartbeatMessage,\n  Message,\n  MessageEmitEvent,\n  ProtocolMessage,\n  RequestData,\n  Status,\n  WithoutResponse,\n} from './types'\n\n/**\n * @public\n */\nexport interface NodeInput {\n  name: string\n  connectTo: string\n  domain?: string\n}\n\n/**\n * @public\n */\nexport type NodeActorLogic<R extends Message, S extends Message> = ReturnType<\n  typeof createNodeMachine<R, S>\n>\n\n/**\n * @public\n */\nexport type NodeActor<R extends Message, S extends Message> = ActorRefFrom<NodeActorLogic<R, S>>\n\n/**\n * @public\n */\nexport type Node<R extends Message, S extends Message> = {\n  actor: NodeActor<R, S>\n  fetch: <const T extends S['type'], U extends WithoutResponse<S>>(\n    data: U,\n    options?: {signal?: AbortSignal; suppressWarnings?: boolean},\n  ) => S extends U ? (S['type'] extends T ? Promise<S['response']> : never) : never\n  machine: NodeActorLogic<R, S>\n  on: <T extends R['type'], U extends Extract<R, {type: T}>>(\n    type: T,\n    handler: (event: U['data']) => U['response'],\n  ) => () => void\n  onStatus: (handler: (status: Status) => void) => () => void\n  post: (data: WithoutResponse<S>) => void\n  start: () => () => void\n  stop: () => void\n}\n\n/**\n * @public\n */\nexport const createNodeMachine = <\n  R extends Message, // Receives\n  S extends Message, // Sends\n  V extends WithoutResponse<S> = WithoutResponse<S>,\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n>() => {\n  const nodeMachine = setup({\n    types: {} as {\n      children: {\n        'listen for disconnect': 'listen'\n        'listen for handshake ack': 'listen'\n        'listen for handshake syn': 'listen'\n        'listen for heartbeat': 'listen'\n        'listen for messages': 'listen'\n      }\n      context: {\n        buffer: Array<{\n          data: V\n          resolvable?: PromiseWithResolvers<S['response']>\n          options?: {\n            signal?: AbortSignal\n            suppressWarnings?: boolean\n          }\n        }>\n        connectionId: string | null\n        connectTo: string\n        domain: string\n        // The handshake buffer is a workaround to maintain backwards\n        // compatibility with the Sanity channels package, which may incorrectly\n        // send buffered messages _before_ it completes the handshake (i.e.\n        // sends an ack message). It should be removed in the next major.\n        handshakeBuffer: Array<{\n          type: 'message.received'\n          message: MessageEvent<ProtocolMessage<R>>\n        }>\n        name: string\n        requests: Array<RequestActorRef<S>>\n        target: MessageEventSource | undefined\n        targetOrigin: string | null\n      }\n      emitted:\n        | BufferAddedEmitEvent<V>\n        | BufferFlushedEmitEvent<V>\n        | HeartbeatEmitEvent\n        | MessageEmitEvent<R>\n        | (R extends R ? {type: R['type']; message: ProtocolMessage<R>} : never)\n      events:\n        | {type: 'heartbeat.received'; message: MessageEvent<ProtocolMessage<HeartbeatMessage>>}\n        | {type: 'message.received'; message: MessageEvent<ProtocolMessage<R>>}\n        | {\n            type: 'post'\n            data: V\n            resolvable?: PromiseWithResolvers<S['response']>\n            options?: {\n              signal?: AbortSignal\n              suppressWarning?: boolean\n            }\n          }\n        | {type: 'request.aborted'; requestId: string}\n        | {type: 'request.failed'; requestId: string}\n        | {\n            type: 'request.success'\n            requestId: string\n            response: S['response'] | null\n            responseTo: string | undefined\n          }\n        | {type: 'request'; data: RequestData<S> | RequestData<S>[]} // @todo align with 'post' type\n      input: NodeInput\n    },\n    actors: {\n      requestMachine: createRequestMachine<S>(),\n      listen: createListenLogic(),\n    },\n    actions: {\n      'buffer incoming message': assign({\n        handshakeBuffer: ({event, context}) => {\n          assertEvent(event, 'message.received')\n          return [...context.handshakeBuffer, event]\n        },\n      }),\n      'buffer message': enqueueActions(({enqueue}) => {\n        enqueue.assign({\n          buffer: ({event, context}) => {\n            assertEvent(event, 'post')\n            return [\n              ...context.buffer,\n              {\n                data: event.data,\n                resolvable: event.resolvable,\n                options: event.options,\n              },\n            ]\n          },\n        })\n        enqueue.emit(({event}) => {\n          assertEvent(event, 'post')\n          return {\n            type: '_buffer.added',\n            message: event.data,\n          } satisfies BufferAddedEmitEvent<V>\n        })\n      }),\n      'create request': assign({\n        requests: ({context, event, self, spawn}) => {\n          assertEvent(event, 'request')\n          const arr = Array.isArray(event.data) ? event.data : [event.data]\n          const requests = arr.map((request) => {\n            const id = `req-${uuid()}`\n            return spawn('requestMachine', {\n              id,\n              input: {\n                connectionId: context.connectionId!,\n                data: request.data,\n                domain: context.domain!,\n                expectResponse: request.expectResponse,\n                from: context.name,\n                parentRef: self,\n                resolvable: request.resolvable,\n                responseTo: request.responseTo,\n                signal: request.options?.signal,\n                sources: context.target!,\n                suppressWarnings: request.options?.suppressWarnings,\n                targetOrigin: context.targetOrigin!,\n                to: context.connectTo,\n                type: request.type,\n              },\n            })\n          })\n          return [...context.requests, ...requests]\n        },\n      }),\n      'emit heartbeat': emit(() => {\n        return {\n          type: '_heartbeat',\n        } satisfies HeartbeatEmitEvent\n      }),\n      'emit received message': enqueueActions(({enqueue}) => {\n        enqueue.emit(({event}) => {\n          assertEvent(event, 'message.received')\n          return {\n            type: '_message',\n            message: event.message.data,\n          } satisfies MessageEmitEvent<R>\n        })\n        enqueue.emit(({event}) => {\n          assertEvent(event, 'message.received')\n          const emit = {\n            type: event.message.data.type,\n            message: event.message.data,\n          }\n          return emit\n        })\n      }),\n      'flush buffer': enqueueActions(({enqueue}) => {\n        enqueue.raise(({context}) => ({\n          type: 'request',\n          data: context.buffer.map(({data, resolvable, options}) => ({\n            data: data.data,\n            type: data.type,\n            expectResponse: resolvable ? true : false,\n            resolvable,\n            options,\n          })),\n        }))\n        enqueue.emit(({context}) => {\n          return {\n            type: '_buffer.flushed',\n            messages: context.buffer.map(({data}) => data),\n          } satisfies BufferFlushedEmitEvent<V>\n        })\n        enqueue.assign({\n          buffer: [],\n        })\n      }),\n      'flush handshake buffer': enqueueActions(({context, enqueue}) => {\n        context.handshakeBuffer.forEach((event) => enqueue.raise(event))\n        enqueue.assign({\n          handshakeBuffer: [],\n        })\n      }),\n      'post': raise(({event}) => {\n        assertEvent(event, 'post')\n        return {\n          type: 'request' as const,\n          data: {\n            data: event.data.data,\n            expectResponse: event.resolvable ? true : false,\n            type: event.data.type,\n            resolvable: event.resolvable,\n            options: event.options,\n          },\n        }\n      }),\n      'remove request': enqueueActions(({context, enqueue, event}) => {\n        assertEvent(event, ['request.success', 'request.failed', 'request.aborted'])\n        stopChild(event.requestId)\n        enqueue.assign({requests: context.requests.filter(({id}) => id !== event.requestId)})\n      }),\n      'send response': raise(({event}) => {\n        assertEvent(event, ['message.received', 'heartbeat.received'])\n        return {\n          type: 'request' as const,\n          data: {\n            type: MSG_RESPONSE,\n            responseTo: event.message.data.id,\n            data: undefined,\n          },\n        }\n      }),\n      'send handshake syn ack': raise({\n        type: 'request',\n        data: {type: MSG_HANDSHAKE_SYN_ACK},\n      }),\n      'set connection config': assign({\n        connectionId: ({event}) => {\n          assertEvent(event, 'message.received')\n          return event.message.data.connectionId\n        },\n        target: ({event}) => {\n          assertEvent(event, 'message.received')\n          return event.message.source || undefined\n        },\n        targetOrigin: ({event}) => {\n          assertEvent(event, 'message.received')\n          return event.message.origin\n        },\n      }),\n    },\n    guards: {\n      hasSource: ({context}) => context.target !== null,\n    },\n  }).createMachine({\n    /** @xstate-layout N4IgpgJg5mDOIC5QDsD2EwGIBOYCOArnAC4B0sBAxpXLANoAMAuoqAA6qwCWxXqyrEAA9EAVgYAWUgEYJDUQA4JAZmUSJC0coDsAGhABPRNIYLSErdOkBOAGzbx227YUBfV-rQYc+IrDIAZgCGXAA2kIwsSCAc3Lz8giIIoiakqgBMDKbp2tYS0srp+kYI0ununuhgpFwQ4ZgQ-NVcyABuqADW1V7NdWAILe2UQfHIkZGCsTx8AtFJ6aKipAzWOtrpC7Z5BUWGiNoK6aS26RLW2tLaqkqqFSA9NX2YALa0QTCkuDRcrRHMk5xpgk5ogJLZSNZIVDoVCFLZiohbIVSLkXLZRHZDgxbHcHrV6rFiBNolNRolEVJbCsdGUzsoyhiEcllOC1DowelVmVrOUPPcqqQABZBZAQWDCjotKANJo1NqdboC4Wi8VBSXIKADeXDUbjf4kwFkkEILbg8RZMHKOzWKzKJkHJa086Xa4qZS4pUisUSqU+QgkYnsQ0zcnJaRLDbpZwKNQSBYspm2MEyC5KTnaDSSd18h7K71q32EwMxYPA0BJFLKY5yZxIrKSURM0RnFHSBTrQqQ9babQejBCr2q9XSiBcWCUfjIMCUIn6oNxEPGtTWFFR0RUy7iGzt+3Ip0XURXVZKPvVCfIKczyB+vyzqLzoGzcuIG0MGTyCztjRtjaJjbHVMNAUTdu1PUhz0vYhryLOcSwXMthBfK0ZGsLQGBZekCi0Jso1IdI23WG04zOE4wIg6coIgBox3Imdi1JRdnxNOxSHNSQkWtW0mTjMxMQ7fDzgcbNKn7WjKJeN4Pi+MAfj+e84MfUMFHbZZwxOHZNDyO09gQOQjmAhZJCM9IMjIycKOvQUwCCbBiAAI2sshpNkiB6NLJ9EIQBQbWOdJlMhYCUjbJkchXGsFmsJQMVsWl3BzKp4GiHoAXgjykgAWmkZZ6xy3LZF2EobCy6xsQWJQ42kE4FjA-EwBSxTjSRUhDgqkzgO2BxdykU4AvXFQ-KjMC8yHKV6qNJi6WOdcypcZsXGxe0JG0XySKjM5lKsMyLwsiAxsYzylDfONznUEqrmi+1ThkHqXDONbULi1wgA */\n    id: 'node',\n    context: ({input}) => ({\n      buffer: [],\n      connectionId: null,\n      connectTo: input.connectTo,\n      domain: input.domain ?? DOMAIN,\n      handshakeBuffer: [],\n      name: input.name,\n      requests: [],\n      target: undefined,\n      targetOrigin: null,\n    }),\n    on: {\n      'request.success': {\n        actions: 'remove request',\n      },\n      'request.failed': {\n        actions: 'remove request',\n      },\n      'request.aborted': {\n        actions: 'remove request',\n      },\n    },\n    initial: 'idle',\n    states: {\n      idle: {\n        invoke: {\n          id: 'listen for handshake syn',\n          src: 'listen',\n          input: listenInputFromContext({\n            include: MSG_HANDSHAKE_SYN,\n            count: 1,\n          }),\n          onDone: {\n            target: 'handshaking',\n            guard: 'hasSource',\n          },\n        },\n        on: {\n          'message.received': {\n            actions: 'set connection config',\n          },\n          'post': {\n            actions: 'buffer message',\n          },\n        },\n      },\n      handshaking: {\n        entry: 'send handshake syn ack',\n        invoke: [\n          {\n            id: 'listen for handshake ack',\n            src: 'listen',\n            input: listenInputFromContext({\n              include: MSG_HANDSHAKE_ACK,\n              count: 1,\n              // Override the default `message.received` responseType to prevent\n              // buffering the ack message. We transition to the connected state\n              // using onDone instead of listening to this event using `on`\n              responseType: 'handshake.complete',\n            }),\n            onDone: 'connected',\n          },\n          {\n            id: 'listen for disconnect',\n            src: 'listen',\n            input: listenInputFromContext({\n              include: MSG_DISCONNECT,\n              count: 1,\n              responseType: 'disconnect',\n            }),\n          },\n          {\n            id: 'listen for messages',\n            src: 'listen',\n            input: listenInputFromContext({\n              exclude: [MSG_DISCONNECT, MSG_HANDSHAKE_ACK, MSG_HEARTBEAT, MSG_RESPONSE],\n            }),\n          },\n        ],\n        on: {\n          'request': {\n            actions: 'create request',\n          },\n          'post': {\n            actions: 'buffer message',\n          },\n          'message.received': {\n            actions: 'buffer incoming message',\n          },\n          'disconnect': {\n            target: 'idle',\n          },\n        },\n      },\n      connected: {\n        entry: ['flush handshake buffer', 'flush buffer'],\n        invoke: [\n          {\n            id: 'listen for messages',\n            src: 'listen',\n            input: listenInputFromContext({\n              exclude: [MSG_RESPONSE, MSG_HEARTBEAT],\n            }),\n          },\n          {\n            id: 'listen for heartbeat',\n            src: 'listen',\n            input: listenInputFromContext({\n              include: MSG_HEARTBEAT,\n              responseType: 'heartbeat.received',\n            }),\n          },\n          {\n            id: 'listen for disconnect',\n            src: 'listen',\n            input: listenInputFromContext({\n              include: MSG_DISCONNECT,\n              count: 1,\n              responseType: 'disconnect',\n            }),\n          },\n        ],\n        on: {\n          'request': {\n            actions: 'create request',\n          },\n          'post': {\n            actions: 'post',\n          },\n          'disconnect': {\n            target: 'idle',\n          },\n          'message.received': {\n            actions: ['send response', 'emit received message'],\n          },\n          'heartbeat.received': {\n            actions: ['send response', 'emit heartbeat'],\n          },\n        },\n      },\n    },\n  })\n  return nodeMachine\n}\n\n/**\n * @public\n */\nexport const createNode = <R extends Message, S extends Message>(\n  input: NodeInput,\n  machine: NodeActorLogic<R, S> = createNodeMachine<R, S>(),\n): Node<R, S> => {\n  const actor = createActor(machine, {\n    input,\n  })\n\n  const on = <T extends R['type'], U extends Extract<R, {type: T}>>(\n    type: T,\n    handler: (event: U['data']) => U['response'],\n  ) => {\n    const {unsubscribe} = actor.on(\n      // @ts-expect-error @todo `type` typing\n      type,\n      (event: {type: T; message: ProtocolMessage<U>}) => {\n        handler(event.message.data)\n      },\n    )\n    return unsubscribe\n  }\n\n  const onStatus = (handler: (status: Status) => void) => {\n    const snapshot = actor.getSnapshot()\n    let currentStatus: Status =\n      typeof snapshot.value === 'string' ? snapshot.value : Object.keys(snapshot.value)[0]\n\n    const {unsubscribe} = actor.subscribe((state) => {\n      const status: Status =\n        typeof state.value === 'string' ? state.value : Object.keys(state.value)[0]\n      if (currentStatus !== status) {\n        currentStatus = status\n        handler(status)\n      }\n    })\n    return unsubscribe\n  }\n\n  const post = (data: WithoutResponse<S>) => {\n    actor.send({type: 'post', data})\n  }\n\n  const fetch = (\n    data: WithoutResponse<S>,\n    options?: {signal?: AbortSignal; suppressWarnings?: boolean},\n  ) => {\n    const resolvable = Promise.withResolvers<S['response']>()\n    actor.send({\n      type: 'post',\n      data,\n      resolvable,\n      options,\n    })\n    return resolvable.promise as never\n  }\n\n  const stop = () => {\n    actor.stop()\n  }\n\n  const start = () => {\n    actor.start()\n    return stop\n  }\n\n  return {\n    actor,\n    fetch,\n    machine,\n    on,\n    onStatus,\n    post,\n    start,\n    stop,\n  }\n}\n"],"names":["uuid","input"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}},
    {"offset": {"line": 9211, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9217, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/compute-scroll-into-view/src/index.ts"],"sourcesContent":["// Compute what scrolling needs to be done on required scrolling boxes for target to be in view\n\n// The type names here are named after the spec to make it easier to find more information around what they mean:\n// To reduce churn and reduce things that need be maintained things from the official TS DOM library is used here\n// https://drafts.csswg.org/cssom-view/\n\n// For a definition on what is \"block flow direction\" exactly, check this: https://drafts.csswg.org/css-writing-modes-4/#block-flow-direction\n\n/**\n * This new option is tracked in this PR, which is the most likely candidate at the time: https://github.com/w3c/csswg-drafts/pull/1805\n * @public\n */\nexport type ScrollMode = 'always' | 'if-needed'\n\n/** @public */\nexport interface Options {\n  /**\n   * Control the logical scroll position on the y-axis. The spec states that the `block` direction is related to the [writing-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode), but this is not implemented yet in this library.\n   * This means that `block: 'start'` aligns to the top edge and `block: 'end'` to the bottom.\n   * @defaultValue 'center'\n   */\n  block?: ScrollLogicalPosition\n  /**\n   * Like `block` this is affected by the [writing-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode). In left-to-right pages `inline: 'start'` will align to the left edge. In right-to-left it should be flipped. This will be supported in a future release.\n   * @defaultValue 'nearest'\n   */\n  inline?: ScrollLogicalPosition\n  /**\n   * This is a proposed addition to the spec that you can track here: https://github.com/w3c/csswg-drafts/pull/5677\n   *\n   * This library will be updated to reflect any changes to the spec and will provide a migration path.\n   * To be backwards compatible with `Element.scrollIntoViewIfNeeded` if something is not 100% visible it will count as \"needs scrolling\". If you need a different visibility ratio your best option would be to implement an [Intersection Observer](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).\n   * @defaultValue 'always'\n   */\n  scrollMode?: ScrollMode\n  /**\n   * By default there is no boundary. All the parent elements of your target is checked until it reaches the viewport ([`document.scrollingElement`](https://developer.mozilla.org/en-US/docs/Web/API/document/scrollingElement)) when calculating layout and what to scroll.\n   * By passing a boundary you can short-circuit this loop depending on your needs:\n   * \n   * - Prevent the browser window from scrolling.\n   * - Scroll elements into view in a list, without scrolling container elements.\n   * \n   * You can also pass a function to do more dynamic checks to override the scroll scoping:\n   * \n   * ```js\n   * let actions = compute(target, {\n   *   boundary: (parent) => {\n   *     // By default `overflow: hidden` elements are allowed, only `overflow: visible | clip` is skipped as\n   *     // this is required by the CSSOM spec\n   *     if (getComputedStyle(parent)['overflow'] === 'hidden') {\n   *       return false\n   *     }\n\n   *     return true\n   *   },\n   * })\n   * ```\n   * @defaultValue null\n   */\n  boundary?: Element | ((parent: Element) => boolean) | null\n  /**\n   * New option that skips auto-scrolling all nodes with overflow: hidden set\n   * See FF implementation: https://hg.mozilla.org/integration/fx-team/rev/c48c3ec05012#l7.18\n   * @defaultValue false\n   * @public\n   */\n  skipOverflowHiddenElements?: boolean\n}\n\n/** @public */\nexport interface ScrollAction {\n  el: Element\n  top: number\n  left: number\n}\n\n// @TODO better shadowdom test, 11 = document fragment\nconst isElement = (el: any): el is Element =>\n  typeof el === 'object' && el != null && el.nodeType === 1\n\nconst canOverflow = (\n  overflow: string | null,\n  skipOverflowHiddenElements?: boolean\n) => {\n  if (skipOverflowHiddenElements && overflow === 'hidden') {\n    return false\n  }\n\n  return overflow !== 'visible' && overflow !== 'clip'\n}\n\nconst getFrameElement = (el: Element) => {\n  if (!el.ownerDocument || !el.ownerDocument.defaultView) {\n    return null\n  }\n\n  try {\n    return el.ownerDocument.defaultView.frameElement\n  } catch (e) {\n    return null\n  }\n}\n\nconst isHiddenByFrame = (el: Element): boolean => {\n  const frame = getFrameElement(el)\n  if (!frame) {\n    return false\n  }\n\n  return (\n    frame.clientHeight < el.scrollHeight || frame.clientWidth < el.scrollWidth\n  )\n}\n\nconst isScrollable = (el: Element, skipOverflowHiddenElements?: boolean) => {\n  if (el.clientHeight < el.scrollHeight || el.clientWidth < el.scrollWidth) {\n    const style = getComputedStyle(el, null)\n    return (\n      canOverflow(style.overflowY, skipOverflowHiddenElements) ||\n      canOverflow(style.overflowX, skipOverflowHiddenElements) ||\n      isHiddenByFrame(el)\n    )\n  }\n\n  return false\n}\n/**\n * Find out which edge to align against when logical scroll position is \"nearest\"\n * Interesting fact: \"nearest\" works similarily to \"if-needed\", if the element is fully visible it will not scroll it\n *\n * Legends:\n *      \n *  target    frame\n *      \n */\nconst alignNearest = (\n  scrollingEdgeStart: number,\n  scrollingEdgeEnd: number,\n  scrollingSize: number,\n  scrollingBorderStart: number,\n  scrollingBorderEnd: number,\n  elementEdgeStart: number,\n  elementEdgeEnd: number,\n  elementSize: number\n) => {\n  /**\n   * If element edge A and element edge B are both outside scrolling box edge A and scrolling box edge B\n   *\n   *          \n   *        \n   *            \n   *                    do nothing\n   *            \n   *        \n   *          \n   *\n   *  If element edge C and element edge D are both outside scrolling box edge C and scrolling box edge D\n   *\n   *         \n   *   \n   *                    do nothing\n   *   \n   *         \n   */\n  if (\n    (elementEdgeStart < scrollingEdgeStart &&\n      elementEdgeEnd > scrollingEdgeEnd) ||\n    (elementEdgeStart > scrollingEdgeStart && elementEdgeEnd < scrollingEdgeEnd)\n  ) {\n    return 0\n  }\n\n  /**\n   * If element edge A is outside scrolling box edge A and element height is less than scrolling box height\n   *\n   *          \n   *                 \n   *                         \n   *  from             to    \n   *\n   *                     \n   *\n   * If element edge B is outside scrolling box edge B and element height is greater than scrolling box height\n   *\n   *                   \n   *                             \n   *  from         to      \n   *                           \n   *                 \n   *                         \n   *            \n   *          \n   *\n   * If element edge C is outside scrolling box edge C and element width is less than scrolling box width\n   *\n   *       from                 to\n   *                       \n   *                   \n   *                            \n   *                   \n   *                       \n   *\n   * If element edge D is outside scrolling box edge D and element width is greater than scrolling box width\n   *\n   *       from                 to\n   *                       \n   *           \n   *                              \n   *           \n   *                       \n   */\n  if (\n    (elementEdgeStart <= scrollingEdgeStart && elementSize <= scrollingSize) ||\n    (elementEdgeEnd >= scrollingEdgeEnd && elementSize >= scrollingSize)\n  ) {\n    return elementEdgeStart - scrollingEdgeStart - scrollingBorderStart\n  }\n\n  /**\n   * If element edge B is outside scrolling box edge B and element height is less than scrolling box height\n   *\n   *                     \n   *\n   *  from             to    \n   *                         \n   *                 \n   *          \n   *\n   * If element edge A is outside scrolling box edge A and element height is greater than scrolling box height\n   *\n   *          \n   *            \n   *                         \n   *                 \n   *                           \n   *  from         to      \n   *                             \n   *                   \n   *\n   * If element edge C is outside scrolling box edge C and element width is greater than scrolling box width\n   *\n   *           from                 to\n   *                           \n   *             \n   *                                \n   *             \n   *                           \n   *\n   * If element edge D is outside scrolling box edge D and element width is less than scrolling box width\n   *\n   *           from                 to\n   *                           \n   *                             \n   *                                \n   *                             \n   *                           \n   *\n   */\n  if (\n    (elementEdgeEnd > scrollingEdgeEnd && elementSize < scrollingSize) ||\n    (elementEdgeStart < scrollingEdgeStart && elementSize > scrollingSize)\n  ) {\n    return elementEdgeEnd - scrollingEdgeEnd + scrollingBorderEnd\n  }\n\n  return 0\n}\n\nconst getParentElement = (element: Node): Element | null => {\n  const parent = element.parentElement\n  if (parent == null) {\n    return (element.getRootNode() as ShadowRoot).host || null\n  }\n  return parent\n}\n\nconst getScrollMargins = (target: Element) => {\n  const computedStyle = window.getComputedStyle(target)\n  return {\n    top: parseFloat(computedStyle.scrollMarginTop) || 0,\n    right: parseFloat(computedStyle.scrollMarginRight) || 0,\n    bottom: parseFloat(computedStyle.scrollMarginBottom) || 0,\n    left: parseFloat(computedStyle.scrollMarginLeft) || 0,\n  }\n}\n\n/** @public */\nexport const compute = (target: Element, options: Options): ScrollAction[] => {\n  if (typeof document === 'undefined') {\n    // If there's no DOM we assume it's not in a browser environment\n    return []\n  }\n\n  const { scrollMode, block, inline, boundary, skipOverflowHiddenElements } =\n    options\n  // Allow using a callback to check the boundary\n  // The default behavior is to check if the current target matches the boundary element or not\n  // If undefined it'll check that target is never undefined (can happen as we recurse up the tree)\n  const checkBoundary =\n    typeof boundary === 'function' ? boundary : (node: any) => node !== boundary\n\n  if (!isElement(target)) {\n    throw new TypeError('Invalid target')\n  }\n\n  // Used to handle the top most element that can be scrolled\n  const scrollingElement = document.scrollingElement || document.documentElement\n\n  // Collect all the scrolling boxes, as defined in the spec: https://drafts.csswg.org/cssom-view/#scrolling-box\n  const frames: Element[] = []\n  let cursor: Element | null = target\n  while (isElement(cursor) && checkBoundary(cursor)) {\n    // Move cursor to parent\n    cursor = getParentElement(cursor)\n\n    // Stop when we reach the viewport\n    if (cursor === scrollingElement) {\n      frames.push(cursor)\n      break\n    }\n\n    // Skip document.body if it's not the scrollingElement and documentElement isn't independently scrollable\n    if (\n      cursor != null &&\n      cursor === document.body &&\n      isScrollable(cursor) &&\n      !isScrollable(document.documentElement)\n    ) {\n      continue\n    }\n\n    // Now we check if the element is scrollable, this code only runs if the loop haven't already hit the viewport or a custom boundary\n    if (cursor != null && isScrollable(cursor, skipOverflowHiddenElements)) {\n      frames.push(cursor)\n    }\n  }\n\n  // Support pinch-zooming properly, making sure elements scroll into the visual viewport\n  // Browsers that don't support visualViewport will report the layout viewport dimensions on document.documentElement.clientWidth/Height\n  // and viewport dimensions on window.innerWidth/Height\n  // https://www.quirksmode.org/mobile/viewports2.html\n  // https://bokand.github.io/viewport/index.html\n  const viewportWidth = window.visualViewport?.width ?? innerWidth\n  const viewportHeight = window.visualViewport?.height ?? innerHeight\n  const { scrollX, scrollY } = window\n\n  const {\n    height: targetHeight,\n    width: targetWidth,\n    top: targetTop,\n    right: targetRight,\n    bottom: targetBottom,\n    left: targetLeft,\n  } = target.getBoundingClientRect()\n  const {\n    top: marginTop,\n    right: marginRight,\n    bottom: marginBottom,\n    left: marginLeft,\n  } = getScrollMargins(target)\n\n  // These values mutate as we loop through and generate scroll coordinates\n  let targetBlock: number =\n    block === 'start' || block === 'nearest'\n      ? targetTop - marginTop\n      : block === 'end'\n      ? targetBottom + marginBottom\n      : targetTop + targetHeight / 2 - marginTop + marginBottom // block === 'center\n  let targetInline: number =\n    inline === 'center'\n      ? targetLeft + targetWidth / 2 - marginLeft + marginRight\n      : inline === 'end'\n      ? targetRight + marginRight\n      : targetLeft - marginLeft // inline === 'start || inline === 'nearest\n\n  // Collect new scroll positions\n  const computations: ScrollAction[] = []\n  // In chrome there's no longer a difference between caching the `frames.length` to a var or not, so we don't in this case (size > speed anyways)\n  for (let index = 0; index < frames.length; index++) {\n    const frame = frames[index]\n\n    // @TODO add a shouldScroll hook here that allows userland code to take control\n\n    const { height, width, top, right, bottom, left } =\n      frame.getBoundingClientRect()\n\n    // If the element is already visible we can end it here\n    // @TODO targetBlock and targetInline should be taken into account to be compliant with https://github.com/w3c/csswg-drafts/pull/1805/files#diff-3c17f0e43c20f8ecf89419d49e7ef5e0R1333\n    if (\n      scrollMode === 'if-needed' &&\n      targetTop >= 0 &&\n      targetLeft >= 0 &&\n      targetBottom <= viewportHeight &&\n      targetRight <= viewportWidth &&\n      targetTop >= top &&\n      targetBottom <= bottom &&\n      targetLeft >= left &&\n      targetRight <= right\n    ) {\n      // Break the loop and return the computations for things that are not fully visible\n      return computations\n    }\n\n    const frameStyle = getComputedStyle(frame)\n    const borderLeft = parseInt(frameStyle.borderLeftWidth as string, 10)\n    const borderTop = parseInt(frameStyle.borderTopWidth as string, 10)\n    const borderRight = parseInt(frameStyle.borderRightWidth as string, 10)\n    const borderBottom = parseInt(frameStyle.borderBottomWidth as string, 10)\n\n    let blockScroll: number = 0\n    let inlineScroll: number = 0\n\n    // The property existance checks for offfset[Width|Height] is because only HTMLElement objects have them, but any Element might pass by here\n    // @TODO find out if the \"as HTMLElement\" overrides can be dropped\n    const scrollbarWidth =\n      'offsetWidth' in frame\n        ? (frame as HTMLElement).offsetWidth -\n          (frame as HTMLElement).clientWidth -\n          borderLeft -\n          borderRight\n        : 0\n    const scrollbarHeight =\n      'offsetHeight' in frame\n        ? (frame as HTMLElement).offsetHeight -\n          (frame as HTMLElement).clientHeight -\n          borderTop -\n          borderBottom\n        : 0\n\n    const scaleX =\n      'offsetWidth' in frame\n        ? (frame as HTMLElement).offsetWidth === 0\n          ? 0\n          : width / (frame as HTMLElement).offsetWidth\n        : 0\n    const scaleY =\n      'offsetHeight' in frame\n        ? (frame as HTMLElement).offsetHeight === 0\n          ? 0\n          : height / (frame as HTMLElement).offsetHeight\n        : 0\n\n    if (scrollingElement === frame) {\n      // Handle viewport logic (document.documentElement or document.body)\n\n      if (block === 'start') {\n        blockScroll = targetBlock\n      } else if (block === 'end') {\n        blockScroll = targetBlock - viewportHeight\n      } else if (block === 'nearest') {\n        blockScroll = alignNearest(\n          scrollY,\n          scrollY + viewportHeight,\n          viewportHeight,\n          borderTop,\n          borderBottom,\n          scrollY + targetBlock,\n          scrollY + targetBlock + targetHeight,\n          targetHeight\n        )\n      } else {\n        // block === 'center' is the default\n        blockScroll = targetBlock - viewportHeight / 2\n      }\n\n      if (inline === 'start') {\n        inlineScroll = targetInline\n      } else if (inline === 'center') {\n        inlineScroll = targetInline - viewportWidth / 2\n      } else if (inline === 'end') {\n        inlineScroll = targetInline - viewportWidth\n      } else {\n        // inline === 'nearest' is the default\n        inlineScroll = alignNearest(\n          scrollX,\n          scrollX + viewportWidth,\n          viewportWidth,\n          borderLeft,\n          borderRight,\n          scrollX + targetInline,\n          scrollX + targetInline + targetWidth,\n          targetWidth\n        )\n      }\n\n      // Apply scroll position offsets and ensure they are within bounds\n      // @TODO add more test cases to cover this 100%\n      blockScroll = Math.max(0, blockScroll + scrollY)\n      inlineScroll = Math.max(0, inlineScroll + scrollX)\n    } else {\n      // Handle each scrolling frame that might exist between the target and the viewport\n      if (block === 'start') {\n        blockScroll = targetBlock - top - borderTop\n      } else if (block === 'end') {\n        blockScroll = targetBlock - bottom + borderBottom + scrollbarHeight\n      } else if (block === 'nearest') {\n        blockScroll = alignNearest(\n          top,\n          bottom,\n          height,\n          borderTop,\n          borderBottom + scrollbarHeight,\n          targetBlock,\n          targetBlock + targetHeight,\n          targetHeight\n        )\n      } else {\n        // block === 'center' is the default\n        blockScroll = targetBlock - (top + height / 2) + scrollbarHeight / 2\n      }\n\n      if (inline === 'start') {\n        inlineScroll = targetInline - left - borderLeft\n      } else if (inline === 'center') {\n        inlineScroll = targetInline - (left + width / 2) + scrollbarWidth / 2\n      } else if (inline === 'end') {\n        inlineScroll = targetInline - right + borderRight + scrollbarWidth\n      } else {\n        // inline === 'nearest' is the default\n        inlineScroll = alignNearest(\n          left,\n          right,\n          width,\n          borderLeft,\n          borderRight + scrollbarWidth,\n          targetInline,\n          targetInline + targetWidth,\n          targetWidth\n        )\n      }\n\n      const { scrollLeft, scrollTop } = frame\n      // Ensure scroll coordinates are not out of bounds while applying scroll offsets\n      blockScroll =\n        scaleY === 0\n          ? 0\n          : Math.max(\n              0,\n              Math.min(\n                scrollTop + blockScroll / scaleY,\n                frame.scrollHeight - height / scaleY + scrollbarHeight\n              )\n            )\n      inlineScroll =\n        scaleX === 0\n          ? 0\n          : Math.max(\n              0,\n              Math.min(\n                scrollLeft + inlineScroll / scaleX,\n                frame.scrollWidth - width / scaleX + scrollbarWidth\n              )\n            )\n\n      // Cache the offset so that parent frames can scroll this into view correctly\n      targetBlock += scrollTop - blockScroll\n      targetInline += scrollLeft - inlineScroll\n    }\n\n    computations.push({ el: frame, top: blockScroll, left: inlineScroll })\n  }\n\n  return computations\n}\n"],"names":["isElement","el","nodeType","canOverflow","overflow","skipOverflowHiddenElements","isScrollable","clientHeight","scrollHeight","clientWidth","scrollWidth","style","getComputedStyle","overflowY","overflowX","frame","ownerDocument","defaultView","frameElement","e","getFrameElement","isHiddenByFrame","alignNearest","scrollingEdgeStart","scrollingEdgeEnd","scrollingSize","scrollingBorderStart","scrollingBorderEnd","elementEdgeStart","elementEdgeEnd","elementSize","getParentElement","element","parent","parentElement","getRootNode","host","compute","target","options","_a","_b","_c","_d","document","scrollMode","block","inline","boundary","checkBoundary","node","TypeError","scrollingElement","documentElement","frames","cursor","push","body","viewportWidth","window","visualViewport","width","innerWidth","viewportHeight","height","innerHeight","scrollX","scrollY","targetHeight","targetWidth","top","targetTop","right","targetRight","bottom","targetBottom","left","targetLeft","getBoundingClientRect","marginTop","marginRight","marginBottom","marginLeft","computedStyle","parseFloat","scrollMarginTop","scrollMarginRight","scrollMarginBottom","scrollMarginLeft","getScrollMargins","targetBlock","targetInline","computations","index","length","frameStyle","borderLeft","parseInt","borderLeftWidth","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","blockScroll","inlineScroll","scrollbarWidth","offsetWidth","scrollbarHeight","offsetHeight","scaleX","scaleY","Math","max","scrollLeft","scrollTop","min"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9286, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9292, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/ypeskov/Projects/CMS/Sanity3/nextjs-app/node_modules/scroll-into-view-if-needed/src/index.ts"],"sourcesContent":["import { compute } from 'compute-scroll-into-view'\nimport type {\n  Options as BaseOptions,\n  ScrollAction,\n} from 'compute-scroll-into-view'\n\n/** @public */\nexport type Options<T = unknown> =\n  | StandardBehaviorOptions\n  | CustomBehaviorOptions<T>\n\n/**\n * Only scrolls if the `node` is partially out of view:\n * ```ts\n * scrollIntoView(node, { scrollMode: 'if-needed' })\n * ```\n * Skips scrolling `overflow: hidden` elements:\n * ```ts\n * scrollIntoView(node, { skipOverflowHiddenElements: true })\n * ```\n * When scrolling is needed do the least and smoothest scrolling possible:\n * ```ts\n * scrollIntoView(node, {\n *   behavior: 'smooth',\n *   scrollMode: 'if-needed',\n *   block: 'nearest',\n *   inline: 'nearest',\n * })\n * ```\n * @public\n */\nexport interface StandardBehaviorOptions extends BaseOptions {\n  /**\n   * @defaultValue 'auto\n   */\n  behavior?: ScrollBehavior\n}\n\n/** @public */\nexport interface CustomBehaviorOptions<T = unknown> extends BaseOptions {\n  behavior: CustomScrollBehaviorCallback<T>\n}\n\n/** @public */\nexport type CustomScrollBehaviorCallback<T = unknown> = (\n  actions: ScrollAction[]\n) => T\n\nconst isStandardScrollBehavior = (\n  options: any\n): options is StandardBehaviorOptions =>\n  options === Object(options) && Object.keys(options).length !== 0\n\nconst isCustomScrollBehavior = <T = unknown>(\n  options: any\n): options is CustomBehaviorOptions<T> =>\n  typeof options === 'object' ? typeof options.behavior === 'function' : false\n\nconst getOptions = (options: any): StandardBehaviorOptions => {\n  // Handle alignToTop for legacy reasons, to be compatible with the spec\n  if (options === false) {\n    return { block: 'end', inline: 'nearest' }\n  }\n\n  if (isStandardScrollBehavior(options)) {\n    // compute.ts ensures the defaults are block: 'center' and inline: 'nearest', to conform to the spec\n    return options\n  }\n\n  // if options = {}, options = true or options = null, based on w3c web platform test\n  return { block: 'start', inline: 'nearest' }\n}\n\nconst getScrollMargins = (target: Element) => {\n  const computedStyle = window.getComputedStyle(target)\n  return {\n    top: parseFloat(computedStyle.scrollMarginTop) || 0,\n    right: parseFloat(computedStyle.scrollMarginRight) || 0,\n    bottom: parseFloat(computedStyle.scrollMarginBottom) || 0,\n    left: parseFloat(computedStyle.scrollMarginLeft) || 0,\n  }\n}\n\n// Determine if the element is part of the document (including shadow dom)\n// Derived from code of Andy Desmarais\n// https://terodox.tech/how-to-tell-if-an-element-is-in-the-dom-including-the-shadow-dom/\nconst isInDocument = (element: Node) => {\n  let currentElement = element\n  while (currentElement && currentElement.parentNode) {\n    if (currentElement.parentNode === document) {\n      return true\n    } else if (currentElement.parentNode instanceof ShadowRoot) {\n      currentElement = (currentElement.parentNode as ShadowRoot).host\n    } else {\n      currentElement = currentElement.parentNode\n    }\n  }\n  return false\n}\n\n/**\n * Scrolls the given element into view, with options for when, and how.\n * Supports the same `options` as [`Element.prototype.scrollIntoView`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView) with additions such as `scrollMode`, `behavior: Function` and `skipOverflowHiddenElements`.\n * @public\n */\nfunction scrollIntoView(\n  target: Element,\n  options?: StandardBehaviorOptions | boolean\n): void\n/**\n * Scrolls the given element into view, with options for when, and how.\n * Supports the same `options` as [`Element.prototype.scrollIntoView`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView) with additions such as `scrollMode`, `behavior: Function` and `skipOverflowHiddenElements`.\n *\n * You can set the expected return type for `behavior: Function`:\n * ```ts\n * await scrollIntoView<Promise<boolean[]>>(node, {\n *   behavior: async actions => {\n *     return Promise.all(actions.map(\n *       // animate() resolves to `true` if anything was animated, `false` if the element already were in the end state\n *       ({ el, left, top }) => animate(el, {scroll: {left, top}})\n *     ))\n *   }\n * })\n * ```\n * @public\n */\nfunction scrollIntoView<T>(\n  target: Element,\n  options: CustomBehaviorOptions<T>\n): T\nfunction scrollIntoView<T = unknown>(\n  target: Element,\n  options?: StandardBehaviorOptions | CustomBehaviorOptions<T> | boolean\n): T | void {\n  // Browsers treats targets that aren't in the dom as a no-op and so should we\n  if (!target.isConnected || !isInDocument(target)) {\n    return\n  }\n\n  const margins = getScrollMargins(target)\n\n  if (isCustomScrollBehavior<T>(options)) {\n    return options.behavior(compute(target, options))\n  }\n\n  const behavior = typeof options === 'boolean' ? undefined : options?.behavior\n\n  for (const { el, top, left } of compute(target, getOptions(options))) {\n    const adjustedTop = top - margins.top + margins.bottom\n    const adjustedLeft = left - margins.left + margins.right\n    el.scroll({ top: adjustedTop, left: adjustedLeft, behavior })\n  }\n}\n\nexport default scrollIntoView\n"],"names":["getOptions","options","block","inline","Object","keys","length","isStandardScrollBehavior","scrollIntoView","target","isConnected","element","currentElement","parentNode","document","ShadowRoot","host","isInDocument","margins","computedStyle","window","getComputedStyle","top","parseFloat","scrollMarginTop","right","scrollMarginRight","bottom","scrollMarginBottom","left","scrollMarginLeft","getScrollMargins","behavior","isCustomScrollBehavior","compute","el","adjustedTop","adjustedLeft","scroll"],"mappings":";;;;;AAgDA,MAUMA,IAAcC,KAAAA,CAEF,MAAZA,IACK;QAAEC,OAAO;QAAOC,QAAQ;IAAA,IAZjCF,CAAAA,CAAAA,IAEAA,MAAYG,OAAOH,MAA4C,MAAhCG,OAAOC,IAAAA,CAAKJ,GAASK,MAAAA,CAahDC,CAAyBN,KAEpBA,IAIF;QAAEC,OAAO;QAASC,QAAQ;IAAA;AA4DnC,SAASK,EACPC,CAAAA,EACAR,CAAAA;IAGA,IAAA,CAAKQ,EAAOC,WAAAA,IAAAA,CAjDQC,CAAAA,CAAAA;QACpB,IAAIC,IAAiBD;QACd,MAAAC,KAAkBA,EAAeC,UAAAA,EAAY;YAC9C,IAAAD,EAAeC,UAAAA,KAAeC,UACzB,OAAA,CAAA;YAEPF,IADSA,EAAeC,UAAAA,YAAsBE,aAC5BH,EAAeC,UAAAA,CAA0BG,IAAAA,GAE1CJ,EAAeC;QAEpC;QACO,OAAA,CAAA;IAAA,CAAA,CAsCqBI,CAAaR,IACvC;IAGI,MAAAS,IAlEkBT,CAAAA,CAAAA;QAClB,MAAAU,IAAgBC,OAAOC,gBAAAA,CAAiBZ;QACvC,OAAA;YACLa,KAAKC,WAAWJ,EAAcK,eAAAA,KAAoB;YAClDC,OAAOF,WAAWJ,EAAcO,iBAAAA,KAAsB;YACtDC,QAAQJ,WAAWJ,EAAcS,kBAAAA,KAAuB;YACxDC,MAAMN,WAAWJ,EAAcW,gBAAAA,KAAqB;QAAA;IACtD,CAAA,CA2DgBC,CAAiBtB;IAE7B,IAvFJR,CAAAA,CAAAA,IAEmB,YAAA,OAAZA,KAAmD,cAAA,OAArBA,EAAQ+B,QAAAA,CAqFzCC,CAA0BhC,IAC5B,OAAOA,EAAQ+B,QAAAA,EAASE,gLAAAA,EAAQzB,GAAQR;IAG1C,MAAM+B,IAA8B,aAAA,OAAZ/B,KAA6C,QAATA,IAAAA,KAAZ,IAAqBA,EAAA+B,QAAAA;IAE1D,KAAA,MAAA,EAAAG,IAAEA,CAAAA,EAAIb,KAAAA,CAAAA,EAAAO,MAAKA,CAAAA,EAAAA,qLAAUK,EAAQzB,GAAQT,EAAWC,IAAW;QACpE,MAAMmC,IAAcd,IAAMJ,EAAQI,GAAAA,GAAMJ,EAAQS,MAAAA,EAC1CU,IAAeR,IAAOX,EAAQW,IAAAA,GAAOX,EAAQO,KAAAA;QACnDU,EAAGG,MAAAA,CAAO;YAAEhB,KAAKc;YAAaP,MAAMQ;YAAcL,UAAAA;QAAAA;IACpD;AACF,QAAAxB;;CAAAA,iCAAAA","ignoreList":[0]}},
    {"offset": {"line": 9335, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}